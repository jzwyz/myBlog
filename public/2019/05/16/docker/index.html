<!DOCTYPE html>
<html lang="en">
<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="一个小伙子的个人博客">
    <meta name="keyword" content="Jason的博客">
    <link rel="shortcut icon" href="/shmily-blog/img/favicon.ico">

    <title>
        
        Docker学习笔记 - Jason的博客 | Jason&#39;s Blog
        
    </title>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/shmily-blog/css/aircloud.css">
    <link rel="stylesheet" href="/shmily-blog/css/gitment.css">
    <!--<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">-->
    <link href="//at.alicdn.com/t/font_620856_pl6z7sid89qkt9.css" rel="stylesheet" type="text/css">
    <!-- ga & ba script hoook -->
    <script></script>
</head>

<body>

<div class="site-nav-toggle" id="site-nav-toggle">
    <button>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
    </button>
</div>

<div class="index-about">
    <i> Jason </i>
</div>

<div class="index-container">
    
    <div class="index-left">
        
<div class="nav" id="nav">
    <div class="avatar-name">
        <div class="avatar ">
            <img src="/shmily-blog/img/avatar.jpg" />
        </div>
        <div class="name">
            <i>Jason</i>
        </div>
    </div>
    <div class="contents" id="nav-content">
        <ul>
            <li >
                <a href="/shmily-blog/">
                    <i class="iconfont icon-shouye1"></i>
                    <span>主页</span>
                </a>
            </li>
            <li >
                <a href="/shmily-blog/tags">
                    <i class="iconfont icon-biaoqian1"></i>
                    <span>标签</span>
                </a>
            </li>
            <li >
                <a href="/shmily-blog/archive">
                    <i class="iconfont icon-guidang2"></i>
                    <span>存档</span>
                </a>
            </li>
            <li >
                <a href="/shmily-blog/about/">
                    <i class="iconfont icon-guanyu2"></i>
                    <span>关于</span>
                </a>
            </li>
            
            <li>
                <a id="search">
                    <i class="iconfont icon-sousuo1"></i>
                    <span>搜索</span>
                </a>
            </li>
            
        </ul>
    </div>
    
        <div id="toc" class="toc-article">
    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#前言"><span class="toc-text">前言</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#认识docker"><span class="toc-text">认识docker</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#docker能解决什么问题"><span class="toc-text">docker能解决什么问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#基本概念"><span class="toc-text">基本概念</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#安装"><span class="toc-text">安装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#入门"><span class="toc-text">入门</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#容器"><span class="toc-text">容器</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#创建Dockerfile文件"><span class="toc-text">创建Dockerfile文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#构建镜像"><span class="toc-text">构建镜像</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#运行容器"><span class="toc-text">运行容器</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#服务Swarms"><span class="toc-text">服务Swarms</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#高级篇"><span class="toc-text">高级篇</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#容器数据"><span class="toc-text">容器数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#容器网络"><span class="toc-text">容器网络</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#使用容器-你就不应该再去管理烦人的IP"><span class="toc-text">使用容器,你就不应该再去管理烦人的IP</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#在Docker中建立-自定义-桥网络"><span class="toc-text">在Docker中建立 自定义 桥网络</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#k8s"><span class="toc-text">k8s</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#其他"><span class="toc-text">其他</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#设置容器时区"><span class="toc-text">设置容器时区</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#结语"><span class="toc-text">结语</span></a></li></ol>
</div>
    
</div>


<div class="search-field" id="search-field">
    <div class="search-container">
        <div class="search-input">
            <span id="esc-search"> <i class="icon-fanhui iconfont"></i></span>
            <input id="search-input"/>
            <span id="begin-search">搜索</span>
        </div>
        <div class="search-result-container" id="search-result-container">

        </div>
    </div>
</div>

        <div class="index-about-mobile">
            <i> Jason </i>
        </div>
    </div>
    
    <div class="index-middle">
        <!-- Main Content -->
        


<div class="post-container">
    <div class="post-title">
        Docker学习笔记
    </div>

    <div class="post-meta">
        <span class="attr">发布于：<span>2019-05-16 11:29:14</span></span>
        
        <span class="attr">标签：/
        
        <a class="tag" href="/shmily-blog/tags/#容器" title="容器">容器</a>
        <span>/</span>
        
        
        </span>
        <span class="attr">访问：<span id="busuanzi_value_page_pv"></span>
</span>
</span>
    </div>
    <div class="post-content ">
        <p>我是一个java程序猿, 当前已经转为nodejs开发, 因为工作需要接触docker到目前为止已经有一年多的时间了, 一下是我学习和使用docker的一些总结.</p>
<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><h3 id="认识docker"><a href="#认识docker" class="headerlink" title="认识docker"></a>认识docker</h3><p>Docker是一个容器平台, 可以说他是一个虚拟机平台, 但是它又比虚拟机强大. Docker是开发人员和系统管理员使用容器开发，部署和运行应用程序的平台。<br>使用Linux容器部署应用程序称为容器化。容器不是新的，但它们用于轻松部署应用程序。</p>
<h3 id="docker能解决什么问题"><a href="#docker能解决什么问题" class="headerlink" title="docker能解决什么问题"></a>docker能解决什么问题</h3><ol>
<li>生产开发环境不一致的问题</li>
</ol>
<h3 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h3><ol>
<li>容器</li>
<li>镜像</li>
<li>仓库</li>
</ol>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p><a href="https://docs.docker.com/install/" target="_blank" rel="noopener">参考这里</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看docker版本</span></span><br><span class="line">docker --version</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看docker信息</span></span><br><span class="line">docker info</span><br><span class="line"></span><br><span class="line"><span class="comment"># 测试docker是否安装成功</span></span><br><span class="line">docker run hello-world</span><br><span class="line"></span><br><span class="line">Unable to find image <span class="string">'hello-world:latest'</span> locally</span><br><span class="line">latest: Pulling from library/hello-world</span><br><span class="line">ca4f61b1923c: Pull complete</span><br><span class="line">Digest: sha256:ca0eeb6fb05351dfc8759c20733c91def84cb8007aa89a5bf606bc8b315b9fc7</span><br><span class="line">Status: Downloaded newer image <span class="keyword">for</span> hello-world:latest</span><br><span class="line"></span><br><span class="line">Hello from Docker!</span><br><span class="line">This message shows that your installation appears to be working correctly.</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<h2 id="入门"><a href="#入门" class="headerlink" title="入门"></a>入门</h2><p>前提条件: 安装好Docker</p>
<h3 id="容器"><a href="#容器" class="headerlink" title="容器"></a>容器</h3><h4 id="创建Dockerfile文件"><a href="#创建Dockerfile文件" class="headerlink" title="创建Dockerfile文件"></a>创建Dockerfile文件</h4><p>在项目根目录下创建一个Dockerfile文件, 如:</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 将官方 node:9.3.0-alpine 运行时用作父镜像</span></span><br><span class="line"><span class="keyword">FROM</span> node:<span class="number">9.3</span>.<span class="number">0</span>-alpine</span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> mkdir -p /app</span></span><br><span class="line"><span class="comment"># 将工作目录设置为 /app</span></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="bash"> /app</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 将当前目录内容复制到位于 /app 中的容器中</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> . /app/temp</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> cp /app/temp/package.json /app/package.json &amp;&amp;\</span></span><br><span class="line"><span class="bash">    npm install --registry=https://registry.npm.taobao.org &amp;&amp;\</span></span><br><span class="line"><span class="bash">    cp -r /app/temp/pages /app/pages &amp;&amp;\</span></span><br><span class="line"><span class="bash">    cp -r /app/temp/components /app/components &amp;&amp;\</span></span><br><span class="line"><span class="bash">    cp -r /app/temp/next.config.js /app/next.config.js &amp;&amp;\</span></span><br><span class="line"><span class="bash">    rm -rf /app/temp</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 在容器启动时运行</span></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> [<span class="string">"npm"</span>, <span class="string">"start"</span>]</span></span><br></pre></td></tr></table></figure>
<p>有关Dockerfile的命令可以参考这里<a href="https://docs.docker.com/develop/develop-images/dockerfile_best-practices/" target="_blank" rel="noopener">编写Dockerfile的最佳实践</a></p>
<h4 id="构建镜像"><a href="#构建镜像" class="headerlink" title="构建镜像"></a>构建镜像</h4><p>命令:</p>
<p><code>docker build -t &lt;image-name&gt; .</code>;</p>
<blockquote>
<p>-t image-name 是给镜像添加名称<br>. 代表当前根目录<br>可选参数 -f Dockerfile-name 指定Dockerfile文件, 默认是 Dockerfile, 当我们有如: MYSQL.Dockerfile 则可以使用该参数指定 例: <code>docker build -t imagename . -f MySQL.Dockerfile</code></p>
</blockquote>
<h4 id="运行容器"><a href="#运行容器" class="headerlink" title="运行容器"></a>运行容器</h4><p>命令:</p>
<p><code>docker run -d -p 3000:3000 --name &lt;容器名称&gt; &lt;镜像hashid/镜像名称&gt;</code></p>
<ol>
<li>-d 参数指定容器在后台运行</li>
<li>-p 指定容器端口映射, 主机端口:容器端口, 容器端口指容器内部服务对外暴露的端口,如果tomcat对外提供服务的端口为8080</li>
<li>–name 参数设置容器名称</li>
<li>最后接对应的镜像 hashid 或者 镜像名称:tag</li>
</ol>
<p>其他常用参数:</p>
<ol>
<li>–network 指定容器运行的网络环境</li>
<li>-v 配置容器数据卷, 更多信息参考 高级篇[容器数据]</li>
<li>–rm 该命令常常与 -v 一起使用, 在删除/停止容器的时候同事清除数据卷映射关系</li>
<li>–link 链接到其他容器, 新版本推荐使用 –network 指定容器网络环境即可</li>
</ol>
<p>容器镜像操作:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">docker ps; <span class="comment">#查看当前运行的容器</span></span><br><span class="line">docker ps -a; <span class="comment"># 查看所有的容器</span></span><br><span class="line">docker logs &lt;镜像hashid/镜像名称&gt; <span class="comment"># 查看指定容器的日记</span></span><br><span class="line">docker start &lt;容器hashid/容器名称&gt; <span class="comment"># 启动容器</span></span><br><span class="line">docker stop &lt;容器hashid/容器名称&gt; <span class="comment"># 停止容器</span></span><br><span class="line">docker stop -f &lt;镜像hashid/镜像名称&gt; <span class="comment"># 停止容器, 同时删除容器</span></span><br><span class="line">docker rm &lt;容器hashid/容器名称&gt;... <span class="comment"># 删除容器, 可以同时指定多个 &lt;容器hashid/容器名称&gt;</span></span><br><span class="line">docker rmi &lt;镜像hashid/镜像名称&gt; <span class="comment"># 删除镜像, 必须注意的是, 先删除容器才能删除镜像</span></span><br></pre></td></tr></table></figure>
<p>推送镜像到仓库</p>
<ol>
<li>登陆docker仓库 <code>docker login ...</code></li>
<li>给镜像打标签 <code>docker tag [本地镜像名称]:[版本号] [存储库名称]:[版本号]</code></li>
<li>推送到镜像仓库 <code>docker push [账号名]/[存储库名称]:[版本号]</code></li>
<li>尝试拉取镜像 <code>docker pull [账号名]/[存储库名称]:[版本号]</code></li>
</ol>
<p>案例</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 登陆dockerhub</span></span><br><span class="line">docker login</span><br><span class="line"></span><br><span class="line"><span class="comment"># 构建镜像</span></span><br><span class="line">docker build -t arm64v8/myblog:latest .</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将本地镜像打标签</span></span><br><span class="line">docker tag arm64v8/myblog:latest jiangzwyz/myblog:latest</span><br><span class="line"></span><br><span class="line"><span class="comment"># 推送到镜像仓库</span></span><br><span class="line">docker push jiangzwyz/myblog:latest</span><br></pre></td></tr></table></figure>
<h3 id="服务Swarms"><a href="#服务Swarms" class="headerlink" title="服务Swarms"></a>服务Swarms</h3><p>待补充</p>
<h2 id="高级篇"><a href="#高级篇" class="headerlink" title="高级篇"></a>高级篇</h2><h3 id="容器数据"><a href="#容器数据" class="headerlink" title="容器数据"></a>容器数据</h3><p>深入了解docker的都会知道docker的方便,但是也会明白docker的缺点,就是容器在被销毁时,其内部的数据将会全部丢失,那么这里我们就将解决这个问题</p>
<p>最常见的案例就是数据库了, 这里我们以配置 mysql容器为例, 示范如何使用<strong>数据卷</strong>将容器的数据保存到主机上.</p>
<p>Dockerfile文件:</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 拉取 mysql:5.7 官方镜像</span></span><br><span class="line"><span class="keyword">FROM</span> mysql:<span class="number">5.7</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置时区 Shanghai</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> cp /usr/share/zoneinfo/PRC /etc/localtime</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ENV 设置 镜像环境变量 mysql 镜像参考官方说明,可以在此配置账户密码</span></span><br><span class="line"><span class="keyword">ENV</span> MYSQL_ROOT_PASSWORD=you_password</span><br><span class="line"><span class="keyword">ENV</span> MYSQL_USER=you_name</span><br><span class="line"><span class="keyword">ENV</span> MYSQL_PASSWORD=you_passowrd</span><br><span class="line"></span><br><span class="line"><span class="comment"># 这里我使用了自定义mysql的配置文件</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> ./mysql/mysql.cnf /etc/mysql/conf.d/mysql.cnf</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> ./mysql/mysqld.cnf /etc/mysql/mysql.conf.d/mysqld.cnf</span></span><br></pre></td></tr></table></figure>
<p><strong>重点</strong>在这里</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker build -t mysql . -f MYSQL.Dockerfile;</span><br><span class="line">docker run -d -p 3306:3306 --rm -v /mysql/db:/var/lib/mysql --name mysql mysql;</span><br></pre></td></tr></table></figure>
<p>从当前项目中构建mysql镜像, 然后运行容器时指定主机/mysql/db目录挂载到容器/var/lib/mysql目录(此目录是mysql数据库文件所在)</p>
<p>数据类的容器,官方都会说明其数据文件存放的位置, 当然我们也可以挂载网盘到容器中.</p>
<p><img src="/../img/docker_01.png" alt=" "></p>
<h3 id="容器网络"><a href="#容器网络" class="headerlink" title="容器网络"></a>容器网络</h3><h4 id="使用容器-你就不应该再去管理烦人的IP"><a href="#使用容器-你就不应该再去管理烦人的IP" class="headerlink" title="使用容器,你就不应该再去管理烦人的IP"></a>使用容器,你就不应该再去管理烦人的IP</h4><p>我们载部署项目的时候经常会遇到这个问题, 我们的项目需要连接mysql, 一般我们通过ip去连接*(localhost:3306、127.0.0.1:3306), 这样到还简单,如果我们的mysql IP是动态的, 怎么办? 你改的几次就会抓狂的. 所以我们需要使用到 容器网络  network</p>
<h4 id="在Docker中建立-自定义-桥网络"><a href="#在Docker中建立-自定义-桥网络" class="headerlink" title="在Docker中建立 自定义 桥网络"></a>在Docker中建立 自定义 桥网络</h4><ol>
<li>连接到默认bridge网络的容器可以通过IP地址相互通信。Docker不支持默认网桥上的自动服务发现。如果希望容器能够按容器名称解析IP地址，则应使用用户定义的网络。您可以使用旧版docker run –link选项将两个容器链接在一起，但在大多数情况下不建议这样做。</li>
<li>使用自定义 bridge网络 运行在其中的容器可以发现对方</li>
<li>要实现 容器间通讯，采用 自定义 桥网络 （容器必须在同一主机中）</li>
<li>network  桥网络，容器运行再 用户自定义桥网络 中，容器间可以通过 局域网访问（<strong>不适用于分布式主机</strong>），默认桥网络不支持这样</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看当前主机中网络列表</span></span><br><span class="line">$ docker network ls</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建 桥网络</span></span><br><span class="line">$ docker network create --driver bridge [network-name]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将容器运行在对应的 bridge网络 中，使用 --network=[network-name]</span></span><br><span class="line">$ docker run -d -p 80:80 -p 443:443 --network=[network-name] --name mynginx [container-images-id]</span><br><span class="line">$ docker run -d -p 80:80 -p 443:443 --rm -v ~/../workspace/myimages/images:/app/images &amp;&amp;\</span><br><span class="line">  --network=[network-name] &amp; --name=1.2.3.4 [container-images-id]</span><br></pre></td></tr></table></figure>
<p>在同一个 network 网络中的两个容器之间通信可以直接使用 容器名称:端口 的方式去访问,<br>如: mysql:3306</p>
<h3 id="k8s"><a href="#k8s" class="headerlink" title="k8s"></a>k8s</h3><p>容器编排</p>
<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><h3 id="设置容器时区"><a href="#设置容器时区" class="headerlink" title="设置容器时区"></a>设置容器时区</h3><p>时区问题一直都是我们需要解决的问题, 容器同样避免不了这个问题.</p>
<p>在linux中, 我们可以将本地时间文件拷贝到/etc/localtime即可设置容器时间</p>
<p>linux的时区设置文件在 /usr/share/zoneinfo/Asia</p>
<p>我们将设置系统时间为 上海 例:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在Dockerfile中添加:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># linux版本: node:9.3.0-alpine</span></span><br><span class="line">RUN apk add --no-cache tzdata &amp;&amp; \</span><br><span class="line">    cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime &amp;&amp; <span class="built_in">echo</span> <span class="string">"Asia/Shanghai"</span> &gt; /etc/timezone &amp;&amp; \</span><br><span class="line">    apk del tzdata</span><br><span class="line"></span><br><span class="line"><span class="comment"># 镜像 mysql:5.7</span></span><br><span class="line">RUN cp /usr/share/zoneinfo/PRC /etc/localtime</span><br></pre></td></tr></table></figure>
<blockquote>
<p>上海时区/usr/share/zoneinfo/Asia/Shanghai实际上是链接到/usr/share/zoneinfo/PRC时区, 所以在第二个中我们的做法也是可取的.</p>
</blockquote>
<h2 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h2><p>官方文档是最好的学习资料</p>

        
        <br />
        <div id="comment-container">
        </div>
        <div id="disqus_thread"></div>

        <div id="lv-container">
        </div>

    </div>
</div>

    </div>
</div>


<footer class="footer">
    <ul class="list-inline text-center">
        
        
        <li>
            <a target="_blank" href="https://www.zhihu.com/people/jzwyz">
                            <span class="fa-stack fa-lg">
                                 <i class="iconfont icon-zhihu"></i>
                            </span>
            </a>
        </li>
        

        

        

        
        <li>
            <a target="_blank"  href="https://github.com/jzwyz">
                            <span class="fa-stack fa-lg">
                                <i class="iconfont icon-github"></i>
                            </span>
            </a>
        </li>
        

        

    </ul>
    
    <p>
        <span>/</span>
        
        <span><a href="https://wangchujiang.com/linux-command/">Linux 命令搜索</a></span>
        <span>/</span>
        
        <span><a href="https://msdn.itellyou.cn/">MSDN</a></span>
        <span>/</span>
        
    </p>
    
    <p>
        <span id="busuanzi_container_site_pv">
            <span id="busuanzi_value_site_pv"></span>PV
        </span>
        <span id="busuanzi_container_site_uv">
            <span id="busuanzi_value_site_uv"></span>UV
        </span>
        Created By <a href="https://hexo.io/">Hexo</a>  Theme <a href="https://github.com/aircloud/hexo-theme-aircloud">AirCloud</a></p>
</footer>




</body>

<script>
    // We expose some of the variables needed by the front end
    window.hexo_search_path = "search.json"
    window.hexo_root = "/shmily-blog/"
    window.isPost = true
</script>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
<script src="/shmily-blog/js/index.js"></script>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




    <script type="text/javascript">
       (function() {
           if (typeof LivereTower === 'function') { return; }

           var j, d = document.getElementById('lv-container');

           d.setAttribute('data-id','city');
           d.setAttribute('data-uid' , 'MTAyMC80Mzg5My8yMDQyOA==');

           j = document.createElement('script');
           j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
           j.async = true;

           d.appendChild(j);
       })();
    </script>
    <noscript>为正常使用来必力评论功能请激活JavaScript</noscript>
    </div>

</html>
