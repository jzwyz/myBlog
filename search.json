[{"title":"äº‘å‡½æ•°ï¼ˆserverlessï¼‰","url":"/2020/10/15/serverless/","content":"\nServerlessï¼Œå®ƒæ˜¯äº‘è®¡ç®—å‘å±•è¿‡ç¨‹ä¸­å‡ºç°çš„ä¸€ç§è®¡ç®—èµ„æºçš„æŠ½è±¡ï¼Œä¾èµ–ç¬¬ä¸‰æ–¹æœåŠ¡ï¼Œå¼€å‘è€…å¯ä»¥æ›´åŠ ä¸“æ³¨çš„å¼€å‘è‡ªå·±çš„ä¸šåŠ¡ä»£ç ï¼Œè€Œæ— éœ€å…³å¿ƒåº•å±‚èµ„æºçš„åˆ†é…ã€æ‰©å®¹å’Œéƒ¨ç½²ã€‚\n\nç‰¹å¾\n\n1. å¼€å‘è€…åªéœ€è¦ä¸“æ³¨äºä¸šåŠ¡ï¼Œæ— éœ€å…³å¿ƒåº•å±‚èµ„æºçš„åˆ†é…ã€æ‰©å®¹å’Œéƒ¨ç½²\n2. æŒ‰éœ€ä½¿ç”¨å’Œæ”¶è´¹\n3. è‡ªåŠ¨æ‰©ç¼©å®¹\n\n[å‰ç«¯ç¦éŸ³ï¼šServerless å’Œ SSR çš„å¤©ä½œä¹‹åˆ - ä»¥è…¾è®¯äº‘SCFä¸ºä¾‹](https://serverlesscloud.cn/best-practice/2020-06-10-ssr-yuga)\n\n[BaaSã€FaaSã€Serverlesséƒ½æ˜¯ä»€ä¹ˆé¦…å„¿ï¼Ÿ](https://www.sohu.com/a/198253530_115128)\n\n[Midway Serverless ä½¿ç”¨æ–‡æ¡£ - é˜¿é‡Œå¼€æº](https://www.yuque.com/midwayjs/faas)\n\n[ç²¾è¯»ã€ŠServerless ç»™å‰ç«¯å¸¦æ¥äº†ä»€ä¹ˆã€‹](https://zhuanlan.zhihu.com/p/58877583)\n\n# é—®é¢˜\n\nä½¿ç”¨macç³»ç»Ÿæ—¶å‡ºç°çš„ä¸€ä¸ªé—®é¢˜\n\n![ ](./WX20201015-145716@2x.png)\n\næŒ‰ç…§å…¶æä¾›çš„[æ–¹æ³•](https://github.com/meteor/meteor/issues/8057#issuecomment-261011063)æˆåŠŸè§£å†³\n\n```sh\n$ echo kern.maxfiles=65536 | sudo tee -a /etc/sysctl.conf\n$ echo kern.maxfilesperproc=65536 | sudo tee -a /etc/sysctl.conf\n$ sudo sysctl -w kern.maxfiles=65536\n$ sudo sysctl -w kern.maxfilesperproc=65536\n$ ulimit -n 65536\n```\n\n> ä»…é€‚ç”¨äº `Mac` ç³»ç»Ÿ\n","tags":["serverless"]},{"title":"é»‘è‹¹æœæŠ˜è…¾è®°","url":"/2020/08/26/hackintosh/","content":"\n## å‡†å¤‡å·¥ä½œ\n\næˆ‘ä»¬åœ¨å¼€å§‹å‰éœ€è¦çŸ¥é“è¿™å‡ ä¸ªç½‘ç«™, å› ä¸ºæ‰€æœ‰èµ„æºéƒ½æ¥è‡ªå…¶ä¸­\n\n[é»‘æœå°å…µçš„éƒ¨è½é˜](https://blog.daliansky.net/)\n\n[è¿œæ™¯è®ºå›](http://bbs.pcbeta.com/)\n\n[ä½¿ç”¨OpenCoreå¼•å¯¼é»‘è‹¹æœ](https://blog.xjn819.com/?p=543)\n\n## æˆ‘çš„ç”µè„‘é…ç½®\n\nç±»ç›®|å‹å·\n:------|:---------------------------------------------------------------------\nå¤„ç†å™¨|Intel i7-10700\nä¸»æ¿|Gigabyte B460M AORUS PRO M-ATX\næ˜¾å¡|è“å®çŸ³ RX5600XT 6G\nå†…å­˜|åé“¨ï¼ˆTeamï¼‰DDR4 3200 16GBï¼ˆ8GBÃ—2ï¼‰ç«ç¥ç³»åˆ—\nç¡¬ç›˜|é‡‘å£«é¡¿(Kingston) 1TB SSDå›ºæ€ç¡¬ç›˜ M.2æ¥å£(NVMeåè®®) A2000ç³»åˆ—\næ— çº¿|åšé€šBCM943602CS\næ•£çƒ­|ç„å†°400åŒåˆƒ\nç”µæº|Tt 600W Toughpower GX1 RGB (80PLUSé‡‘ç‰Œ/æ—¥ç³»ä¸»ç”µå®¹/é™éŸ³é£æ‰‡)\næœºç®±|Tt å¯èˆªè€…S3+é»‘è‰²\næ˜¾ç¤ºå™¨|ä¼˜æ´¾4K 23.6è‹±å¯¸IPS VX2478-4K\n\n## åˆ¶ä½œMacOSç³»ç»Ÿå®‰è£…ç›˜(Uç›˜)\n\nç³»ç»Ÿé•œåƒé‡‡ç”¨[å¾®ä¿¡é¦–å‘ã€‘macOS Catalina 10.15.6 19G2021 æ­£å¼ç‰ˆ Clover 5120/OC/PEä¸‰åˆ†åŒºæ”¯æŒIntelåŠAMDåŒå¹³å°åŸç‰ˆé•œåƒ](https://blog.daliansky.net/WeChat-First-macOS-Catalina-10.15.6-19G73-official-version-Clover-5119-OC-WEPE-supports-both-INTEL-and-AMD-original-images.html)\n\n### ä¸‹è½½é•œåƒ\n\nè¯·å‰å¾€[é»‘æœå°å…µçš„éƒ¨è½é˜](https://blog.daliansky.net/)æˆ–è€…å…³æ³¨`é»‘æœå°å…µçš„éƒ¨è½é˜`å¾®ä¿¡å…¬ä¼—å·ä¸‹è½½é•œåƒ\n\n> å¯é€‰: æ ¡éªŒMD5å€¼ `4a32cf1d5c37809dfb87f33eda5d50ed`\n\n### åˆ¶ä½œé•œåƒ\n\nä¸‹è½½[etcher](https://etcher.io) -> æ‰“å¼€é•œåƒ -> é€‰æ‹©Uç›˜ -> ç‚¹å‡»Flashå³å¯.\n\n> Windows10éœ€è¦ç®¡ç†å‘˜æƒé™\n> åˆ¶ä½œé•œåƒéœ€è¦ä¸€ç‚¹æ—¶é—´, è¯·è€å¿ƒç­‰å¾…\n\n## å®‰è£…å‰çš„å‡†å¤‡\n\n### BOISåŸºæœ¬è®¾ç½®\n\nå®é™…ä¸Šä½¿ç”¨æŠ€å˜‰ä¸»æ¿,åªéœ€è¦å¼€å¯`VT-X`ã€ç¦ç”¨`VT-D`å³å¯\n\nç¦ç”¨å¦‚ä¸‹ï¼š\n\nè‹±æ–‡|ä¸­æ–‡\n:--------|:------------\nFast Boot|å¿«é€Ÿå¯åŠ¨\nCFG Lock (MSR 0xE2 write protection)|CFG é” (MSR 0xE2 å†™å…¥ä¿æŠ¤)\nVT-d|VT-d\nCSM|å…¼å®¹æ€§æ”¯æŒæ¨¡å—\n\nå¯ç”¨å¦‚ä¸‹ï¼š\n\nè‹±æ–‡|ä¸­æ–‡\n:--------|:------------\nVT-x|VT-x\nAbove 4G decoding|å¤§äº 4G åœ°å€ç©ºé—´è§£ç \nHyper Threading|å¤„ç†å™¨è¶…çº¿ç¨‹\nExecute Disable Bit|æ‰§è¡Œç¦æ­¢ä½\nEHCI/XHCI Hand-off|æ¥æ‰‹ EHCI/XHCI æ§åˆ¶\nOS type: other types|æ“ä½œç³»ç»Ÿç±»å‹: å…¶ä»–\n\n### æ‹·è´é€‚åˆè‡ªå·±çš„æ–‡ä»¶\n\nå¼•å¯¼Uç›˜åˆ¶ä½œå¥½äº†ä¹‹å, æˆ‘ä»¬è¿˜éœ€è¦æ ¹æ®è‡ªå·±ç”µè„‘çš„ç¡¬ä»¶æ›¿æ¢`EFI`ä¸‹çš„`ACPI`ã€`Drivers`ã€`Kexts`\n\n1. ACPIç³»ç»Ÿè¡¥ä¸æ–‡ä»¶\n2. Driverså¼•å¯¼ç³»ç»Ÿçš„é©±åŠ¨æ–‡ä»¶\n3. Kextså®‰è£…ç³»ç»Ÿçš„\n\næ‰“å¼€EFIâ€”Kextsï¼Œæˆ‘ä»¬æŠŠå¸¸ç”¨çš„ä¸€äº›kextså…ˆæ”¾è¿›å»ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ä½ éœ€è¦æ”¾å¦‚ä¸‹Kexts:\n\nåç§°|ä½œç”¨\n:---------|:--------------\n*Lilu.kext|Acidantheraé©±åŠ¨å…¨å®¶æ¡¶çš„åº•å±‚ä¾èµ–/ä¸‹è½½åœ°å€\n*Applealc.kext|å£°å¡é©±åŠ¨/ä¸‹è½½åœ°å€\n*VirtualSMC.kext|ä¼ æ„Ÿå™¨é©±åŠ¨ä¾èµ– /ä¸‹è½½åœ°å€\n*SMCProcessor.kext|CPUæ ¸ä¼ æ„Ÿå™¨/åŒä¸Š\n*SMCSuperIO.kext|IOä¼ æ„Ÿå™¨/åŒä¸Š\n*WhateverGreen.kext|æ ¸æ˜¾&æ˜¾å¡é©±åŠ¨/ä¸‹è½½åœ°å€\n*IntelMausi.kext|Intelç±»åƒå…†ç½‘å¡é©±åŠ¨/ä¸‹è½½åœ°å€\n*Usbinjectall.kext|USBé©±åŠ¨ ï¼ˆä½ ä¹Ÿå¯ä»¥å®šåˆ¶è‡ªå·±çš„USBè¡¥ä¸ï¼‰/ä¸‹è½½åœ°å€\n*NVMeFix.kext|ä¸ºNVMEç¡¬ç›˜å¢åŠ ASPTå±æ€§æ¥ä¿è¯èŠ‚ç”µï¼Œè™½ç„¶å¯¹å°å¼æœºæ²¡å•¥ç”¨ï¼Œä½†æ˜¯å®˜æ–¹æ¨èæ‰€æœ‰NVMEç”¨æˆ·éƒ½ä½¿ç”¨æ­¤è¡¥ä¸/ä¸‹è½½åœ°å€\n\n### ç¼–è¾‘é…ç½®`config.plist`\n\néœ€è¦æ ¹æ®è‡ªå·±çš„é…ç½®ç¼–è¾‘ä¿®æ”¹`config.plist`\n\n## EFIå¼•å¯¼é¡¹é…ç½®\n\nè¿™é‡Œéœ€è¦ç”¨åˆ°`BOOTICE`å·¥å…·\n\n## æˆ‘é‡åˆ°çš„é—®é¢˜\n\n- é€‰æ‹©å®Œä¹‹åè·‘æ—¥å¿—, å¾ªç¯åˆ·æ—¥å¿—, å±å¹•ä¸­å‡ºç° ğŸš« ç¬¦å·\n\nè¿™ä¸ªé—®é¢˜åé¢å‘ç°æ˜¯Uç›˜æ’åœ¨3.0æ¥å£çš„é—®é¢˜, æ‰€ä»¥**åŠ¡å¿…**ä½¿ç”¨2.0USBæ¥å£å®‰è£…ç³»ç»Ÿ\n\n- é€‰æ‹©å®Œä¹‹å, è·‘å®Œæ—¥å¿—, é‡å¯å°±é»‘å±äº†\n\nè¿™ä¸ªé—®é¢˜æ˜¯ç”±äº`config.plist`ä¸­å…³äºæ˜¾å¡é…ç½®çš„é—®é¢˜å¯¼è‡´çš„. å¯ä»¥å‚è€ƒä»¥ä¸‹é“¾æ¥\n\n[è§å›¾é…ç½®](https://github.com/xiaoyaowx/Hackintosh-Z490-ASRock-Steel-Legend-Intel-10700)\n\n![ ](./1.png)\n\nåŒæ—¶æ·»åŠ `SSDT-RX5600XT.aml`åˆ°`/EFI/ACPI/`ä¸‹, å¹¶åœ¨`config.plist`ä¸­é…ç½®å¥½\n\n- åœ¨è¿›å…¥MacOSå®‰è£…ç•Œé¢å, é€‰æ‹©`ç£ç›˜å·¥å…·`æ ¼å¼åŒ–éœ€è¦å®‰è£…MacOSçš„ç›˜ç¬¦æ—¶, æç¤ºæ— æ³•å®Œæˆè¯¥æ“ä½œ\n\nè¿™ä¸ªé—®é¢˜æ˜¯ç”±äºç³»ç»Ÿ`ESP`åˆ†åŒºè¿‡å°çš„é—®é¢˜å¯¼è‡´çš„, æˆ‘ä»¬è¿›å…¥win peç³»ç»Ÿä¸­,é€šè¿‡`d`æ·»åŠ `ESP`åˆ†åŒºåˆ†é…1Gç©ºé—´, å†é‡æ–°è¿›å…¥å®‰è£…å·¥å…·æ ¼å¼åŒ–ç£ç›˜å³å¯è§£å†³é—®é¢˜\n\n## ç›®å‰ç³»ç»Ÿå‡ºç°çš„é—®é¢˜\n\n- æ— æ³•ç¡çœ ,\n","tags":["é»‘è‹¹æœ"]},{"title":"äº†è§£javascriptçš„æ‰§è¡Œæœºåˆ¶","url":"/2020/08/24/javascript-event-queue/","content":"\n[å‚è€ƒã€Šè¿™ä¸€æ¬¡ï¼Œå½»åº•å¼„æ‡‚ JavaScript æ‰§è¡Œæœºåˆ¶ - æ˜é‡‘ã€‹](https://juejin.im/post/6844903512845860872#heading-0)\n[å‚è€ƒã€Šä¸€æ¬¡å¼„æ‡‚Event Loopï¼ˆå½»åº•è§£å†³æ­¤ç±»é¢è¯•é—®é¢˜ï¼‰- æ˜é‡‘ã€‹](https://juejin.im/post/6844903764202094606)\n[å‚è€ƒã€Š2020å‰ç«¯é¢è¯•å¿…ä¼šçŸ¥è¯†ç‚¹ - ç°è“å®‡å¢¨çš„æ–‡ç«  - çŸ¥ä¹ã€‹](https://zhuanlan.zhihu.com/p/139983258)\n\n## å…³äºJavaScriptçš„è¯´æ˜\n\nJavaScriptæ˜¯ä¸€é—¨**å•çº¿ç¨‹**ç¼–ç¨‹è¯­è¨€, ä¸€åˆ‡çš„å…³äºJavaScriptçš„å¤šçº¿ç¨‹éƒ½æ˜¯å•çº¿ç¨‹æ¨¡æ‹Ÿå‡ºæ¥çš„\n\nä¸ç®¡æ˜¯ä»€ä¹ˆæ–°æ¡†æ¶æ–°è¯­æ³•ç³–å®ç°çš„æ‰€è°“å¼‚æ­¥, å…¶å®éƒ½æ˜¯ç”¨åŒæ­¥çš„æ–¹æ³•å»æ¨¡æ‹Ÿçš„\n\n## JavaScriptçš„æ‰§è¡Œæœºåˆ¶\n\nJavaScriptçš„æ‰§è¡Œæœºåˆ¶: **äº‹ä»¶å¾ªç¯(Event Loop)**\n\näº‹ä»¶å¾ªç¯æ˜¯jså®ç°å¼‚æ­¥çš„ä¸€ç§æ–¹æ³•ï¼Œä¹Ÿæ˜¯jsçš„æ‰§è¡Œæœºåˆ¶ã€‚\n\næ³¨æ„åŒºåˆ†**æ‰§è¡Œ**å’Œ**è¿è¡Œ**\n\n## å¹¿ä¹‰çš„åŒæ­¥ä»»åŠ¡å’Œå¼‚æ­¥ä»»åŠ¡\n\n1. åŒæ­¥ä»»åŠ¡\n2. å¼‚æ­¥ä»»åŠ¡\n\n![ ](./1.png)\n\nç®€å•çš„æ–‡å­—æè¿°å›¾ç‰‡ä¸­çš„å†…å®¹:\n\n- åŒæ­¥å’Œå¼‚æ­¥ä»»åŠ¡åˆ†åˆ«è¿›å…¥ä¸åŒçš„æ‰§è¡Œ\"åœºæ‰€\"ï¼ŒåŒæ­¥çš„è¿›å…¥ä¸»çº¿ç¨‹ï¼Œå¼‚æ­¥çš„è¿›å…¥**Event Table**å¹¶æ³¨å†Œå‡½æ•°ã€‚\n- å½“æŒ‡å®šçš„äº‹æƒ…å®Œæˆæ—¶ï¼ŒEvent Tableä¼šå°†è¿™ä¸ªå‡½æ•°ç§»å…¥**Event Queue**ã€‚\n- ä¸»çº¿ç¨‹å†…çš„ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ä¸ºç©ºï¼Œä¼šå»Event Queueè¯»å–å¯¹åº”çš„å‡½æ•°ï¼Œè¿›å…¥ä¸»çº¿ç¨‹æ‰§è¡Œã€‚\n- ä¸Šè¿°è¿‡ç¨‹ä¼šä¸æ–­é‡å¤ï¼Œä¹Ÿå°±æ˜¯å¸¸è¯´çš„**Event Loop(äº‹ä»¶å¾ªç¯)**ã€‚\n\n> jså¼•æ“å­˜åœ¨**monitoring process**è¿›ç¨‹ï¼Œä¼šæŒç»­ä¸æ–­çš„æ£€æŸ¥ä¸»çº¿ç¨‹æ‰§è¡Œæ ˆæ˜¯å¦ä¸ºç©ºï¼Œä¸€æ—¦ä¸ºç©ºï¼Œå°±ä¼šå»Event Queueé‚£é‡Œæ£€æŸ¥æ˜¯å¦æœ‰ç­‰å¾…è¢«è°ƒç”¨çš„å‡½æ•°\n\n### ç¤ºä¾‹\n\nå‚è€ƒä¸€ä¸‹ajaxçš„æ‰§è¡Œè¿‡ç¨‹\n\n```javascript\nlet data = [];\n$.ajax({\n    url:www.javascript.com,\n    data:data,\n    success:() => {\n        console.log('å‘é€æˆåŠŸ!');\n    }\n})\nconsole.log('ä»£ç æ‰§è¡Œç»“æŸ');\n```\n\n- ajaxè¿›å…¥Event Tableï¼Œæ³¨å†Œå›è°ƒå‡½æ•°successã€‚\n- æ‰§è¡Œconsole.log('ä»£ç æ‰§è¡Œç»“æŸ')ã€‚\n- ajaxäº‹ä»¶å®Œæˆï¼Œå›è°ƒå‡½æ•°successè¿›å…¥Event Queueã€‚\n- ä¸»çº¿ç¨‹ä»Event Queueè¯»å–å›è°ƒå‡½æ•°successå¹¶æ‰§è¡Œã€‚\n\n### å¸¸ç”¨ setTimeoutã€setInterval å‡½æ•°\n\n#### setTimeout\n\nå¹³æ—¶ç»å¸¸ä½¿ç”¨`setTimeout`å‡½æ•°å®šæ—¶æ‰§è¡Œä¸€äº›ä¸šåŠ¡\n\n```javascript\nsetTimeout(() => {\n    console.log('å»¶æ—¶3ç§’');\n},3000)\n```\n\néšç€`setTimeout`çš„è¶Šæ¥è¶Šå¤š, é—®é¢˜ä¹Ÿå°±æ¥äº†\n\n```javascript\nsetTimeout(() => {\n    console.log('å»¶æ—¶3ç§’');\n},3000);\nconsole.log('---> æ‰§è¡Œ:console');\n```\n\nè¾“å‡º\n\n```javascript\n// ---> æ‰§è¡Œ:console\n// å»¶è¿Ÿ3ç§’\n```\n\nè¿™ä¸ªç»“æœæ˜¯æ­£ç¡®çš„, ä½†æ˜¯æˆ‘ä»¬ç¨å¾®æ”¹ä¸€ä¸‹ä»£ç \n\n```javascript\nsetTimeout(() => {\n    task()\n},3000);\nsleep(100000); // è¿™é‡Œå‡è®¾æ‰§è¡Œä¸šåŠ¡ä»£ç è€—æ—¶æ¯”è¾ƒé•¿\n```\n\nè¿™ä¸ªæ—¶å€™æ‰§è¡Œ`task()`è¾“å‡ºæ—¶é—´å°±ä¸æ­¢å»¶è¿Ÿ3ç§’äº†,\n\n- `task()`è¿›å…¥Event Tableå¹¶æ³¨å†Œ,è®¡æ—¶å¼€å§‹ã€‚\n- æ‰§è¡Œ`sleep`å‡½æ•°ï¼Œå¾ˆæ…¢ï¼Œéå¸¸æ…¢ï¼Œè®¡æ—¶ä»åœ¨ç»§ç»­ã€‚\n- 3ç§’åˆ°äº†ï¼Œè®¡æ—¶äº‹ä»¶timeoutå®Œæˆï¼Œ`task()`è¿›å…¥Event Queueï¼Œä½†æ˜¯`sleep`ä¹Ÿå¤ªæ…¢äº†å§ï¼Œè¿˜æ²¡æ‰§è¡Œå®Œï¼Œåªå¥½ç­‰ç€ã€‚\n- `sleep`ç»ˆäºæ‰§è¡Œå®Œäº†ï¼Œ`task()`ç»ˆäºä»Event Queueè¿›å…¥äº†ä¸»çº¿ç¨‹æ‰§è¡Œã€‚\n\n`setTimeout`å‡½æ•°çš„å®šä¹‰æ˜¯, å‡½æ•°ç­‰å¾…å®šä¹‰çš„æ—¶é—´ä¹‹åæ‰è¿›å…¥Event Queue, åˆå› ä¸ºæ˜¯å•çº¿ç¨‹ä»»åŠ¡è¦ä¸€ä¸ªä¸€ä¸ªæ‰§è¡Œï¼Œå¦‚æœå‰é¢çš„ä»»åŠ¡éœ€è¦çš„æ—¶é—´å¤ªä¹…ï¼Œé‚£ä¹ˆåªèƒ½ç­‰ç€ï¼Œå¯¼è‡´çœŸæ­£çš„å»¶è¿Ÿæ—¶é—´è¿œè¿œå¤§äº3ç§’\n\n#### setInterval\n\n`setInterval`è·Ÿ`setTimeout`æ•ˆæœå·®ä¸å¤š, åŒºåˆ«æ˜¯`setInterval`ä¼šæ¯éš”æŒ‡å®šçš„æ—¶é—´å°†æ³¨å†Œçš„å‡½æ•°ç½®å…¥Event Queueï¼Œå¦‚æœå‰é¢çš„ä»»åŠ¡è€—æ—¶å¤ªä¹…ï¼Œé‚£ä¹ˆåŒæ ·éœ€è¦ç­‰å¾….\n\nå”¯ä¸€éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œå¯¹äºsetInterval(fn,ms)æ¥è¯´ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“ä¸æ˜¯æ¯è¿‡msç§’ä¼šæ‰§è¡Œä¸€æ¬¡fnï¼Œè€Œæ˜¯æ¯è¿‡msç§’ï¼Œä¼šæœ‰fnè¿›å…¥Event Queueã€‚**ä¸€æ—¦setIntervalçš„å›è°ƒå‡½æ•°fnæ‰§è¡Œæ—¶é—´è¶…è¿‡äº†å»¶è¿Ÿæ—¶é—´msï¼Œé‚£ä¹ˆå°±å®Œå…¨çœ‹ä¸å‡ºæ¥æœ‰æ—¶é—´é—´éš”äº†ã€‚**\n\n## ä»»åŠ¡è¿˜æœ‰æ›´ç²¾ç»†çš„å®šä¹‰ å®ä»»åŠ¡/å¾®ä»»åŠ¡\n\n1. macro-task(å®ä»»åŠ¡)ï¼šåŒ…æ‹¬æ•´ä½“ä»£ç scriptï¼ŒsetTimeoutï¼ŒsetInterval\n2. micro-task(å¾®ä»»åŠ¡)ï¼šPromiseï¼Œprocess.nextTick\n\n> ä¸åŒç±»å‹çš„ä»»åŠ¡ä¼šè¿›å…¥å¯¹åº”çš„Event Queueï¼Œæ¯”å¦‚setTimeoutå’ŒsetIntervalä¼šè¿›å…¥ç›¸åŒçš„Event Queueã€‚\n\né™¤äº†ä¼ ç»Ÿçš„å®šæ—¶å™¨`setInterval`å’Œ`setTimeout`å¤–, æˆ‘ä»¬è¿˜è¦äº†è§£çš„`Promise`å’Œ`process.nextTick`\n\n1. `Promise`å¯ä»¥å‚è€ƒ[é˜®ä¸€å³°è€å¸ˆçš„Promiseè®²è§£](https://es6.ruanyifeng.com/#docs/promise)\n2. `process.nextTick`ç±»ä¼¼node.jsç‰ˆçš„`setTimeout`\n\näº‹ä»¶å¾ªç¯çš„é¡ºåºï¼Œå†³å®šjsä»£ç çš„æ‰§è¡Œé¡ºåºã€‚è¿›å…¥æ•´ä½“ä»£ç (å®ä»»åŠ¡)åï¼Œå¼€å§‹ç¬¬ä¸€æ¬¡å¾ªç¯ã€‚æ¥ç€æ‰§è¡Œæ‰€æœ‰çš„å¾®ä»»åŠ¡ã€‚ç„¶åå†æ¬¡ä»å®ä»»åŠ¡å¼€å§‹ï¼Œæ‰¾åˆ°å…¶ä¸­ä¸€ä¸ªä»»åŠ¡é˜Ÿåˆ—æ‰§è¡Œå®Œæ¯•ï¼Œå†æ‰§è¡Œæ‰€æœ‰çš„å¾®ä»»åŠ¡ã€‚\n\nä¸¾ä¾‹:\n\n```javascript\nsetTimeout(function() {\n    console.log('setTimeout');\n})\n\nnew Promise(function(resolve) {\n    console.log('promise');\n}).then(function() {\n    console.log('then');\n})\n\nconsole.log('console');\n```\n\n- è¿™æ®µä»£ç ä½œä¸ºå®ä»»åŠ¡ï¼Œè¿›å…¥ä¸»çº¿ç¨‹ã€‚\n- å…ˆé‡åˆ°setTimeoutï¼Œé‚£ä¹ˆå°†å…¶å›è°ƒå‡½æ•°æ³¨å†Œååˆ†å‘åˆ°å®ä»»åŠ¡Event Queueã€‚(æ³¨å†Œè¿‡ç¨‹ä¸ä¸ŠåŒï¼Œä¸‹æ–‡ä¸å†æè¿°)\n- æ¥ä¸‹æ¥é‡åˆ°äº†Promiseï¼Œnew Promiseç«‹å³æ‰§è¡Œï¼Œthenå‡½æ•°åˆ†å‘åˆ°å¾®ä»»åŠ¡Event Queueã€‚\n- é‡åˆ°console.log()ï¼Œç«‹å³æ‰§è¡Œã€‚\n- å¥½å•¦ï¼Œæ•´ä½“ä»£ç scriptä½œä¸ºç¬¬ä¸€ä¸ªå®ä»»åŠ¡æ‰§è¡Œç»“æŸï¼Œçœ‹çœ‹æœ‰å“ªäº›å¾®ä»»åŠ¡ï¼Ÿæˆ‘ä»¬å‘ç°äº†thenåœ¨å¾®ä»»åŠ¡Event Queueé‡Œé¢ï¼Œæ‰§è¡Œã€‚\n- okï¼Œç¬¬ä¸€è½®äº‹ä»¶å¾ªç¯ç»“æŸäº†ï¼Œæˆ‘ä»¬å¼€å§‹ç¬¬äºŒè½®å¾ªç¯ï¼Œå½“ç„¶è¦ä»å®ä»»åŠ¡Event Queueå¼€å§‹ã€‚æˆ‘ä»¬å‘ç°äº†å®ä»»åŠ¡Event Queueä¸­setTimeoutå¯¹åº”çš„å›è°ƒå‡½æ•°ï¼Œç«‹å³æ‰§è¡Œã€‚\n- ç»“æŸã€‚\n\nå…³ç³»å›¾\n\n![ ](./2.png)\n\nä¸€æ®µè¾ƒå¤æ‚çš„javascriptä»£ç , åˆ†æä¸€ä¸‹å®ƒçš„è¾“å‡º\n\n```javascript\nconsole.log('1');\n\nsetTimeout(function() {\n    console.log('2');\n    process.nextTick(function() {\n        console.log('3');\n    })\n    new Promise(function(resolve) {\n        console.log('4');\n        resolve();\n    }).then(function() {\n        console.log('5')\n    })\n})\nprocess.nextTick(function() {\n    console.log('6');\n})\nnew Promise(function(resolve) {\n    console.log('7');\n    resolve();\n}).then(function() {\n    console.log('8')\n})\n\nsetTimeout(function() {\n    console.log('9');\n    process.nextTick(function() {\n        console.log('10');\n    })\n    new Promise(function(resolve) {\n        console.log('11');\n        resolve();\n    }).then(function() {\n        console.log('12')\n    })\n})\n```\n\nç¬¬ä¸€è½®äº‹ä»¶å¾ªç¯æµç¨‹åˆ†æå¦‚ä¸‹ï¼š\n\n1. æ•´ä½“scriptä½œä¸ºç¬¬ä¸€ä¸ªå®ä»»åŠ¡è¿›å…¥ä¸»çº¿ç¨‹ï¼Œé‡åˆ°console.logï¼Œè¾“å‡º1ã€‚\n2. é‡åˆ°setTimeoutï¼Œå…¶å›è°ƒå‡½æ•°è¢«åˆ†å‘åˆ°å®ä»»åŠ¡Event Queueä¸­ã€‚æˆ‘ä»¬æš‚ä¸”è®°ä¸ºsetTimeout1ã€‚\n3. é‡åˆ°process.nextTick()ï¼Œå…¶å›è°ƒå‡½æ•°è¢«åˆ†å‘åˆ°å¾®ä»»åŠ¡Event Queueä¸­ã€‚æˆ‘ä»¬è®°ä¸ºprocess1ã€‚\n4. é‡åˆ°Promiseï¼Œnew Promiseç›´æ¥æ‰§è¡Œï¼Œè¾“å‡º7ã€‚thenè¢«åˆ†å‘åˆ°å¾®ä»»åŠ¡Event Queueä¸­ã€‚æˆ‘ä»¬è®°ä¸ºthen1ã€‚\n5. åˆé‡åˆ°äº†setTimeoutï¼Œå…¶å›è°ƒå‡½æ•°è¢«åˆ†å‘åˆ°å®ä»»åŠ¡Event Queueä¸­ï¼Œæˆ‘ä»¬è®°ä¸ºsetTimeout2ã€‚\n\nå®ä»»åŠ¡Event Queue|å¾®ä»»åŠ¡Event Queue\n:---------:|:---------:\nsetTimeout1|process1\nsetTimeout2|then1\n\n> ä¸Šè¡¨æ˜¯ç¬¬ä¸€è½®äº‹ä»¶å¾ªç¯å®ä»»åŠ¡ç»“æŸæ—¶å„Event Queueçš„æƒ…å†µï¼Œæ­¤æ—¶å·²ç»è¾“å‡ºäº†1å’Œ7ã€‚\n\næˆ‘ä»¬å‘ç°äº†process1å’Œthen1ä¸¤ä¸ªå¾®ä»»åŠ¡ã€‚\n\n1. æ‰§è¡Œprocess1,è¾“å‡º6ã€‚\n2. æ‰§è¡Œthen1ï¼Œè¾“å‡º8ã€‚\n\nç¬¬ä¸€è½®äº‹ä»¶å¾ªç¯æ­£å¼ç»“æŸï¼Œè¿™ä¸€è½®çš„ç»“æœæ˜¯è¾“å‡º`1ï¼Œ7ï¼Œ6ï¼Œ8`ã€‚\n\nç¬¬äºŒè½®æ—¶é—´å¾ªç¯ä»setTimeout1å®ä»»åŠ¡å¼€å§‹: \n\n1. é¦–å…ˆè¾“å‡º2ã€‚æ¥ä¸‹æ¥é‡åˆ°äº†`process.nextTick()`ï¼ŒåŒæ ·å°†å…¶åˆ†å‘åˆ°å¾®ä»»åŠ¡Event Queueä¸­ï¼Œè®°ä¸ºprocess2ã€‚\n2. `new Promise`ç«‹å³æ‰§è¡Œè¾“å‡º4ï¼Œthenä¹Ÿåˆ†å‘åˆ°å¾®ä»»åŠ¡Event Queueä¸­ï¼Œè®°ä¸ºthen2ã€‚\n\nå®ä»»åŠ¡Event Queue|å¾®ä»»åŠ¡Event Queue\n:---------:|:---------:\nsetTimeout2|process2\n|then2\n\nç¬¬äºŒè½®äº‹ä»¶å¾ªç¯å®ä»»åŠ¡ç»“æŸï¼Œæˆ‘ä»¬å‘ç°æœ‰process2å’Œthen2ä¸¤ä¸ªå¾®ä»»åŠ¡å¯ä»¥æ‰§è¡Œã€‚\n\n1. è¾“å‡º3ã€‚\n2. è¾“å‡º5ã€‚\n\nç¬¬äºŒè½®äº‹ä»¶å¾ªç¯ç»“æŸï¼Œç¬¬äºŒè½®è¾“å‡º`2ï¼Œ4ï¼Œ3ï¼Œ5`ã€‚\n\nç¬¬ä¸‰è½®äº‹ä»¶å¾ªç¯å¼€å§‹ï¼Œæ­¤æ—¶åªå‰©setTimeout2äº†ï¼Œæ‰§è¡Œã€‚\n\n1. ç›´æ¥è¾“å‡º9ã€‚\n2. å°†process.nextTick()åˆ†å‘åˆ°å¾®ä»»åŠ¡Event Queueä¸­ã€‚è®°ä¸ºprocess3ã€‚\n3. ç›´æ¥æ‰§è¡Œnew Promiseï¼Œè¾“å‡º11ã€‚\n4. å°†thenåˆ†å‘åˆ°å¾®ä»»åŠ¡Event Queueä¸­ï¼Œè®°ä¸ºthen3ã€‚\n\nå®ä»»åŠ¡Event Queue|å¾®ä»»åŠ¡Event Queue\n:---------:|:---------:\n|process3\n|then3\n\nç¬¬ä¸‰è½®äº‹ä»¶å¾ªç¯å®ä»»åŠ¡æ‰§è¡Œç»“æŸï¼Œæ‰§è¡Œä¸¤ä¸ªå¾®ä»»åŠ¡process3å’Œthen3ã€‚\n\n1. è¾“å‡º10ã€‚\n2. è¾“å‡º12ã€‚\n\nç¬¬ä¸‰è½®äº‹ä»¶å¾ªç¯ç»“æŸï¼Œç¬¬ä¸‰è½®è¾“å‡º`9ï¼Œ11ï¼Œ10ï¼Œ12`ã€‚\n\næ•´æ®µä»£ç ï¼Œå…±è¿›è¡Œäº†ä¸‰æ¬¡äº‹ä»¶å¾ªç¯ï¼Œå®Œæ•´çš„è¾“å‡ºä¸º`1ï¼Œ7ï¼Œ6ï¼Œ8ï¼Œ2ï¼Œ4ï¼Œ3ï¼Œ5ï¼Œ9ï¼Œ11ï¼Œ10ï¼Œ12`ã€‚*(è¯·æ³¨æ„ï¼Œnodeç¯å¢ƒä¸‹çš„äº‹ä»¶ç›‘å¬ä¾èµ–libuvä¸å‰ç«¯ç¯å¢ƒä¸å®Œå…¨ç›¸åŒï¼Œè¾“å‡ºé¡ºåºå¯èƒ½ä¼šæœ‰è¯¯å·®)*\n\n## å…¶ä»–\n\n### javascriptå­¦ä¹ è·¯çº¿\n\n![ ](./3.jpg)\n","tags":["JavaScript"]},{"title":"äº†è§£ä¸€ä¸‹Flutter","url":"/2020/08/06/flutter/","content":"\n[Flutterå®æˆ˜](https://book.flutterchina.club/ )\n\nFlutter æ˜¯ <span style=\"color:red;\">Google</span>æ¨å‡ºå¹¶å¼€æºçš„ç§»åŠ¨åº”ç”¨å¼€å‘æ¡†æ¶ï¼Œä¸»æ‰“è·¨å¹³å°ã€é«˜ä¿çœŸã€é«˜æ€§èƒ½ã€‚å¼€å‘è€…å¯ä»¥é€šè¿‡ Dartè¯­è¨€å¼€å‘ Appï¼Œä¸€å¥—ä»£ç åŒæ—¶è¿è¡Œåœ¨ iOS å’Œ Androidå¹³å°ã€‚ Flutteræä¾›äº†ä¸°å¯Œçš„ç»„ä»¶ã€æ¥å£ï¼Œå¼€å‘è€…å¯ä»¥å¾ˆå¿«åœ°ä¸º Flutteræ·»åŠ  nativeæ‰©å±•ã€‚åŒæ—¶ Flutterè¿˜ä½¿ç”¨ Nativeå¼•æ“æ¸²æŸ“è§†å›¾ï¼Œè¿™æ— ç–‘èƒ½ä¸ºç”¨æˆ·æä¾›è‰¯å¥½çš„ä½“éªŒã€‚\n\n## ç‰¹å¾\n\n* Flutterä½¿ç”¨è‡ªå·±çš„é«˜æ€§èƒ½æ¸²æŸ“å¼•æ“æ¥ç»˜åˆ¶**widget**\n* ç›®å‰Flutteré»˜è®¤æ”¯æŒiOSã€Androidã€Fuchsiaï¼ˆGoogleæ–°çš„è‡ªç ”æ“ä½œç³»ç»Ÿï¼‰ä¸‰ä¸ªç§»åŠ¨å¹³å°ã€‚ä½†Flutteräº¦å¯æ”¯æŒWebå¼€å‘ï¼ˆFlutter for webï¼‰å’ŒPCå¼€å‘ï¼Œæœ¬ä¹¦çš„ç¤ºä¾‹å’Œä»‹ç»ä¸»è¦æ˜¯åŸºäºiOSå’ŒAndroidå¹³å°çš„ï¼Œå…¶å®ƒå¹³å°è¯»è€…å¯ä»¥è‡ªè¡Œäº†è§£ã€‚\n* Flutter APPé‡‡ç”¨Dartè¯­è¨€å¼€å‘ Dartåœ¨ JITï¼ˆå³æ—¶ç¼–è¯‘ï¼‰æ¨¡å¼ä¸‹ï¼Œé€Ÿåº¦ä¸ JavaScriptåŸºæœ¬æŒå¹³ã€‚ä½†æ˜¯ Dartæ”¯æŒ AOTï¼Œå½“ä»¥ AOTæ¨¡å¼è¿è¡Œæ—¶ï¼ŒJavaScriptä¾¿è¿œè¿œè¿½ä¸ä¸Šäº†\n\n## Flutteræ¡†æ¶ç»“æ„\n\n![Flutteræ¡†æ¶å›¾](./1-1.png \"Flutteræ¡†æ¶å›¾\")\n\n### Flutter Framework\n\nè¿™æ˜¯ä¸€ä¸ªçº¯ Dartå®ç°çš„ SDKï¼Œå®ƒå®ç°äº†ä¸€å¥—åŸºç¡€åº“ï¼Œè‡ªåº•å‘ä¸Šï¼Œæˆ‘ä»¬æ¥ç®€å•ä»‹ç»ä¸€ä¸‹ï¼š\n\n* åº•ä¸‹ä¸¤å±‚ï¼ˆFoundationå’ŒAnimationã€Paintingã€Gesturesï¼‰åœ¨Googleçš„ä¸€äº›è§†é¢‘ä¸­è¢«åˆå¹¶ä¸ºä¸€ä¸ªdart UIå±‚ï¼Œå¯¹åº”çš„æ˜¯Flutterä¸­çš„dart:uiåŒ…ï¼Œå®ƒæ˜¯Flutterå¼•æ“æš´éœ²çš„åº•å±‚UIåº“ï¼Œæä¾›åŠ¨ç”»ã€æ‰‹åŠ¿åŠç»˜åˆ¶èƒ½åŠ›ã€‚\n* Renderingå±‚ï¼Œè¿™ä¸€å±‚æ˜¯ä¸€ä¸ªæŠ½è±¡çš„å¸ƒå±€å±‚ï¼Œå®ƒä¾èµ–äºdart UIå±‚ï¼ŒRenderingå±‚ä¼šæ„å»ºä¸€ä¸ªUIæ ‘ï¼Œå½“UIæ ‘æœ‰å˜åŒ–æ—¶ï¼Œä¼šè®¡ç®—å‡ºæœ‰å˜åŒ–çš„éƒ¨åˆ†ï¼Œç„¶åæ›´æ–°UIæ ‘ï¼Œæœ€ç»ˆå°†UIæ ‘ç»˜åˆ¶åˆ°å±å¹•ä¸Šï¼Œè¿™ä¸ªè¿‡ç¨‹ç±»ä¼¼äºReactä¸­çš„è™šæ‹ŸDOMã€‚Renderingå±‚å¯ä»¥è¯´æ˜¯Flutter UIæ¡†æ¶æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ï¼Œå®ƒé™¤äº†ç¡®å®šæ¯ä¸ªUIå…ƒç´ çš„ä½ç½®ã€å¤§å°ä¹‹å¤–è¿˜è¦è¿›è¡Œåæ ‡å˜æ¢ã€ç»˜åˆ¶(è°ƒç”¨åº•å±‚dart:ui)ã€‚\n* Widgetså±‚æ˜¯Flutteræä¾›çš„çš„ä¸€å¥—åŸºç¡€ç»„ä»¶åº“ï¼Œåœ¨åŸºç¡€ç»„ä»¶åº“ä¹‹ä¸Šï¼ŒFlutterè¿˜æä¾›äº† Material å’ŒCupertinoä¸¤ç§è§†è§‰é£æ ¼çš„ç»„ä»¶åº“ã€‚è€Œæˆ‘ä»¬Flutterå¼€å‘çš„å¤§å¤šæ•°åœºæ™¯ï¼Œåªæ˜¯å’Œè¿™ä¸¤å±‚æ‰“äº¤é“ã€‚\n\n### Flutter Engine\n\nè¿™æ˜¯ä¸€ä¸ªçº¯ C++å®ç°çš„ SDKï¼Œå…¶ä¸­åŒ…æ‹¬äº† Skiaå¼•æ“ã€Dartè¿è¡Œæ—¶ã€æ–‡å­—æ’ç‰ˆå¼•æ“ç­‰ã€‚åœ¨ä»£ç è°ƒç”¨ dart:uiåº“æ—¶ï¼Œè°ƒç”¨æœ€ç»ˆä¼šèµ°åˆ°Engineå±‚ï¼Œç„¶åå®ç°çœŸæ­£çš„ç»˜åˆ¶é€»è¾‘ã€‚\n","tags":["Flutter"]},{"title":"electron å­¦ä¹ ç¬”è®°","url":"/2020/06/02/electron/","content":"\n`Electron` æ˜¯ä¸€ä¸ªç”¨ `HTMLï¼ŒCSS` å’Œ `JavaScript` æ¥æ„å»ºè·¨å¹³å°æ¡Œé¢åº”ç”¨ç¨‹åºçš„ä¸€ä¸ªå¼€æºåº“\n\nåŸç†ä¸º `Electron` é€šè¿‡å°† `Chromium` å’Œ `Node.js` åˆå¹¶åˆ°åŒä¸€ä¸ªè¿è¡Œæ—¶ç¯å¢ƒä¸­ï¼Œå¹¶å°†å…¶æ‰“åŒ…ä¸º **Mac**ï¼Œ**Windows** å’Œ **Linux** ç³»ç»Ÿä¸‹çš„åº”ç”¨æ¥å®ç°è¿™ä¸€ç›®çš„ã€‚\n\n[å®˜ç½‘](https://www.electronjs.org/)\n\n## ç¯å¢ƒæ­å»º\n\nç¡®ä¿ `node` å’Œ `npm` å·²ç»å®‰è£…å¥½äº†,\n\néªŒè¯:\n\n```sh\n# å¯ä»¥çœ‹åˆ°nodeçš„ç‰ˆæœ¬ä¿¡æ¯\nnode -v\n# å¯ä»¥çœ‹åˆ°npmçš„ç‰ˆæœ¬ä¿¡æ¯\nnpm -v\n```\n\nä»å¼€å‘çš„è§’åº¦æ¥çœ‹, Electron application æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª Node. js åº”ç”¨ç¨‹åºã€‚ ä¸ Node.js æ¨¡å—ç›¸åŒï¼Œåº”ç”¨çš„å…¥å£æ˜¯ package.json æ–‡ä»¶\n\n1. ä½¿ç”¨ `npm` åˆ›å»ºä¸€ä¸ª `nodejs` é¡¹ç›®\n\n```sh\n# åˆ›å»ºä¸€ä¸ªé¡¹ç›®æ–‡ä»¶å¤¹\nmkdir myapp\n\n# è¿›å»\ncd ./myapp\n\n# npmåˆå§‹åŒ–é¡¹ç›®\nnpm init\n```\n\n## æœ€å\n","tags":["electron"]},{"title":"N1å®‰è£…CoreELECå¹¶å®‰è£…Dockerã€Zerotier","url":"/2020/03/03/coreelec/","content":"\nN1å®‰è£…CoreELECå¹¶å®‰è£…Dockerã€Zerotierï¼Œ å¹¶è®¾ç½®Zerotierå¼€æœºè‡ªå¯\n\n## å®‰è£…CoreELEC\n\n[ä¼ é€é—¨](https://www.right.com.cn/forum/thread-1135262-1-1.html)\n\n## å®‰è£…Docker\n\nç›´æ¥å†CoreELECçš„æ’ä»¶åº“ æœåŠ¡æ’ä»¶ä¸­å®‰è£…å³å¯\n\n### ä½¿ç”¨ Portainer å·¥å…·ç®¡ç† Docker\n\nåœ¨å¼€å‘ç¯å¢ƒä¸‹ä½¿ç”¨æ­¤æ–¹å¼åˆé€‚ï¼Œ ç”Ÿäº§ç¯å¢ƒ**ä¸å»ºè®®**\n\n1. å¼€å¯docker api\n2. è®¾ç½®dockeré•œåƒæºä¸ºå›½å†…æºï¼Œï¼ˆæé«˜ä¸‹è½½é•œåƒçš„é€Ÿåº¦ï¼‰\n\nä¿®æ”¹å¯åŠ¨æ–‡ä»¶\n\n`vi /storage/.kodi/addons/service.system.docker/system.d/service.system.docker.service`\n\n```sh\n[Unit]\nDescription=Docker Application Container Engine\nDocumentation=https://docs.docker.com\nAfter=network.target\n\n[Service]\nType=notify\nEnvironment=PATH=/bin:/sbin:/usr/bin:/usr/sbin:/storage/.kodi/addons/service.sys                                      tem.docker/bin\nExecStartPre=/storage/.kodi/addons/service.system.docker/bin/docker-config\nEnvironmentFile=-/storage/.kodi/userdata/addon_data/service.system.docker/config                                      /docker.conf\nExecStart=/storage/.kodi/addons/service.system.docker/bin/dockerd -H tcp://0.0.0                                      .0:2375 -H unix:///var/run/docker.sock --registry-mirror=https://el2yu6j2.mirror                                      .aliyuncs.com --exec-opt native.cgroupdriver=systemd --log-driver=journald --gro                                      up=root $DOCKER_DAEMON_OPTS $DOCKER_STORAGE_OPTS\nExecReload=/bin/kill -s HUP $MAINPID\nTasksMax=8192\nLimitNOFILE=1048576\nLimitNPROC=1048576\nLimitCORE=infinity\nTimeoutStartSec=0\nRestart=on-abnormal\n\n[Install]\nWantedBy=multi-user.target\nAlias=docker.service\n```\n\n**æ³¨æ„ ExecStart è¿™ä¸ªå‚æ•°ï¼Œæˆ‘é‡åˆ°çš„å‘ï¼Œå°±æ˜¯è¿™è¡Œå‘½ä»¤ä¸èƒ½æ¢è¡Œ**\n\nåŠ ä¸Š `-H tcp://0.0.0.0:2375 -H unix:///var/run/docker.sock --registry-mirror=https://el2yu6j2.mirror.aliyuncs.com`\n\né‡æ–°å¯åŠ¨\n\n```sh\n$ systemctl daemon-reload\n$ systemctl restart docker\n```\n\næµ‹è¯•\n\n```sh\n$ netstat -anp |grep 2375\n```\n\næŸ¥çœ‹dockeræ˜¯å¦ç›‘å¬ 2375 ç«¯å£\n\n![ ](./0.png)\n\n## å®‰è£…Zerotier\n\n### å®‰è£… ent\n\n### zerotier å¼€æœºè‡ªå¯åŠ¨\n\nzerotierçš„æœåŠ¡å¯åŠ¨æ–‡ä»¶ `zerotier-one.service`, æ”¾åœ¨ `/storage/.config/system.d/` ä¸‹é¢\n\n```sh\n[Unit]\nDescription=zerotier-one                             # æœåŠ¡åç§°ï¼Œä¸é‡å¤å°±ğŸ†—\nAfter=syslog.target network.target\n\n[Service]\nType=forking\nPIDFile=/opt/var/lib/zerotier-one/zerotier-one.pid   # è¿™é‡ŒæŒ‰ç…§ä½ çš„è½¯ä»¶å®‰è£…ç›®å½•è€Œå®š\nExecStart=/opt/bin/zerotier-one -d                   # è¿™é‡ŒæŒ‰ç…§ä½ çš„è½¯ä»¶å®‰è£…ç›®å½•è€Œå®š\nExecReload=/bin/kill -s HUP $MAINPID\nExecStop=/bin/kill -s QUIT $MAINPID\nPrivateTmp=true\nUser=root\nGroup=root\n\n[Install]\nWantedBy=multi-user.target\n```\n\næ‰§è¡Œå‘½åï¼š\n\n```sh\n$ systemctl daemon-reload\n$ systemctl restart zerotier-one\n$ systemctl enable zerotier-one\n```\n\n## å…¶ä»–\n","tags":["coreelec N1"]},{"title":"StreamSets","url":"/2020/02/03/streamsets/","content":"\nStreamSets æ˜¯æˆ‘åœ¨è¿ç§»mysqlæ•°æ®åˆ°clickhouseä¸­å‘ç°çš„, ç°åœ¨æ¥æ€»ç»“ä¸€ä¸‹\n\nStreamsetsæ˜¯ä¸€æ¬¾å¤§æ•°æ®å®æ—¶é‡‡é›†å’ŒETLå·¥å…·ï¼Œå¯ä»¥å®ç°ä¸å†™ä¸€è¡Œä»£ç å®Œæˆæ•°æ®çš„é‡‡é›†å’Œæµè½¬ã€‚é€šè¿‡æ‹–æ‹½å¼çš„å¯è§†åŒ–ç•Œé¢ï¼Œå®ç°æ•°æ®ç®¡é“(Pipelines)çš„è®¾è®¡å’Œå®šæ—¶ä»»åŠ¡è°ƒåº¦ã€‚æœ€å¤§çš„ç‰¹ç‚¹æœ‰ï¼š\n\n- å¯è§†åŒ–ç•Œé¢æ“ä½œï¼Œä¸å†™ä»£ç å®Œæˆæ•°æ®çš„é‡‡é›†å’Œæµè½¬\n- å†…ç½®ç›‘æ§ï¼Œå¯æ˜¯å®æ—¶æŸ¥çœ‹æ•°æ®æµä¼ è¾“çš„åŸºæœ¬ä¿¡æ¯å’Œæ•°æ®çš„è´¨é‡\n- å¼ºå¤§çš„æ•´åˆåŠ›ï¼Œå¯¹ç°æœ‰å¸¸ç”¨ç»„ä»¶å…¨åŠ›æ”¯æŒï¼ŒåŒ…æ‹¬50ç§æ•°æ®æºã€44ç§æ•°æ®æ“ä½œã€46ç§ç›®çš„åœ°ã€‚\n\nå¯¹äºStreamsetsæ¥è¯´ï¼Œæœ€é‡è¦çš„æ¦‚å¿µå°±æ˜¯æ•°æ®æº(Origins)ã€æ“ä½œ(Processors)ã€ç›®çš„åœ°(Destinations)ã€‚åˆ›å»ºä¸€ä¸ªPipelinesç®¡é“é…ç½®ä¹ŸåŸºæœ¬æ˜¯è¿™ä¸‰ä¸ªæ–¹é¢ã€‚\n\nå¸¸è§çš„Originsæœ‰Kafkaã€HTTPã€UDPã€JDBCã€HDFSç­‰ï¼›Processorså¯ä»¥å®ç°å¯¹æ¯ä¸ªå­—æ®µçš„è¿‡æ»¤ã€æ›´æ”¹ã€ç¼–ç ã€èšåˆç­‰æ“ä½œï¼›Destinationsè·ŸOriginså·®ä¸å¤šï¼Œå¯ä»¥å†™å…¥Kafkaã€Flumeã€JDBCã€HDFSã€Redisç­‰ã€‚\n\n## ä½¿ç”¨dockeråˆ›å»º StreamSets å®ä¾‹\n\n```sh\ndocker run --rm -v /Users/aolei/app/streamsets/sdc-data:/data:rw -v /Users/aolei/app/streamsets/sdc-libs/jdbc:/opt/streamsets-datacollector-3.13.0/streamsets-libs-extras/streamsets-datacollector-jdbc-lib/lib/:rw -p 18630:18630 -d streamsets/datacollector dc\n```\n\n## ä½¿ç”¨å®˜æ–¹æ ¸å¿ƒåŒ…è¿è¡Œ\n\n[å®˜ç½‘](https://streamsets.com/)\n\n[å®˜ç½‘ä¸‹è½½åœ°å€ç›´è¾¾](https://streamsets.com/products/dataops-platform/open-source/)\n\n> ä¸‹è½½ä¹‹å‰éœ€è¦å¡«å†™ä¸€äº›ç®€å•çš„ä¿¡æ¯\n\n### é…ç½®å¾ˆç®€å•\n\nä¿å­˜streamsetsçš„é…ç½® `-v /Users/aolei/app/streamsets/sdc-data:/data:rw`\n\nä½¿ç”¨æœ¬åœ°çš„ libs `-v /Users/aolei/app/streamsets/sdc-libs/lib:/opt/ streamsets-datacollector-3.13.0/streamsets-libs/:rw`\n\n## StreamSets è¿ç§» mysql - clickhouse ä½¿ç”¨\n\n### å‡†å¤‡æ‰€éœ€çš„jdbc jaråŒ…\n\nå¦‚æœæœ¬åœ°æœ‰ maven ç¯å¢ƒçš„, å¯ä»¥åˆ›å»ºä¸€ä¸ª `pom.xml` æ–‡ä»¶\n\n```xml\n<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n  xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd\">\n  <modelVersion>4.0.0</modelVersion>\n  <groupId>com.anjia</groupId>\n  <artifactId>demo</artifactId>\n  <packaging>jar</packaging>\n  <version>1.0-SNAPSHOT</version>\n  <name>demo</name>\n  <url>http://maven.apache.org</url>\n  <dependencies>\n    <dependency>\n        <groupId>ru.yandex.clickhouse</groupId>\n        <artifactId>clickhouse-jdbc</artifactId>\n        <version>0.1.54</version>\n    </dependency>\n    <dependency>\n      <groupId>mysql</groupId>\n      <artifactId>mysql-connector-java</artifactId>\n      <version>5.1.47</version>\n  </dependency>\n  </dependencies>\n</project>\n```\n\næ‰§è¡Œ `mvn dependency:copy-dependencies -DoutputDirectory=lib -DincludeScope=compile` ä¼šåœ¨å½“å‰ç›®å½•ä¸‹ç”Ÿæˆ**lib**æ–‡ä»¶å¤¹,å¤åˆ¶å…¶ä¸­çš„jaråŒ…åˆ°`/Users/aolei/app/streamsets/sdc-libs/lib`(*ä½ æœ¬åœ°æ˜ å°„çš„streamsets libç›®å½•*)\n\n## è…¾è®¯äº‘å®¹å™¨éƒ¨ç½²çš„å°bug\n\nä½¿ç”¨è…¾è®¯äº‘å®¹å™¨éƒ¨ç½²çš„æ—¶å€™,å¤–æŒ‚ç¡¬ç›˜,å®¹å™¨å¯åŠ¨åæ²¡æœ‰è¯»å†™æƒé™; æˆ‘çš„è§£å†³æ–¹æ¡ˆæ˜¯å…ˆç”¨æ­£å¸¸å¯åŠ¨çš„å®¹å™¨å¯åŠ¨æˆåŠŸ,è¿œç¨‹ç™»é™†`chmod -R 775 /data/`,å†åˆ‡æ¢å›streamsetså®¹å™¨å³å¯\n\n## æ€»ç»“\n\n[æœ¬æ–‡å€Ÿé‰´-ç®€ä¹¦ åŒ—é‚®éƒ­å¤§å®](https://www.jianshu.com/p/870e1bb52da4)\n","tags":["å¤§æ•°æ®"]},{"title":"Windows10ä¸‹çš„å­ç³»ç»ŸLinux","url":"/2020/01/08/msl/","content":"\nWindows10å‡ºäº†ä¸€æ¬¾å­ç³»ç»ŸLinux,å¯ä»¥æ–¹ä¾¿å¼€å‘è€…ä¸åœ¨éœ€è¦ä¾èµ–è™šæ‹Ÿæœºå•¦\n\n## å¼€å§‹\n\né¦–å…ˆä½ å¾—æ˜¯windows10æœ€æ–°ç‰ˆæœ¬çš„ç³»ç»Ÿ\n\nè¿›å…¥ ç³»ç»Ÿè®¾ç½® -> æ›´æ–°å’Œå®‰å…¨ -> å¼€å‘è€…é€‰é¡¹ æ‰“å¼€\n\n![ ](./WX20200108-154615@2x.png)\n\n![ ](./WX20200108-154856@2x.png)\n\nå…¶æ¬¡æ˜¯ è¿›å…¥ æ§åˆ¶é¢æ¿-ç¨‹åºå’ŒåŠŸèƒ½-å¯ç”¨æˆ–å…³é—­WindowsåŠŸèƒ½ä¸‹ é€‰æ‹© â€œé€‚ç”¨äºLinuxçš„Windowä¹‹ç³»ç»Ÿâ€\n\n![ ](./WX20200108-155336@2x.png)\n\nç„¶å**é‡å¯ç³»ç»Ÿ**\n\n## å®‰è£…Linuxç³»ç»Ÿ\n\næ‰“å¼€Windows10çš„åº”ç”¨å•†åº—, æœç´¢Linuxä¼šå¾—åˆ°ä»¥ä¸‹ç»“æœ, ç‚¹å‡»ç¬¬ä¸€ä¸ªè¿›å…¥\n\n![ ](./A84A183D1145E8245B6A7C8A84FB985F.jpg)\n\n![ ](./WX20200108-155928@2x.png)\n\nè¿™é‡Œæˆ‘å®‰è£…çš„æ˜¯ç¬¬ä¸€ä¸ª Ubuntu ç³»ç»Ÿ\n\n![ ](./WX20200108-160028@2x.png)\n\nç‚¹å‡»å®‰è£…, ç­‰å¾…å®‰è£…å®Œæˆ\n\n## è¿›å…¥Linuxç³»ç»Ÿ\n\nå®‰è£…å®Œæˆä¹‹å, `Ctrl + R`æ‰“å¼€CMD, è¾“å…¥ `bash` å°±ä¼šè¿›å…¥Linuxç³»ç»Ÿäº†\n\næ ¹æ®æç¤º, è®¾ç½®ç”¨æˆ·åã€å¯†ç å°±å¥½äº†\n\n![ ](./20180912154639866.png)\n\n## å­ç³»ç»ŸUbuntuè¿›é˜¶(å¯é€‰)\n\n### å‡çº§åˆ° WSL2\n\n**å…ˆå†³æ¡ä»¶** è¿è¡Œ `Windows 10`ï¼ˆå·²æ›´æ–°åˆ°ç‰ˆæœ¬ *2004* çš„å†…éƒ¨ç‰ˆæœ¬ *19041* æˆ–æ›´é«˜ç‰ˆæœ¬ï¼‰\n\n[å®˜æ–¹æ–‡æ¡£](https://docs.microsoft.com/zh-cn/windows/wsl/install-win10)\n\næ‰“å¼€ cmd\n\n```cmd\n# å°†å½“å‰wslç‰ˆæœ¬è®¾ç½®ä¸º2  `wsl --set-version <distribution name> <versionNumber>`\nwsl --set-version Ubuntu 18.04 2\n\n# å°†wslé»˜è®¤ç‰ˆæœ¬è®¾ç½®ä¸º 2  (åç»­å®‰è£…wslå­ç³»ç»Ÿéƒ½å°†ä»¥wsl2ç‰ˆæœ¬å®‰è£…)\nwsl --set-default-version 2\n\n# æŸ¥çœ‹å½“å‰ wsl ç‰ˆæœ¬\nwsl -l -v\n```\n\n![ ](./WX20200108-164517@2x.png)\n\n### æ›´æ¢ apt-get å®‰è£…æº(å¯é€‰ã€è§‰å¾—ç½‘é€Ÿå¥½çš„å¯ä»¥ä¸æ¢)\n\nä¸€èˆ¬æ–°å®‰è£…çš„Linuxç³»ç»Ÿéƒ½éœ€è¦æ›´æ–°è½¯ä»¶ä»“åº“çš„, ä½†æ˜¯Ubuntuçš„é»˜è®¤ä»“åº“æºæ˜¯å›½å¤–çš„,æ›´æ–°æ•°æ®æ¯”è¾ƒæ…¢, æˆ‘ä»¬å¯ä»¥å…ˆæ›´æ¢è½¯ä»¶ä»“åº“æºä¸ºå›½å†…çš„(ä¸ªäººä¸€èˆ¬å–œæ¬¢ç”¨*é˜¿é‡Œ*çš„æº)\n\n#### å‡†å¤‡æº\n\næŸ¥çœ‹ç³»ç»Ÿç‰ˆæœ¬\n\n```sh\nlsb_release -a\n```\n\n![ ](./WX20200108-164517@2x.png)\n\n> Codename æ˜¯ä½ çš„ç³»ç»Ÿç‰ˆæœ¬ä»£å·\n> Ubuntu 12.04 (LTS)ä»£å·ä¸ºpreciseã€‚\n> Ubuntu 14.04 (LTS)ä»£å·ä¸ºtrustyã€‚\n> Ubuntu 15.04 ä»£å·ä¸ºvividã€‚\n> Ubuntu 15.10 ä»£å·ä¸ºwilyã€‚\n> Ubuntu 16.04 (LTS)ä»£å·ä¸ºxenialã€‚\n> Ubuntu 18.04 (LTS)ä»£å·ä¸ºbionic\n\nUbuntu 18.04 (LTS)ä»£å·ä¸ºbionic å¯¹åº”é˜¿é‡Œäº‘é•œåƒä»“åº“çš„åœ°å€ä¸º:\n\n```txt\ndeb http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiverse\ndeb-src http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiverse\n\ndeb http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiverse\ndeb-src http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiverse\n\ndeb http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiverse\ndeb-src http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiverse\n\ndeb http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiverse\ndeb-src http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiverse\n\ndeb http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse\ndeb-src http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse\n```\n\n[è¿™é‡Œæœ€åé¢è¯´æ˜äº†,ä¸ºä»€ä¹ˆè¦å…³æ³¨è¿™ä¸ªç³»ç»Ÿçš„ç‰ˆæœ¬å·](https://blog.csdn.net/zhangjiahao14/article/details/80554616)\n\n### ä¿®æ”¹ `/etc/apt/sources.list` æ–‡ä»¶\n\næˆ‘ä»¬éœ€è¦ä¿®æ”¹ `/etc/apt/sources.list` æ–‡ä»¶\n\nç¬¬ä¸€æ­¥: å¤‡ä»½ `/etc/apt/sources.list` æ–‡ä»¶\n\n```sh\nsudo cp /etc/apt/sources.list /etc/apt/sources.list.bak\n```\n\n> .bak åç¼€çš„æ–‡ä»¶æ˜¯linuxç³»ç»Ÿä¸­çš„å¤‡ä»½æ–‡ä»¶\n\nç¬¬äºŒéƒ¨: ä¿®æ”¹ `/etc/apt/sources.list` æ–‡ä»¶\n\n```sh\nsudo vim /etc/apt/sources.list\n```\n\n![ ](./WX20200108-163130@2x.png)\n\næ‰“å¼€ä¹‹åæ˜¯è¿™æ ·çš„\n\næ³¨é‡Šå·²æœ‰çš„æº, ç²˜è´´é˜¿é‡Œçš„é•œåƒåœ°å€ä¿å­˜å³å¯\n\nvimç¼–è¾‘å™¨è¯´æ˜:\n\nviç¼–è¾‘å™¨ä¸€å…±æœ‰ä¸‰ç§æ¨¡å¼ï¼Œåˆ†åˆ«æ˜¯å‘½ä»¤æ¨¡å¼ï¼ˆcommand modeï¼‰*é»˜è®¤*ã€æ’å…¥æ¨¡å¼ï¼ˆInsert modeï¼‰å’Œåº•è¡Œæ¨¡å¼ï¼ˆlast line modeï¼‰ã€‚å‘½ä»¤æ¨¡å¼ä¸‹æˆ‘ä»¬åªèƒ½æ§åˆ¶å±å¹•å…‰æ ‡çš„ç§»åŠ¨ï¼Œå­—ç¬¦ã€å­—æˆ–è¡Œçš„åˆ é™¤ï¼Œç§»åŠ¨å¤åˆ¶æŸåŒºæ®µåŠè¿›å…¥Insert modeä¸‹ï¼Œæˆ–è€…åˆ° last line modeç­‰ï¼›æ’å…¥æ¨¡å¼ä¸‹å¯ä»¥åšæ–‡å­—è¾“å…¥ï¼ŒæŒ‰ã€ŒESCã€é”®å¯å›åˆ°å‘½ä»¤è¡Œæ¨¡å¼ï¼›åº•è¡Œæ¨¡å¼ä¸‹ï¼Œå¯ä»¥å°†æ–‡ä»¶ä¿å­˜æˆ–é€€å‡ºviï¼Œä¹Ÿå¯ä»¥è®¾ç½®ç¼–è¾‘ç¯å¢ƒï¼Œå¦‚å¯»æ‰¾å­—ç¬¦ä¸²ã€åˆ—å‡ºè¡Œå·ç­‰ã€‚\n\nvimç¼–è¾‘å™¨çš„å¸¸ç”¨å‘½ä»¤:\n\n1. `vim /etc/apt/sources.list` æ‰“å¼€æ–‡ä»¶(ä¸å­˜åœ¨çš„æ–‡ä»¶,åœ¨ä¿å­˜æ—¶è‡ªåŠ¨åˆ›å»º) é»˜è®¤(å‘½ä»¤æ¨¡å¼)\n2. `i` (æ’å…¥æ¨¡å¼) åœ¨å…‰æ ‡å‰å¼€å§‹æ’å…¥\n3. `a` (æ’å…¥æ¨¡å¼) åœ¨å…‰æ ‡åå¼€å§‹æ’å…¥\n4. `shift + :` (å‘½ä»¤æ¨¡å¼) è°ƒå‡ºvimçš„å‘½ä»¤è¡Œ, è¾“å…¥å‘½ä»¤(`wq`ä¿å­˜é€€å‡ºã€`q!`ä¸ä¿å­˜é€€å‡ºã€ `w`ä»…ä¿å­˜)\n5. `d + upé”®` (å‘½ä»¤æ¨¡å¼) *æµè§ˆæ¨¡å¼ä¸‹* åˆ é™¤ä¸€è¡Œ\n\n#### apt-get updateã€ apt-get upgrade ä¸è¦å¿˜è®°äº†, ä¸ç®¡æœ‰æ²¡æœ‰æ¢æºéƒ½è¦æ‰§è¡Œçš„\n\n### zsh\n\n*zsh*æ˜¯ä¸€ä¸ªç»ˆç«¯shellç¨‹åº,æ¯”é»˜è®¤çš„bashç»ˆç«¯å¥½ç”¨, å¯ä»¥æ­é…*oh-my-zsh*ç¾åŒ–ä½ çš„å‘½ä»¤è¡Œ\n\nå®˜ç½‘[oh-my-zsh](https://ohmyz.sh/)\n\n#### å®‰è£… zsh oh-my-zsh\n\nå®‰è£…zsh\n\n`sudo apt-get install zsh`\n\næ£€æŸ¥zsh\n\n`zsh --version`\n\nå¦‚æœæ²¡æœ‰çœ‹åˆ°ç‰ˆæœ¬å·ã€æˆ–è€…æŠ¥é”™,åˆ™è¯´æ˜å®‰è£…å¤±è´¥äº†\n\nè®¾ç½®ä¸ºé»˜è®¤ç»ˆç«¯\n\n`sudo chsh -s /usr/bin/zsh <username>`\n\nå¦‚æœæŠ¥é”™, åˆ™çœ‹ä¸€ä¸‹ `/etc/shells` æ–‡ä»¶ä¸­æ˜¯å¦åŒ…å« `/bin/zsh`ã€`/usr/bin/zsh`, æ²¡æœ‰å°±æ·»åŠ \n\n![ ](./WX20200108-173249@2x.png)\n\né¡ºåºä¸é‡è¦\n\nå†æ¬¡æ‰§è¡Œ `sudo chsh -s /usr/bin/zsh <username>`\n\næˆåŠŸåˆ™**å…³é—­ç»ˆç«¯,é‡æ–°æ‰“å¼€(é€€å‡ºç”¨æˆ·,é‡æ–°ç™»é™†)**\n\næ‰§è¡Œ `bash` è¿›å…¥Linuxå­ç³»ç»Ÿ\n\næ‰§è¡Œ `echo $SHELL` ä¼šè¾“å‡º `/bin/zsh`\n\næ‰§è¡Œ `$SHELL --version` ä¼šè¾“å‡º `zsh 5.4.2 (x86_64-ubuntu-linux-gnu)`\n\nä¸Šé¢ä¸¤éƒ¨æ‰§è¡Œæ­£ç¡®,åˆ™è¯´æ˜å®‰è£…zshå¹¶è®¾ç½®ä¸ºé»˜è®¤ç»ˆç«¯æˆåŠŸäº†,\n\n#### æˆ‘é‡åˆ°çš„windows10å­ç³»ç»Ÿçš„ä¸€ä¸ªé—®é¢˜\n\nåœ¨è®¾ç½®ä¸ºé»˜è®¤ç»ˆç«¯æ—¶,ä¸ºå‚è€ƒå®˜æ–¹æ•™ç¨‹æ¥åš,æ— æ³•å°†zshè®¾ç½®ä¸ºé»˜è®¤ç»ˆç«¯\n\nå®˜æ–¹å‘½ä»¤: `sudo chsh -s $(which zsh)`\n\næ£€æŸ¥æ˜¯å¦è®¾ç½®é»˜è®¤æˆåŠŸ: `echo $SHELL`\n\nç»ˆç«¯åº”è¯¥è¾“å‡º: `/bin/zsh`, å¦‚æœä¸æ˜¯ æˆ–è€…æ˜¯ ç©º åˆ™è¯´æ˜é»˜è®¤é…ç½®æ˜¯å¤±è´¥çš„\n\næŸ¥çœ‹ `/etc/passwd` æ–‡ä»¶ä¸­ å¯¹åº”ä½ çš„ç”¨æˆ·é…ç½® æ˜¯å¦æ˜¯ æŒ‡å®š `/bin/zsh`\n\n##### æœ€ç»ˆè§£å†³é—®é¢˜çš„åŠæ³•\n\nç¼–è¾‘ `~/.bash_profile` æ–‡ä»¶ï¼Œï¼ˆä¸å­˜åœ¨å°±åˆ›å»ºï¼‰\n\nåŠ å…¥ä»¥ä¸‹ç±»å®¹ï¼š\n\n```sh\n# æŒ‡å®š zshçš„ç›®å½•\nexport SHELL=/bin/zsh\nexport PATH=$SHELL:$PATH\n\n# æ¯æ¬¡æ‰“å¼€ç»ˆç«¯çš„æ—¶å€™è¿è¡Œzsh\nexec $SHELL\n```\n\n![ ](./WX20200108-173321@2x.png)\n\næ‰§è¡Œ `sudo chsh -s /usr/bin/zsh <username>` å‘½ä»¤ (æœ€åé¢å¯¹åº”ä½ çš„ç”¨æˆ·å)\n\n#### ä¸‹è½½ oh-my-zsh ç¾åŒ–zsh\n\nå‚è€ƒå®˜æ–¹çš„æ•™ç¨‹\n\nä½¿ç”¨ curl\n\n```sh\nsh -c \"$(curl -fsSL https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh)\"\n```\n\nä½¿ç”¨ wget\n\n```sh\nsh -c \"$(wget https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh -O -)\"\n```\n\né»˜è®¤æ˜¯ robbyrussell æ ·å¼\n\nä¿®æ”¹ `~/.zshrc` çš„ `ZSH_THEME=robbyrussell` å€¼ å³å¯æ›´æ¢æ ·å¼, å¦‚æœä½ ä¸æƒ³è¦ä»»ä½•æ ·å¼,åˆ™å°†å€¼è®¾ç½®ä¸º\"\"å³å¯\n\n[ä¸»é¢˜åº“](https://github.com/ohmyzsh/ohmyzsh/wiki/Themes)\n\n### å…¶ä»–\n\nåé¢éœ€è¦å­¦ä¹ çš„:\n\n1. å®‰è£…docker\n2. puttyè¿œç¨‹è¿æ¥\n\n## ç»“æŸ\n\n...\n","tags":["Windows"]},{"title":"æ¢…æ—å®‰è£…zerotier","url":"/2020/01/02/meilin-zerotier/","content":"\nç½‘ä»¶R7000åˆ·æ¢…æ—, å®‰è£…zerotierå†…ç½‘ç©¿é€å·¥å…·, å¹¶é…ç½®å¼€æœºè‡ªå¯\n\n[å‚è€ƒ](http://koolshare.cn/forum.php?mod=viewthread&tid=134930&extra=&ordertype=1)\n\n## å®‰è£… entware\n\n```sh\nrm -rf /opt\n\nmkdir /opt\n\ncd /opt\n\nwget -O - http://qnapware.zyxmon.org/binaries-armv7/installer/entware_install_arm.sh | sh\n```\n\n> ç„¶åä¼šæç¤ºä½ é€‰æ‹©å“ªä¸ªåˆ†åŒºï¼Œé€‰æ‹©ä½ æŒ‚è½½çš„Uç›˜åˆ†åŒº\n\n```sh\nÂ·Â·Â·çœç•¥\nInfo:  Looking for available partitions...\n[1] --> /tmp/mnt/sda1\n=>  Please enter partition number or 0 to exit\n[0-1]: 1 # é€‰1å›è½¦\nÂ·Â·Â·çœç•¥\n```\n\n> è·‘å®Œä¹‹ååªè¦ä¸æç¤ºé”™è¯¯ï¼Œå°±æ˜¯å®‰è£…æˆåŠŸäº†\n\n### é…ç½®entwareç¯å¢ƒå˜é‡\n\n`vim /etc/profile`\n\nç›´æ¥åœ¨å‰é¢/usr/sbin:è¿™è¡Œä¸‹ç›´æ¥æ·»åŠ ä¸‹é¢ä¸¤è¡Œå¹¶ä¿å­˜é€€å‡ºï¼ˆESC+:wq+Enterï¼‰\n\n`/opt/bin:/opt/sbin:`\n\nä½¿é…ç½®ç”Ÿæ•ˆ\n\n`source /etc/profile`\n\n### æ£€æŸ¥entwareç¯å¢ƒå®‰è£…æƒ…å†µçœ‹æ˜¯å¦æŠ¥é”™\n\n```sh\nopkg update\n\nopkg list\n```\n\n## å®‰è£… zerotier\n\n```sh\nopkg update\n\nopkg install zerotier\n```\n\n## å¯åŠ¨zerotieræœåŠ¡\n\n## æ·»åŠ ç«¯å£æ˜ å°„è¡¨\n\n## é‡å¯zerotieræœåŠ¡\n\n## æ³¨æ„äº‹é¡¹\n\n1. å®‰è£…zerotierä¹‹å‰å…ˆå®‰è£… entware, è¿™æ ·æ‰èƒ½å®‰è£…æœ€æ–°ç‰ˆæœ¬çš„zerotier\n\n## æœ€å\n\n......\n","tags":["è·¯ç”±å™¨"]},{"title":"mysqlçš„explainå‘½ä»¤","url":"/2020/01/02/mysql-explain/","content":"\n**explain**å…³é”®å­—å¯ä»¥æ¨¡æ‹ŸMySQLä¼˜åŒ–å™¨æ‰§è¡ŒSQLè¯­å¥ï¼Œå¯ä»¥å¾ˆå¥½çš„åˆ†æSQLè¯­å¥æˆ–è¡¨ç»“æ„çš„æ€§èƒ½ç“¶é¢ˆ.\n\n## explainçš„ç”¨é€”\n\n1. è¡¨çš„è¯»å–é¡ºåºå¦‚ä½•\n2. æ•°æ®è¯»å–æ“ä½œæœ‰å“ªäº›æ“ä½œç±»å‹\n3. å“ªäº›ç´¢å¼•å¯ä»¥ä½¿ç”¨\n4. å“ªäº›ç´¢å¼•è¢«å®é™…ä½¿ç”¨\n5. è¡¨ä¹‹é—´æ˜¯å¦‚ä½•å¼•ç”¨\n6. æ¯å¼ è¡¨æœ‰å¤šå°‘è¡Œè¢«ä¼˜åŒ–å™¨æŸ¥è¯¢\n7. ......\n\n## explainçš„ä¸»è¦å­—æ®µæœ‰\n\n1. **id** selectæŸ¥è¯¢çš„åºåˆ—å·ï¼ŒåŒ…å«ä¸€ç»„æ•°å­—ï¼Œè¡¨ç¤ºæŸ¥è¯¢ä¸­æ‰§è¡Œselectå­å¥æˆ–æ“ä½œè¡¨çš„é¡ºåº\n2. **select_type** æŸ¥è¯¢ç±»å‹\n3. **table** æ­£åœ¨è®¿é—®å“ªä¸ªè¡¨\n4. **partitions** åŒ¹é…çš„åˆ†åŒº\n5. **type** è®¿é—®çš„ç±»å‹\n6. **possible_keys** æ˜¾ç¤ºå¯èƒ½åº”ç”¨åœ¨è¿™å¼ è¡¨ä¸­çš„ç´¢å¼•ï¼Œä¸€ä¸ªæˆ–å¤šä¸ªï¼Œä½†ä¸ä¸€å®šå®é™…ä½¿ç”¨åˆ°\n7. **key** å®é™…ä½¿ç”¨åˆ°çš„ç´¢å¼•ï¼Œå¦‚æœä¸ºNULLï¼Œåˆ™æ²¡æœ‰ä½¿ç”¨ç´¢å¼•\n8. **key_len** è¡¨ç¤ºç´¢å¼•ä¸­ä½¿ç”¨çš„å­—èŠ‚æ•°ï¼Œå¯é€šè¿‡è¯¥åˆ—è®¡ç®—æŸ¥è¯¢ä¸­ä½¿ç”¨çš„ç´¢å¼•çš„é•¿åº¦\n9. **ref** æ˜¾ç¤ºç´¢å¼•çš„å“ªä¸€åˆ—è¢«ä½¿ç”¨äº†ï¼Œå¦‚æœå¯èƒ½çš„è¯ï¼Œæ˜¯ä¸€ä¸ªå¸¸æ•°ï¼Œå“ªäº›åˆ—æˆ–å¸¸é‡è¢«ç”¨äºæŸ¥æ‰¾ç´¢å¼•åˆ—ä¸Šçš„å€¼\n10. **rows** æ ¹æ®è¡¨ç»Ÿè®¡ä¿¡æ¯åŠç´¢å¼•é€‰ç”¨æƒ…å†µï¼Œå¤§è‡´ä¼°ç®—å‡ºæ‰¾åˆ°æ‰€éœ€çš„è®°å½•æ‰€éœ€è¯»å–çš„è¡Œæ•°\n11. **filtered** æŸ¥è¯¢çš„è¡¨è¡Œå è¡¨çš„ç™¾åˆ†æ¯”\n12. **Extra** åŒ…å«ä¸é€‚åˆåœ¨å…¶å®ƒåˆ—ä¸­æ˜¾ç¤ºä½†ååˆ†é‡è¦çš„é¢å¤–ä¿¡æ¯\n\n## æœ€å\n\n![ ](./2864885534-202c0878c1abf896.png)\n\n......\n","tags":["æ•°æ®åº“"]},{"title":"å°é’¢ç‚®å®‰è£…zerotierå®ç°å†…ç½‘ç©¿é€","url":"/2020/01/02/xgp-zerotier/","content":"\nå°é’¢ç‚®å®‰è£…zerotierå®ç°å†…ç½‘ç©¿é€\n\n## å®‰è£…zerotier\n\n### ä¸€ã€å®‰è£… entware\n\nä¸ºäº†å®‰è£…æœ€æ–°ç‰ˆæœ¬çš„zerotier,æˆ‘ä»¬éœ€è¦å…ˆå®‰è£… *entware*\n\næ‰§è¡Œ\n\n```sh\nrm -rf /opt\n\nmkdir /opt\n\ncd /opt\n\nwget -O - http://bin.entware.net/aarch64-k3.10/installer/alternative.sh | sh\n```\n\nå°†è‡ªå¸¦opkgæ”¹åä¸ºopkg_bakæš‚æ—¶åœç”¨ ç¯å¤§å›ºä»¶æ›´æ–°å¯ä»¥æ”¹å›æ¥å…é‡è£…ç³»ç»Ÿæ›´æ–°è½¯ä»¶\n\nmv /usr/bin/opkg /usr/bin/opkg_bak\n\n### äºŒã€é…ç½®entwareç¯å¢ƒå˜é‡\n\n`vim /etc/profile`\n\nç›´æ¥åœ¨å‰é¢/usr/sbin:è¿™è¡Œä¸‹ç›´æ¥æ·»åŠ ä¸‹é¢ä¸¤è¡Œå¹¶ä¿å­˜é€€å‡ºï¼ˆESC+:wq+Enterï¼‰\n\n`/opt/bin:/opt/sbin:`\n\nä½¿é…ç½®ç”Ÿæ•ˆ\n\n`source /etc/profile`\n\n### ä¸‰ã€æ£€æŸ¥entwareç¯å¢ƒå®‰è£…æƒ…å†µçœ‹æ˜¯å¦æŠ¥é”™\n\n```sh\nopkg update\n\nopkg list\n```\n\n### å››ã€å®‰è£…zerotier\n\n`opkg install zerotier`\n\nå¯åŠ¨zerotier\n\n`zerotier-one -d`\n\næŸ¥çœ‹æœåŠ¡çŠ¶æ€\n\n`zerotier-one info`\n\n## åŠ å…¥å·²æœ‰zerotierç½‘ç»œ\n\n1. ç™»é™†å¹¶æ‰“å¼€ä½ çš„zerotierç½‘ç»œç®¡ç†é¡µé¢\n2. æ‹·è´ä½ çš„ç½‘ç»œID\n\n![ ](./CD65E8E75C1CBF3BF60AFBF278909ACD.jpg)\n\nåŠ å…¥ç½‘ç»œ `zerotier-cli join <netowkr-id>`\n\næŸ¥çœ‹ç½‘ç»œçŠ¶æ€ `zerotier-cli listnetworks`\n\n## è®¾ç½®å¼€æœºè‡ªå¯\n\nåˆ›å»º /etc/init.d/S60zerotier-one.sh æ–‡ä»¶\n\nç¼–è¾‘ä¸ºä»¥ä¸‹å†…å®¹\n\n```sh\n\n#! /bin/sh\n\ncase \"$1\" in\n  start)\n    if ( pidof zerotier-one )\n    then echo \"ZeroTier-One is already running.\"\n    else\n        echo \"Starting ZeroTier-One\" ;\n        /opt/bin/zerotier-one -d ;\n        echo \"$(date) Started ZeroTier-One\" >> /opt/var/log/zerotier-one.log ;\n    fi\n    ;;\n  stop)\n    if ( pidof zerotier-one )\n    then\n        echo \"Stopping ZeroTier-One\";\n        killall zerotier-one\n        echo \"$(date) Stopped ZeroTier-One\" >> /opt/var/log/zerotier-one.log\n    else\n        echo \"ZeroTier-One was not running\" ;\n    fi\n    ;;\n  status)\n    if ( pidof zerotier-one )\n    then echo \"ZeroTier-One is running.\"\n    else echo \"ZeroTier-One is NOT running\"\n    fi\n    ;;\n  *)\n    echo \"Usage: /etc/init.d/zerotier-one {start|stop|status}\"\n    exit 1\n    ;;\nesac\n\nexit 0\n\n```\n\n**æˆäºˆæƒé™**\n\n`chmod 777 /etc/init.d/S60zerotier-one.sh`\n\n## ç»“æŸ\n\nå®Œæˆä»¥ä¸Šæ“ä½œå³å¯åœ¨å°é’¢ç‚®ä¸­å®‰è£…zerotierå¹¶å®ç°å¼€æœºè‡ªå¯\n","tags":["å°é’¢ç‚®"]},{"title":"GraphQL å­¦ä¹ ","url":"/2019/10/22/graphql/","content":"\nGraphQL æ—¢æ˜¯ä¸€ç§ç”¨äº API çš„æŸ¥è¯¢è¯­è¨€ä¹Ÿæ˜¯ä¸€ä¸ªæ»¡è¶³ä½ æ•°æ®æŸ¥è¯¢çš„è¿è¡Œæ—¶ã€‚ GraphQL å¯¹ä½ çš„ API ä¸­çš„æ•°æ®æä¾›äº†ä¸€å¥—æ˜“äºç†è§£çš„å®Œæ•´æè¿°ï¼Œä½¿å¾—å®¢æˆ·ç«¯èƒ½å¤Ÿå‡†ç¡®åœ°è·å¾—å®ƒéœ€è¦çš„æ•°æ®ï¼Œè€Œä¸”æ²¡æœ‰ä»»ä½•å†—ä½™ï¼Œä¹Ÿè®© API æ›´å®¹æ˜“åœ°éšç€æ—¶é—´æ¨ç§»è€Œæ¼”è¿›ï¼Œè¿˜èƒ½ç”¨äºæ„å»ºå¼ºå¤§çš„å¼€å‘è€…å·¥å…·ã€‚\n\n[å®˜ç½‘æ–‡æ¡£](https://www.apollographql.com/docs/apollo-server)\n\n## å…¥é—¨\n\nè¿™é‡Œä½¿ç”¨ nodejs æ¥åˆ›å»ºdemo, ä½¿ç”¨åˆ°çš„npmåŒ…å¦‚ä¸‹:\n\n1. fastify\n2. apollo-server-fastify\n\n### å®šä¹‰GraphQL æ¨¡å‹\n\n```typescript\nimport { gql } from 'apollo-server-core';\n\nconst typeDefs = gql`\n    # è‡ªå®šä¹‰ ç±»å‹\n    scalar Date\n\n    # è‡ªå®šä¹‰ä¸€ä¸ªæ¨¡å‹\n    type Book {\n        title: String\n        author: String\n        sex: String\n    }\n    ...\n\n    # å®šä¹‰è¾“å…¥æ¨¡å‹\n    input BookForm {\n        title: String!\n        author: String!\n        sex: String!\n    }\n\n    # Query å®šä¹‰æŸ¥è¯¢çš„æ–¹æ³•\n    type Query {\n        # æŸ¥è¯¢æ‰€ä»¥ books çš„æ–¹æ³•\n        getBooks: [Book]\n    }\n\n    # Mutation å®šä¹‰æ›´æ–°çš„æ–¹æ³•\n    type Mutation {\n        addBook(book: BookForm): Boolean\n    }\n`\n```\n\n1. è‡ªå®šä¹‰ç±»å‹ç”¨ `scalar` æ ‡æ³¨\n2. è‡ªå®šä¹‰æ¨¡å‹ç”¨ `type` æ ‡æ³¨\n3. è¾“å…¥æ¨¡å‹ç”¨ `input` æ ‡æ³¨ (ä¸æ¨¡å‹çš„å”¯ä¸€åŒºåˆ«æ˜¯ å…³é”®å­—ä¸åŒ)\n\n> Query å’Œ Mutation æ˜¯GraphQLå†…çš„ä¸¤ä¸ªç‰¹æ®Šæ¨¡å‹, æˆ‘ä»¬åœ¨è¿™é‡Œå®šä¹‰ *æŸ¥è¯¢* å’Œ *æ›´æ–°* åŠè¿”å›ç±»å‹, typeDefsä¸­åªèƒ½å„å­˜åœ¨ä¸€ä¸ª.\n\n### å®šä¹‰GraphQLçš„ resolver\n\n```typescript\n    const resolvers = {\n        Query: {\n            // Queryä¸­å®ç°typeDefsä¸­å®šä¹‰çš„æŸ¥è¯¢\n            getBooks: (obj: any, args: any, context: any, info: any) => {\n                return [];\n            }\n        },\n        Mutation: {\n            // Mutationä¸­å®ç°typeDefsä¸­å®šä¹‰çš„æ›´æ–°\n            addBook: (obj: any, args: any, context: any, info: any) => {\n                console.log('----> params', args['book'])\n                return true;\n            }\n        },\n        // å®ç°typeDefsä¸­è‡ªå®šä¹‰çš„æ¨¡å‹\n        Book: {\n            // é’ˆå¯¹ å•ä¸ªå±æ€§å®šä¹‰\n            sex: (book:any, args: any, context: any, info: any) => {\n                return book.sex === 1 ? 'ç”·' : 'å¥³';\n            }\n        }\n        // ... å¤šä¸ªè‡ªå®šä¹‰æ¨¡å‹\n    }\n```\n\n> æ³¨æ„: resolver ä¸­ Queryå’ŒMutation åªèƒ½æœ‰ä¸€ä¸ª\n\n### å¼€å§‹ä½¿ç”¨\n\n```typescript\nimport { ApolloServer } from 'apollo-server-fastify';\nimport * as fastify from 'fastify';\n\nconst gqlserver =  new ApolloServer({\n    typeDefs,\n    resolvers\n})\n\nfast.register(gqlserver.createHandler());\n\nfast.listen(3000, '0.0.0.0', async (err, address) => {\n    if (err) {\n        fast.log.error(err, address);\n    } else {\n        console.info(`service start success > ${address}`);\n    }\n})\n```\n\n## å‚è€ƒé“¾æ¥\n\n[](http://www.zhaiqianfeng.com/2017/06/learn-graphql-first-demo.html)\n\n[](http://www.zhaiqianfeng.com/2017/06/learn-graphql-type-system.html)\n\n[](http://www.zhaiqianfeng.com/2017/06/learn-graphql-action-by-javascript.html)\n","tags":["API"]},{"title":"clickhouseå­¦ä¹ ç¬”è®°","url":"/2019/10/11/clickhouse/","content":"\nClickHouseæ˜¯ä¸€ä¸ªç”¨äºè”æœºåˆ†æ(**OLAP**)çš„**åˆ—å¼**æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ(DBMS)ã€‚\n\n## Clickhouseä½¿ç”¨\n\n[å®˜ç½‘](https://clickhouse.yandex/)\n\n[å®˜æ–¹æ–‡æ¡£](https://clickhouse.yandex/docs/zh/)\n\n### å…¥é—¨(å•æœº)\n\nä½¿ç”¨dockeréƒ¨ç½²\n\n```sh\ndocker pull yandex/clickhouse-server:latest\ndocker run -d -p 8123:8123 -p 9000:9000 -p 9009:9009 --name clickhouse yandex/clickhouse-server:latest\n```\n\n> å…¶ä»–æ–¹å¼å®‰è£…å‚è€ƒ [éƒ¨ç½²è¿è¡Œ](https://clickhouse.yandex/docs/zh/getting_started/)\n\n1. é»˜è®¤æ²¡æœ‰ç”¨æˆ·, è®¾ç½®ç”¨æˆ·åå¯†ç å‚è€ƒ `/etc/clickhouse-server/users.xml` åšæ·»åŠ /ä¿®æ”¹\n2. é»˜è®¤æ•°æ®åº“ `default`\n3. è‡ªå®šä¹‰é…ç½®æ–‡ä»¶å¯ä»¥å­˜æ”¾åœ¨ `/etc/clickhouse-server/config.d` å’Œ `/etc/clickhouse-server/users.d` åˆ†åˆ«å¯¹åº” ç³»ç»Ÿé…ç½®/ç”¨æˆ·é…ç½®, è‡ªåŠ¨èåˆåˆ°ä¸»é…ç½®æ–‡ä»¶ä¸­\n\n### é›†ç¾¤\n\n#### å¤šå‰¯æœ¬\n\nåœ¨ `/etc/clickhouse-server/config.d` ä¸‹æ·»åŠ é…ç½®æ–‡ä»¶ `remote_servers.xml`, ä¾‹:\n\n```xml\n<yandex>\n    <remote_servers incl=\"clickhouse_remote_servers\" > <!--é›†ç¾¤èŠ‚ç‚¹é…ç½®-->\n        <test_clu> <!-- é›†ç¾¤åç§° -->\n            <shard> <!-- åˆ†ç‰‡1 -->\n                <internal_replication>false</internal_replication> <!-- æ’å…¥æ•°æ®æ—¶,å‘æ‰€æœ‰å‰¯æœ¬æ’å…¥æ•°æ® -->\n                <replica> <!-- å‰¯æœ¬1 -->\n                    <default_database>default</default_database>\n                    <host>${host_name}</host> <!--ip-->\n                    <port>9000</port>  <!--port-->\n                    <user>default</user> <!-- ç”¨æˆ·åå¯†ç .å¯é€‰ -->\n                    <password>123456</password>\n                </replica>\n                <replica> <!-- å‰¯æœ¬1 -->\n                    <default_database>default</default_database>\n                    <host>${host_name}</host>\n                    <port>9000</port>\n                    <user>default</user>\n                    <password>123456</password>\n                </replica>\n             </shard>\n         </test_clu>\n    </remote_servers>\n</yandex>\n```\n\n#### åˆ†å¸ƒå¼+å¤šå‰¯æœ¬+é«˜å¯ç”¨ (åŒæ­¥æ’å…¥)\n\n1. åœ¨ `/etc/clickhouse-server/config.d` ä¸‹æ·»åŠ é…ç½®æ–‡ä»¶ `remote_servers.xml`\n2. åœ¨ `/etc/clickhouse-server/config.d` ä¸‹æ·»åŠ é…ç½®æ–‡ä»¶ `zookeeper.xml`\n3. æ‰€æœ‰æœºå™¨éƒ½éœ€è¦åˆ›å»ºç›¸åŒçš„ `å‰¯æœ¬è¡¨ã€åˆ†å¸ƒå¼è¡¨`\n4. zookeeper ç”¨ä¸åˆ†å¸ƒå¼åè°ƒ\n5. åˆ†ç‰‡å‚æ•° `internal_replication` å¿…é¡»è®¾ç½®ä¸º true\n6. marcos.xml **æ¯ä¸ªå‰¯æœ¬éƒ½åº”è¯¥å”¯ä¸€**\n\nsqlå‚è€ƒ\n\n```sql\n--  åˆ›å»ºå‰¯æœ¬è¡¨\ncreate table if not exists default.c_user (\n    `id` int,\n    `name` Nullable(String),\n    `sex` int,\n    `address` Nullable(String),\n    `datetime` Date DEFAULT now()\n) ENGINE =MergeTree();\n\n-- åˆ›å»ºåˆ†å¸ƒå¼è¡¨\ncreate table if not exists default.user_all (\n    `id` int,\n    `name` Nullable(String),\n    `sex` int,\n    `address` Nullable(String),\n    `datetime` Date DEFAULT now()\n) engine = Distributed(test_clu, 'default', 'c_user', rand()); -- é›†ç¾¤åç§°, æ•°æ®åº“, å‰¯æœ¬è¡¨, é›†ç¾¤æ•°æ®åˆ†é…ç­–ç•¥\n```\n\n`remote_servers.xml` å‚è€ƒé…ç½®\n\n```xml\n<yandex>\n    <remote_servers incl=\"clickhouse_remote_servers\" >\n        <test_clu> <!-- é›†ç¾¤åç§° -->\n            <shard> <!-- åˆ†ç‰‡1 -->\n                <internal_replication>true</internal_replication> <!-- æ’å…¥æ•°æ®æ—¶,å‘æ‰€æœ‰å‰¯æœ¬æ’å…¥æ•°æ® -->\n                <replica> <!-- å‰¯æœ¬1 -->\n                    <default_database>default</default_database>\n                    <host>clickhouse_s1</host>\n                    <port>9000</port>\n                    <user>default</user>\n                    <password>123456</password>\n                </replica>\n                <replica> <!-- å‰¯æœ¬2 -->\n                    <default_database>default</default_database>\n                    <host>clickhouse_s3</host>\n                    <port>9000</port>\n                    <user>default</user>\n                    <password>123456</password>\n                </replica>\n             </shard>\n             <shard> <!-- åˆ†ç‰‡2 -->\n                <internal_replication>true</internal_replication>\n                <replica> <!-- å‰¯æœ¬1 -->\n                    <default_database>default</default_database>\n                    <host>clickhouse_s2</host>\n                    <port>9000</port>\n                    <user>default</user>\n                    <password>123456</password>\n                </replica>\n                <replica> <!-- å‰¯æœ¬2 -->\n                    <default_database>default</default_database>\n                    <host>clickhouse_s4</host>\n                    <port>9000</port>\n                    <user>default</user>\n                    <password>123456</password>\n                </replica>\n             </shard>\n         </test_clu>\n    </remote_servers>\n\n    <!-- æ•°æ®å‹ç¼©ç®—æ³• -->\n    <clickhouse_compression>\n        <case>\n            <min_part_size>10000000000</min_part_size>\n            <min_part_size_ratio>0.01</min_part_size_ratio>\n            <method>lz4</method>\n        </case>\n    </clickhouse_compression>\n</yandex>\n```\n\n`zookeeper.xml` å‚è€ƒé…ç½®\n\n```xml\n<yandex>\n    <zookeeper incl=\"zookeeper-servers\">\n        <node index=\"1\">\n            <host>clickhouse_zk0</host>\n            <port>2181</port>\n        </node>\n        <!-- å¤šèŠ‚ç‚¹é…ç½®\n        <node index=\"2\">\n            <host>clickhouse_zk1</host>\n            <port>2181</port>\n        </node>\n        -->\n    </zookeeper>\n</yandex>\n```\n\n#### åˆ†å¸ƒå¼+å¤šå‰¯æœ¬+é«˜å¯ç”¨ (å¤åˆ¶è¡¨)\n\nä¸Šé¢çš„åŸºç¡€ä¸Šå†åœ¨ `/etc/clickhouse-server/config.d` ä¸‹æ·»åŠ é…ç½®æ–‡ä»¶ `macros.xml`\n\nè¿™ä¸ªæ–¹å¼ä¸ä¸Šé¢*åŒæ­¥æ’å…¥*çš„åŒºåˆ«æ˜¯ *æ’å…¥æ•°æ®æ—¶,åªå‘ä¸€ä¸ªå‰¯æœ¬æ’å…¥,å…¶ä»–å‰¯æœ¬è‡ªåŠ¨å¤åˆ¶æ•°æ®*, æˆ‘ä»¬éœ€è¦å°†è¡¨å¼•æ“ç”±`MergeTree`æ”¹ä¸º`ReplicatedMergeTree`\n\nå‚è€ƒsql\n\n```sql\n--  åˆ›å»ºå‰¯æœ¬è¡¨\ncreate table if not exists default.c_user (\n    `id` int,\n    `name` Nullable(String),\n    `sex` int,\n    `address` Nullable(String),\n    `datetime` Date DEFAULT now()\n) ENGINE =ReplicatedMergeTree('/clickhouse/tables/{shard}/default/c_user', '{replica}',`datetime` ,(`datetime`,`id`),8192);\n-- {shard} ä¼šè‡ªåŠ¨ä» macros.xml ä¸­è·å–é…ç½®\n-- {replica} ä¼šè‡ªåŠ¨ä» macros.xml ä¸­è·å–é…ç½®\n-- `datetime` æ˜¯æ—¶é—´ç±»å‹çš„å­—æ®µ\n\n-- åˆ›å»ºåˆ†å¸ƒå¼è¡¨\ncreate table if not exists default.user_all (\n    `id` int,\n    `name` Nullable(String),\n    `sex` int,\n    `address` Nullable(String),\n    `datetime` Date DEFAULT now()\n) engine = Distributed(test_clu, 'default', 'c_user', rand());\n```\n\nmarcos.xml å‚è€ƒé…ç½®\n\n```xml\n<yandex>\n    <macros replace=\"replace\">\n        <shard>SHARD_NAME</shard> <!--é›†ç¾¤ID-->\n        <replica>REPLICA_NAME</replica> <!--å‰¯æœ¬ID-->\n    </macros>\n</yandex>\n```\n\n> **æ¯ä¸ªå‰¯æœ¬éƒ½åº”è¯¥å”¯ä¸€**\n\n## æ€»ç»“\n\nclickhouseç”¨äºå¤§æ•°æ®æŸ¥è¯¢, å ç”¨ç©ºé—´å°‘, æŸ¥è¯¢é€Ÿåº¦å¿«\n","tags":["æ•°æ®åº“"]},{"title":"cronè¡¨è¾¾å¼","url":"/2019/07/17/cron/","content":"\ncronè¡¨è¾¾å¼å¸¸ç”¨äºè°ƒåº¦ä»»åŠ¡\n\næœ¬æ–‡æ‘˜è‡ª:[cronè¡¨è¾¾å¼è¯¦è§£](https://www.cnblogs.com/javahr/p/8318728.html)\n\n## ç»“æ„\n\ncornä»å·¦åˆ°å³ï¼ˆç”¨ç©ºæ ¼éš”å¼€ï¼‰ï¼šç§’ åˆ† å°æ—¶ æ—¥æœŸ æœˆä»½ æ˜ŸæœŸ [å¹´ä»½]\n\n## å„å­—æ®µçš„å«ä¹‰\n\nå­—æ®µ|å…è®¸å€¼|å…è®¸çš„ç‰¹æ®Šå­—ç¬¦\n:-------:|:---------------------:|:------------------:\nç§’ï¼ˆSecondsï¼‰|0~59çš„æ•´æ•°|, - * /    å››ä¸ªå­—ç¬¦\nåˆ†ï¼ˆMinutesï¼‰|0~59çš„æ•´æ•°|, - * /    å››ä¸ªå­—ç¬¦\nå°æ—¶ï¼ˆHoursï¼‰|0~23çš„æ•´æ•°|, - * /    å››ä¸ªå­—ç¬¦\næ—¥æœŸï¼ˆDayofMonthï¼‰|1~31çš„æ•´æ•°ï¼ˆä½†æ˜¯ä½ éœ€è¦è€ƒè™‘ä½ æœˆçš„å¤©æ•°ï¼‰|,- * ? / L W C     å…«ä¸ªå­—ç¬¦\næœˆä»½ï¼ˆMonthï¼‰|1~12çš„æ•´æ•°æˆ–è€… JAN-DEC|, - * /    å››ä¸ªå­—ç¬¦\næ˜ŸæœŸï¼ˆDayofWeekï¼‰|1~7çš„æ•´æ•°æˆ–è€… SUN-SAT ï¼ˆ1=SUNï¼‰|, - * ? / L C #     å…«ä¸ªå­—ç¬¦\nå¹´(å¯é€‰ï¼Œç•™ç©º)ï¼ˆYearï¼‰|1970~2099|, - * /    å››ä¸ªå­—ç¬¦\n\n## æ³¨æ„äº‹é¡¹\n\næ¯ä¸€ä¸ªåŸŸéƒ½ä½¿ç”¨æ•°å­—ï¼Œä½†è¿˜å¯ä»¥å‡ºç°å¦‚ä¸‹ç‰¹æ®Šå­—ç¬¦ï¼Œå®ƒä»¬çš„å«ä¹‰æ˜¯:\n\n1. *ï¼šè¡¨ç¤ºåŒ¹é…è¯¥åŸŸçš„ä»»æ„å€¼ã€‚å‡å¦‚åœ¨MinutesåŸŸä½¿ç”¨*, å³è¡¨ç¤ºæ¯åˆ†é’Ÿéƒ½ä¼šè§¦å‘äº‹ä»¶ã€‚\n2. ?ï¼šåªèƒ½ç”¨åœ¨DayofMonthå’ŒDayofWeekä¸¤ä¸ªåŸŸã€‚å®ƒä¹ŸåŒ¹é…åŸŸçš„ä»»æ„å€¼ï¼Œä½†å®é™…ä¸ä¼šã€‚å› ä¸ºDayofMonthå’ŒDayofWeekä¼šç›¸äº’å½±å“ã€‚ä¾‹å¦‚æƒ³åœ¨æ¯æœˆçš„20æ—¥è§¦å‘è°ƒåº¦ï¼Œä¸ç®¡20æ—¥åˆ°åº•æ˜¯æ˜ŸæœŸå‡ ï¼Œåˆ™åªèƒ½ä½¿ç”¨å¦‚ä¸‹å†™æ³•ï¼š 13 13 15 20 * ?, å…¶ä¸­æœ€åä¸€ä½åªèƒ½ç”¨ï¼Ÿï¼Œè€Œä¸èƒ½ä½¿ç”¨*ï¼Œå¦‚æœä½¿ç”¨*è¡¨ç¤ºä¸ç®¡æ˜ŸæœŸå‡ éƒ½ä¼šè§¦å‘ï¼Œå®é™…ä¸Šå¹¶ä¸æ˜¯è¿™æ ·ã€‚\n3. -ï¼šè¡¨ç¤ºèŒƒå›´ã€‚ä¾‹å¦‚åœ¨MinutesåŸŸä½¿ç”¨5-20ï¼Œè¡¨ç¤ºä»5åˆ†åˆ°20åˆ†é’Ÿæ¯åˆ†é’Ÿè§¦å‘ä¸€æ¬¡\n4. /ï¼šè¡¨ç¤ºèµ·å§‹æ—¶é—´å¼€å§‹è§¦å‘ï¼Œç„¶åæ¯éš”å›ºå®šæ—¶é—´è§¦å‘ä¸€æ¬¡ã€‚ä¾‹å¦‚åœ¨MinutesåŸŸä½¿ç”¨5/20,åˆ™æ„å‘³ç€ä»5åˆ†å¼€å§‹æ¯20åˆ†é’Ÿè§¦å‘ä¸€æ¬¡\n5. ,ï¼šè¡¨ç¤ºåˆ—å‡ºæšä¸¾å€¼ã€‚ä¾‹å¦‚ï¼šåœ¨MinutesåŸŸä½¿ç”¨5,20ï¼Œåˆ™æ„å‘³ç€åœ¨5å’Œ20åˆ†æ¯åˆ†é’Ÿè§¦å‘ä¸€æ¬¡ã€‚\n6. Lï¼šè¡¨ç¤ºæœ€åï¼Œåªèƒ½å‡ºç°åœ¨DayofWeekå’ŒDayofMonthåŸŸã€‚å¦‚æœåœ¨DayofWeekåŸŸä½¿ç”¨5L,æ„å‘³ç€åœ¨æœ€åçš„ä¸€ä¸ªæ˜ŸæœŸå››è§¦å‘ã€‚\n7. W:è¡¨ç¤ºæœ‰æ•ˆå·¥ä½œæ—¥(å‘¨ä¸€åˆ°å‘¨äº”),åªèƒ½å‡ºç°åœ¨DayofMonthåŸŸï¼Œç³»ç»Ÿå°†åœ¨ç¦»æŒ‡å®šæ—¥æœŸçš„æœ€è¿‘çš„æœ‰æ•ˆå·¥ä½œæ—¥è§¦å‘äº‹ä»¶ã€‚ä¾‹å¦‚ï¼šåœ¨ DayofMonthä½¿ç”¨5Wï¼Œå¦‚æœ5æ—¥æ˜¯æ˜ŸæœŸå…­ï¼Œåˆ™å°†åœ¨æœ€è¿‘çš„å·¥ä½œæ—¥ï¼šæ˜ŸæœŸäº”ï¼Œå³4æ—¥è§¦å‘ã€‚å¦‚æœ5æ—¥æ˜¯æ˜ŸæœŸå¤©ï¼Œåˆ™åœ¨6æ—¥(å‘¨ä¸€)è§¦å‘ï¼›å¦‚æœ5æ—¥åœ¨æ˜ŸæœŸä¸€åˆ°æ˜ŸæœŸäº”ä¸­çš„ä¸€å¤©ï¼Œåˆ™å°±åœ¨5æ—¥è§¦å‘ã€‚å¦å¤–ä¸€ç‚¹ï¼ŒWçš„æœ€è¿‘å¯»æ‰¾ä¸ä¼šè·¨è¿‡æœˆä»½ ã€‚\n8. LW:è¿™ä¸¤ä¸ªå­—ç¬¦å¯ä»¥è¿ç”¨ï¼Œè¡¨ç¤ºåœ¨æŸä¸ªæœˆæœ€åä¸€ä¸ªå·¥ä½œæ—¥ï¼Œå³æœ€åä¸€ä¸ªæ˜ŸæœŸäº”ã€‚\n9. #:ç”¨äºç¡®å®šæ¯ä¸ªæœˆç¬¬å‡ ä¸ªæ˜ŸæœŸå‡ ï¼Œåªèƒ½å‡ºç°åœ¨DayofMonthåŸŸã€‚ä¾‹å¦‚åœ¨4#2ï¼Œè¡¨ç¤ºæŸæœˆçš„ç¬¬äºŒä¸ªæ˜ŸæœŸä¸‰ã€‚\n\n## å¸¸ç”¨è¡¨è¾¾å¼ä¾‹å­\n\n1. 0 0 2 1 * ? *   è¡¨ç¤ºåœ¨æ¯æœˆçš„1æ—¥çš„å‡Œæ™¨2ç‚¹è°ƒæ•´ä»»åŠ¡\n2. 0 15 10 ? * MON-FRI   è¡¨ç¤ºå‘¨ä¸€åˆ°å‘¨äº”æ¯å¤©ä¸Šåˆ10:15æ‰§è¡Œä½œä¸š\n3. 0 15 10 ? 6L 2002-2006   è¡¨ç¤º2002-2006å¹´çš„æ¯ä¸ªæœˆçš„æœ€åä¸€ä¸ªæ˜ŸæœŸäº”ä¸Šåˆ10:15æ‰§è¡Œä½œ\n4. 0 0 10,14,16 * * ?   æ¯å¤©ä¸Šåˆ10ç‚¹ï¼Œä¸‹åˆ2ç‚¹ï¼Œ4ç‚¹\n5. 0 0/30 9-17 * * ?   æœä¹æ™šäº”å·¥ä½œæ—¶é—´å†…æ¯åŠå°æ—¶\n6. 0 0 12 ? * WED    è¡¨ç¤ºæ¯ä¸ªæ˜ŸæœŸä¸‰ä¸­åˆ12ç‚¹\n7. 0 0 12 * * ?   æ¯å¤©ä¸­åˆ12ç‚¹è§¦å‘\n8. 0 15 10 ? * *    æ¯å¤©ä¸Šåˆ10:15è§¦å‘\n9. 0 15 10 * * ?     æ¯å¤©ä¸Šåˆ10:15è§¦å‘\n10. 0 15 10 * * ? *    æ¯å¤©ä¸Šåˆ10:15è§¦å‘\n11. 0 15 10 * * ? 2005    2005å¹´çš„æ¯å¤©ä¸Šåˆ10:15è§¦å‘\n12. 0 * 14 * * ?     åœ¨æ¯å¤©ä¸‹åˆ2ç‚¹åˆ°ä¸‹åˆ2:59æœŸé—´çš„æ¯1åˆ†é’Ÿè§¦å‘\n13. 0 0/5 14 * * ?    åœ¨æ¯å¤©ä¸‹åˆ2ç‚¹åˆ°ä¸‹åˆ2:55æœŸé—´çš„æ¯5åˆ†é’Ÿè§¦å‘\n14. 0 0/5 14,18 * * ?     åœ¨æ¯å¤©ä¸‹åˆ2ç‚¹åˆ°2:55æœŸé—´å’Œä¸‹åˆ6ç‚¹åˆ°6:55æœŸé—´çš„æ¯5åˆ†é’Ÿè§¦å‘\n15. 0 0-5 14 * * ?    åœ¨æ¯å¤©ä¸‹åˆ2ç‚¹åˆ°ä¸‹åˆ2:05æœŸé—´çš„æ¯1åˆ†é’Ÿè§¦å‘\n16. 0 10,44 14 ? 3 WED    æ¯å¹´ä¸‰æœˆçš„æ˜ŸæœŸä¸‰çš„ä¸‹åˆ2:10å’Œ2:44è§¦å‘\n17. 0 15 10 ? * MON-FRI    å‘¨ä¸€è‡³å‘¨äº”çš„ä¸Šåˆ10:15è§¦å‘\n18. 0 15 10 15 * ?    æ¯æœˆ15æ—¥ä¸Šåˆ10:15è§¦å‘\n19. 0 15 10 L * ?    æ¯æœˆæœ€åä¸€æ—¥çš„ä¸Šåˆ10:15è§¦å‘\n20. 0 15 10 ? * 6L    æ¯æœˆçš„æœ€åä¸€ä¸ªæ˜ŸæœŸäº”ä¸Šåˆ10:15è§¦å‘\n21. 0 15 10 ? * 6L 2002-2005   2002å¹´è‡³2005å¹´çš„æ¯æœˆçš„æœ€åä¸€ä¸ªæ˜ŸæœŸäº”ä¸Šåˆ10:15è§¦å‘\n22. 0 15 10 ? * 6#3   æ¯æœˆçš„ç¬¬ä¸‰ä¸ªæ˜ŸæœŸäº”ä¸Šåˆ10:15è§¦å‘\n\n## æœ€å\n\næœ‰äº›å­è¡¨è¾¾å¼èƒ½åŒ…å«ä¸€äº›èŒƒå›´æˆ–åˆ—è¡¨\n\nä¾‹å¦‚ï¼šå­è¡¨è¾¾å¼ï¼ˆå¤©ï¼ˆæ˜ŸæœŸï¼‰ï¼‰å¯ä»¥ä¸º â€œMON-FRIâ€ï¼Œâ€œMONï¼ŒWEDï¼ŒFRIâ€ï¼Œâ€œMON-WED,SATâ€\n\nâ€œ*â€å­—ç¬¦ä»£è¡¨æ‰€æœ‰å¯èƒ½çš„å€¼\n\nå› æ­¤ï¼Œâ€œ*â€åœ¨å­è¡¨è¾¾å¼ï¼ˆæœˆï¼‰é‡Œè¡¨ç¤ºæ¯ä¸ªæœˆçš„å«ä¹‰ï¼Œâ€œ*â€åœ¨å­è¡¨è¾¾å¼ï¼ˆå¤©ï¼ˆæ˜ŸæœŸï¼‰ï¼‰è¡¨ç¤ºæ˜ŸæœŸçš„æ¯ä¸€å¤©\n\nâ€œ/â€å­—ç¬¦ç”¨æ¥æŒ‡å®šæ•°å€¼çš„å¢é‡ \nä¾‹å¦‚ï¼šåœ¨å­è¡¨è¾¾å¼ï¼ˆåˆ†é’Ÿï¼‰é‡Œçš„â€œ0/15â€è¡¨ç¤ºä»ç¬¬0åˆ†é’Ÿå¼€å§‹ï¼Œæ¯15åˆ†é’Ÿ \nåœ¨å­è¡¨è¾¾å¼ï¼ˆåˆ†é’Ÿï¼‰é‡Œçš„â€œ3/20â€è¡¨ç¤ºä»ç¬¬3åˆ†é’Ÿå¼€å§‹ï¼Œæ¯20åˆ†é’Ÿï¼ˆå®ƒå’Œâ€œ3ï¼Œ23ï¼Œ43â€ï¼‰çš„å«ä¹‰ä¸€æ ·\n\nâ€œï¼Ÿâ€å­—ç¬¦ä»…è¢«ç”¨äºå¤©ï¼ˆæœˆï¼‰å’Œå¤©ï¼ˆæ˜ŸæœŸï¼‰ä¸¤ä¸ªå­è¡¨è¾¾å¼ï¼Œè¡¨ç¤ºä¸æŒ‡å®šå€¼ \nå½“2ä¸ªå­è¡¨è¾¾å¼å…¶ä¸­ä¹‹ä¸€è¢«æŒ‡å®šäº†å€¼ä»¥åï¼Œä¸ºäº†é¿å…å†²çªï¼Œéœ€è¦å°†å¦ä¸€ä¸ªå­è¡¨è¾¾å¼çš„å€¼è®¾ä¸ºâ€œï¼Ÿâ€\n\nâ€œLâ€ å­—ç¬¦ä»…è¢«ç”¨äºå¤©ï¼ˆæœˆï¼‰å’Œå¤©ï¼ˆæ˜ŸæœŸï¼‰ä¸¤ä¸ªå­è¡¨è¾¾å¼ï¼Œå®ƒæ˜¯å•è¯â€œlastâ€çš„ç¼©å†™ \nä½†æ˜¯å®ƒåœ¨ä¸¤ä¸ªå­è¡¨è¾¾å¼é‡Œçš„å«ä¹‰æ˜¯ä¸åŒçš„ã€‚ \nåœ¨å¤©ï¼ˆæœˆï¼‰å­è¡¨è¾¾å¼ä¸­ï¼Œâ€œLâ€è¡¨ç¤ºä¸€ä¸ªæœˆçš„æœ€åä¸€å¤© \nåœ¨å¤©ï¼ˆæ˜ŸæœŸï¼‰è‡ªè¡¨è¾¾å¼ä¸­ï¼Œâ€œLâ€è¡¨ç¤ºä¸€ä¸ªæ˜ŸæœŸçš„æœ€åä¸€å¤©ï¼Œä¹Ÿå°±æ˜¯SAT\n\nå¦‚æœåœ¨â€œLâ€å‰æœ‰å…·ä½“çš„å†…å®¹ï¼Œå®ƒå°±å…·æœ‰å…¶ä»–çš„å«ä¹‰äº†\n\nä¾‹å¦‚ï¼šâ€œ6Lâ€è¡¨ç¤ºè¿™ä¸ªæœˆçš„å€’æ•°ç¬¬ï¼–å¤©ï¼Œâ€œFRILâ€è¡¨ç¤ºè¿™ä¸ªæœˆçš„æœ€ä¸€ä¸ªæ˜ŸæœŸäº” \næ³¨æ„ï¼šåœ¨ä½¿ç”¨â€œLâ€å‚æ•°æ—¶ï¼Œä¸è¦æŒ‡å®šåˆ—è¡¨æˆ–èŒƒå›´ï¼Œå› ä¸ºè¿™ä¼šå¯¼è‡´é—®é¢˜\n","tags":["cron"]},{"title":"æ­£åˆ™è¡¨è¾¾å¼","url":"/2019/07/17/regular/","content":"\nå­¦ä¹ æ­£åˆ™è¡¨è¾¾å¼\n\n[æ­£åˆ™è¡¨è¾¾å¼30åˆ†é’Ÿå…¥é—¨æ•™ç¨‹](https://deerchao.net/tutorials/regex/regex.htm)\n\n[Python - 100å¤©ä»æ–°æ‰‹åˆ°å¤§å¸ˆ](https://github.com/jackfrued/Python-100-Days)\n\n## åŸºæœ¬\n\nç¬¦å·|è§£é‡Š|ç¤ºä¾‹|è¯´æ˜\n:----:|:---------------------:|:----------------------------:|:----------------------------:\n.|åŒ¹é…ä»»æ„å­—ç¬¦|b.t|å¯ä»¥åŒ¹é…bat / but / b#t / b1tç­‰\n\\w|åŒ¹é…å­—æ¯/æ•°å­—/ä¸‹åˆ’çº¿|b\\wt|å¯ä»¥åŒ¹é…bat / b1t / b_tç­‰ä½†ä¸èƒ½åŒ¹é…b#t\n\\s|åŒ¹é…ç©ºç™½å­—ç¬¦ï¼ˆåŒ…æ‹¬\\rã€\\nã€\\tç­‰ï¼‰|love\\syou|å¯ä»¥åŒ¹é…love you\n\\d|åŒ¹é…æ•°å­—|\\d\\d|å¯ä»¥åŒ¹é…01 / 23 / 99ç­‰\n\\b|åŒ¹é…å•è¯çš„è¾¹ç•Œ|\\bThe\\b|\n^|åŒ¹é…å­—ç¬¦ä¸²çš„å¼€å§‹|^The|å¯ä»¥åŒ¹é…Theå¼€å¤´çš„å­—ç¬¦ä¸²\n$|åŒ¹é…å­—ç¬¦ä¸²çš„ç»“æŸ|.exe$|å¯ä»¥åŒ¹é….exeç»“å°¾çš„å­—ç¬¦ä¸²\n\\W|åŒ¹é…éå­—æ¯/æ•°å­—/ä¸‹åˆ’çº¿|b\\Wt|å¯ä»¥åŒ¹é…b#t / b@tç­‰ä½†ä¸èƒ½åŒ¹é…but / b1t / b_tç­‰\n\\S|åŒ¹é…éç©ºç™½å­—ç¬¦|love\\Syou|å¯ä»¥åŒ¹é…love#youç­‰ä½†ä¸èƒ½åŒ¹é…love you\n\\D|åŒ¹é…éæ•°å­—|\\d\\D|å¯ä»¥åŒ¹é…9a / 3# / 0Fç­‰\n\\B|åŒ¹é…éå•è¯è¾¹ç•Œ|\\Bio\\B|\n[]|åŒ¹é…æ¥è‡ªå­—ç¬¦é›†çš„ä»»æ„å•ä¸€å­—ç¬¦|[aeiou]|å¯ä»¥åŒ¹é…ä»»ä¸€å…ƒéŸ³å­—æ¯å­—ç¬¦\n[^]|åŒ¹é…ä¸åœ¨å­—ç¬¦é›†ä¸­çš„ä»»æ„å•ä¸€å­—ç¬¦|[^aeiou]|å¯ä»¥åŒ¹é…ä»»ä¸€éå…ƒéŸ³å­—æ¯å­—ç¬¦\n*|åŒ¹é…0æ¬¡æˆ–å¤šæ¬¡|\\w*|\n+|åŒ¹é…1æ¬¡æˆ–å¤šæ¬¡|\\w+|\n?|åŒ¹é…0æ¬¡æˆ–1æ¬¡|\\w?|\n{N}|åŒ¹é…Næ¬¡|\\w{3}|\n{M,}|åŒ¹é…è‡³å°‘Mæ¬¡|\\w{3,}|\n{M,N}|åŒ¹é…è‡³å°‘Mæ¬¡è‡³å¤šNæ¬¡|\\w{3,6}|\n\\||åˆ†æ”¯|foo|bar|å¯ä»¥åŒ¹é…fooæˆ–è€…bar\n(?#)|æ³¨é‡Š||\n(exp)|åŒ¹é…expå¹¶æ•è·åˆ°è‡ªåŠ¨å‘½åçš„ç»„ä¸­||\n(?<name>exp)|åŒ¹é…expå¹¶æ•è·åˆ°åä¸ºnameçš„ç»„ä¸­||\n(?:exp)|åŒ¹é…expä½†æ˜¯ä¸æ•è·åŒ¹é…çš„æ–‡æœ¬||\n(?=exp)|åŒ¹é…expå‰é¢çš„ä½ç½®|\\b\\w+(?=ing)|å¯ä»¥åŒ¹é…I'm dancingä¸­çš„danc\n(?<=exp)|åŒ¹é…expåé¢çš„ä½ç½®|(?<=\\bdanc)\\w+\\b|å¯ä»¥åŒ¹é…I love dancing and readingä¸­çš„ç¬¬ä¸€ä¸ªing\n(?!exp)|åŒ¹é…åé¢ä¸æ˜¯expçš„ä½ç½®||\n(?<!exp)|åŒ¹é…å‰é¢ä¸æ˜¯expçš„ä½ç½®||\n*?|é‡å¤ä»»æ„æ¬¡ï¼Œä½†å°½å¯èƒ½å°‘é‡å¤|a.*b\na.*?b|å°†æ­£åˆ™è¡¨è¾¾å¼åº”ç”¨äºaababï¼Œå‰è€…ä¼šåŒ¹é…æ•´ä¸ªå­—ç¬¦ä¸²aababï¼Œåè€…ä¼šåŒ¹é…aabå’Œabä¸¤ä¸ªå­—ç¬¦ä¸²\n+?|é‡å¤1æ¬¡æˆ–å¤šæ¬¡ï¼Œä½†å°½å¯èƒ½å°‘é‡å¤||\n??|é‡å¤0æ¬¡æˆ–1æ¬¡ï¼Œä½†å°½å¯èƒ½å°‘é‡å¤||\n{M,N}?|é‡å¤Måˆ°Næ¬¡ï¼Œä½†å°½å¯èƒ½å°‘é‡å¤||\n{M,}?|é‡å¤Mæ¬¡ä»¥ä¸Šï¼Œä½†å°½å¯èƒ½å°‘é‡å¤||\n"},{"title":"Python3 å­¦ä¹ ","url":"/2019/07/04/python3/","content":"\næœ¬ç¯‡åšå®¢å­¦ä¹ æ€»ç»“äº[Python - 100å¤©ä»æ–°æ‰‹åˆ°å¤§å¸ˆ](https://github.com/jackfrued/Python-100-Days)\n\n## Pythonæ˜¯ä¸€ä¸ªâ€œä¼˜é›…â€ã€â€œæ˜ç¡®â€ã€â€œç®€å•â€çš„ç¼–ç¨‹è¯­è¨€\n\nç»™åˆå­¦è€…çš„å»ºè®®:\n\n1. Make English as your working language.\n2. Practice makes perfect.\n3. All experience comes from mistakes.\n4. Don't be one of the leeches.\n5. Either stand out or kicked out.\n\n## PythonåŸºç¡€æ•°æ®ç±»å‹\n\n1. æ•´æ•°\n2. å­—ç¬¦ä¸²\n3. æµ®ç‚¹æ•°\n4. True/False\n5. None\n\n## Pythonæ•°æ®ç»“æ„\n\n1. Listï¼ˆåˆ—è¡¨ï¼‰: æ•°ç»„\n2. Tupleï¼ˆå…ƒç»„ï¼‰: ä¸å¯ä¿®æ”¹åˆ—è¡¨\n3. Setï¼ˆé›†åˆï¼‰: åŒæ•°å­¦ä¸­çš„é›†åˆ, ä¸å¯é‡å¤, å¯ä»¥æŠ€æœ¯ äº¤é›†ã€å¹¶é›†ã€å·®é›†ç­‰è¿ç®—\n4. Dictionaryï¼ˆå­—å…¸ï¼‰: æ¯ä¸€ä¸ªå…ƒç´ éƒ½æ˜¯ç”± â€œé”®å€¼å¯¹â€ ç»„æˆ\n\n## å­—ç¬¦ä¸²æ ¼å¼åŒ–ä»£ç \n\nå‚æ•°|è¯´æ˜\n:----:|:----------------------------:\n%%|ç™¾åˆ†å·æ ‡è®°\n%c|å­—ç¬¦åŠå…¶ASCIIç \n%s|å­—ç¬¦ä¸²\n%d|æœ‰ç¬¦å·æ•´æ•°(åè¿›åˆ¶)\n%u|æ— ç¬¦å·æ•´æ•°(åè¿›åˆ¶)\n%o|æ— ç¬¦å·æ•´æ•°(å…«è¿›åˆ¶)\n%x|æ— ç¬¦å·æ•´æ•°(åå…­è¿›åˆ¶)\n%X|æ— ç¬¦å·æ•´æ•°(åå…­è¿›åˆ¶å¤§å†™å­—ç¬¦)\n%e|æµ®ç‚¹æ•°å­—(ç§‘å­¦è®¡æ•°æ³•)\n%E|æµ®ç‚¹æ•°å­—(ç§‘å­¦è®¡æ•°æ³•ï¼Œç”¨Eä»£æ›¿e)\n%f|æµ®ç‚¹æ•°å­—(ç”¨å°æ•°ç‚¹ç¬¦å·)\n%g|æµ®ç‚¹æ•°å­—(æ ¹æ®å€¼çš„å¤§å°é‡‡ç”¨%eæˆ–%f)\n%G|æµ®ç‚¹æ•°å­—(ç±»ä¼¼äº%g)\n%p|æŒ‡é’ˆ(ç”¨åå…­è¿›åˆ¶æ‰“å°å€¼çš„å†…å­˜åœ°å€)\n%n|å­˜å‚¨è¾“å‡ºå­—ç¬¦çš„æ•°é‡æ”¾è¿›å‚æ•°åˆ—è¡¨çš„ä¸‹ä¸€ä¸ªå˜é‡ä¸­\n\n## ç®—æœ¯è¿ç®—ç¬¦\n\nè¿ç®—ç¬¦|æè¿°|å®ä¾‹\n:------:|:--------------------:|:----------:\n+|åŠ  - ä¸¤ä¸ªå¯¹è±¡ç›¸åŠ |a + b è¾“å‡ºç»“æœ 31\n-|å‡ - å¾—åˆ°è´Ÿæ•°æˆ–æ˜¯ä¸€ä¸ªæ•°å‡å»å¦ä¸€ä¸ªæ•°|a - b è¾“å‡ºç»“æœ -11\n*|ä¹˜ - ä¸¤ä¸ªæ•°ç›¸ä¹˜æˆ–æ˜¯è¿”å›ä¸€ä¸ªè¢«é‡å¤è‹¥å¹²æ¬¡çš„å­—ç¬¦ä¸²|a * b è¾“å‡ºç»“æœ 210\n/|é™¤ - x é™¤ä»¥ y|b / a è¾“å‡ºç»“æœ 2.1\n%|å–æ¨¡ - è¿”å›é™¤æ³•çš„ä½™æ•°|b % a è¾“å‡ºç»“æœ 1\n**|å¹‚ - è¿”å›xçš„yæ¬¡å¹‚|a**b ä¸º10çš„21æ¬¡æ–¹\n//|å–æ•´é™¤ - å‘ä¸‹å–æ¥è¿‘é™¤æ•°çš„æ•´æ•°|9//2 = 4; -9//2 = -5\n\n## ç‰¹æ®Šè¿ç®—ç¬¦\n\nè¿ç®—ç¬¦|æè¿°\n:-----:|:--------------------:\n&|åœ¨setæ±‚äº¤é›†çš„æ—¶å€™,åŒset1.intersection(set2)\n\\||åœ¨setæ±‚å¹¶é›†çš„æ—¶å€™,åŒset1.union(set2)\n-|åœ¨setæ±‚å·®é›†çš„æ—¶å€™,åŒset1.difference(set2)\n^|åœ¨setæ±‚å¯¹ç§°å·®çš„æ—¶å€™,åŒset1.symmetric_difference(set2)\n\n## æ–‡ä»¶æ“ä½œç¬¦\n\n### pythonå†…ç½®çš„ `open` å‡½æ•°\n\næ“ä½œæ¨¡å¼|å…·ä½“å«ä¹‰\n:----:|:--------------------:\n'r'|è¯»å– ï¼ˆé»˜è®¤ï¼‰\n'w'|å†™å…¥ï¼ˆä¼šå…ˆæˆªæ–­ä¹‹å‰çš„å†…å®¹ï¼‰\n'x'|å†™å…¥ï¼Œå¦‚æœæ–‡ä»¶å·²ç»å­˜åœ¨ä¼šäº§ç”Ÿå¼‚å¸¸\n'a'|è¿½åŠ ï¼Œå°†å†…å®¹å†™å…¥åˆ°å·²æœ‰æ–‡ä»¶çš„æœ«å°¾\n'b'|äºŒè¿›åˆ¶æ¨¡å¼\n't'|æ–‡æœ¬æ¨¡å¼ï¼ˆé»˜è®¤ï¼‰\n'+'|æ›´æ–°ï¼ˆæ—¢å¯ä»¥è¯»åˆå¯ä»¥å†™ï¼‰\n\n### pythonçš„`JSON`æ¨¡å—\n\nå¸¸ç”¨çš„å››ä¸ªå‡½æ•°\n\n+ dump - å°†Pythonå¯¹è±¡æŒ‰ç…§JSONæ ¼å¼åºåˆ—åŒ–åˆ°æ–‡ä»¶ä¸­\n+ dumps - å°†Pythonå¯¹è±¡å¤„ç†æˆJSONæ ¼å¼çš„å­—ç¬¦ä¸²\n+ load - å°†æ–‡ä»¶ä¸­çš„JSONæ•°æ®ååºåˆ—åŒ–æˆå¯¹è±¡\n+ loads - å°†å­—ç¬¦ä¸²çš„å†…å®¹ååºåˆ—åŒ–æˆPythonå¯¹è±¡\n\nè¿™é‡Œå‡ºç°äº†ä¸¤ä¸ªæ¦‚å¿µï¼Œä¸€ä¸ªå«åºåˆ—åŒ–ï¼Œä¸€ä¸ªå«ååºåˆ—åŒ–ã€‚è‡ªç”±çš„ç™¾ç§‘å…¨ä¹¦ç»´åŸºç™¾ç§‘ä¸Šå¯¹è¿™ä¸¤ä¸ªæ¦‚å¿µæ˜¯è¿™æ ·è§£é‡Šçš„ï¼šâ€œåºåˆ—åŒ–ï¼ˆserializationï¼‰åœ¨è®¡ç®—æœºç§‘å­¦çš„æ•°æ®å¤„ç†ä¸­ï¼Œæ˜¯æŒ‡å°†æ•°æ®ç»“æ„æˆ–å¯¹è±¡çŠ¶æ€è½¬æ¢ä¸ºå¯ä»¥å­˜å‚¨æˆ–ä¼ è¾“çš„å½¢å¼ï¼Œè¿™æ ·åœ¨éœ€è¦çš„æ—¶å€™èƒ½å¤Ÿæ¢å¤åˆ°åŸå…ˆçš„çŠ¶æ€ï¼Œè€Œä¸”é€šè¿‡åºåˆ—åŒ–çš„æ•°æ®é‡æ–°è·å–å­—èŠ‚æ—¶ï¼Œå¯ä»¥åˆ©ç”¨è¿™äº›å­—èŠ‚æ¥äº§ç”ŸåŸå§‹å¯¹è±¡çš„å‰¯æœ¬ï¼ˆæ‹·è´ï¼‰ã€‚ä¸è¿™ä¸ªè¿‡ç¨‹ç›¸åçš„åŠ¨ä½œï¼Œå³ä»ä¸€ç³»åˆ—å­—èŠ‚ä¸­æå–æ•°æ®ç»“æ„çš„æ“ä½œï¼Œå°±æ˜¯ååºåˆ—åŒ–ï¼ˆdeserializationï¼‰â€ã€‚\n\n### å®é™…æ“ä½œ\n\n```python\n#!/usr/local/bin/python3\n\"\"\"\næ–‡ä»¶æ“ä½œå’Œå¼‚å¸¸å¤„ç†åŠJSONæ•°æ®\n\"\"\"\n\nimport json\n\n\ndef read():\n    \"\"\"è¯»å–æ–‡ä»¶\"\"\"\n    try:\n        fs = open('a.txt', 'r', encoding='utf-8')\n        print(fs.read())\n    except FileNotFoundError:\n        print('æ–‡ä»¶ä¸å­˜åœ¨')\n    finally:\n        if fs:\n            fs.close()\n\n\ndef writh(cmd='w'):\n    \"\"\"å†™æ–‡ä»¶\"\"\"\n    try:\n        txt = (x for x in range(600, 1000))\n        fs = open('b.txt', cmd, encoding='utf-8')\n        for t in txt:\n            fs.write(str(t) + '\\n')\n    except IOError:\n        print('IOå¼‚å¸¸')\n    finally:\n        if fs:\n            fs.close()\n\n\ndef with_def():\n    \"\"\"\n    ä½¿ç”¨withå…³é”®å­—,æŒ‡å®šæ–‡ä»¶å¯¹è±¡çš„ä¸Šä¸‹æ–‡ç¯å¢ƒå¹¶åœ¨ç¦»å¼€ä¸Šä¸‹æ–‡ç¯å¢ƒæ—¶è‡ªåŠ¨é‡Šæ”¾æ–‡ä»¶èµ„æº\n    \"\"\"\n    try:\n        \"\"\"ä¸€æ¬¡è¯»å–æ‰€æœ‰æ–‡ä»¶\"\"\"\n        with open('a.txt', 'r', encoding='utf-8') as f1:\n            print(f1.read())\n\n        \"\"\"ä½¿ç”¨for-iné€è¡Œè¯»å–\"\"\"\n        with open('a.txt', encoding='utf-8', mode='r') as f2:\n            for line in f2:\n                print(line, end='')\n    except Exception:\n        print('é”™è¯¯', Exception)\n\n\ndef buffer_file_def():\n    \"\"\"è¯»å–äºŒè¿›åˆ¶æ–‡ä»¶(æ‹·è´å›¾ç‰‡)\"\"\"\n    try:\n        \"\"\"å¤åˆ¶æ–‡ä»¶\"\"\"\n        with open('/Users/aolei/Pictures/my images/32916897.jpg', mode='rb') as f:\n            data = f.read()\n            print(data)\n\n        \"\"\"ç²˜è´´åˆ°å½“å‰ç›®å½•ä¸‹\"\"\"\n        with open('head.jpg', mode='wb') as f:\n            f.write(data)\n            print('Copy Success')\n    except FileNotFoundError :\n        print('æ–‡ä»¶ä¸å­˜åœ¨')\n    except UnicodeEncodeError:\n        print('ç¼–ç å¼‚å¸¸')\n\n\ndef json_data_def():\n    \"\"\"pythonå¯¹jsonæ•°æ®çš„å¤„ç†\"\"\"\n    myuser = {\n        'name':'æé»‘',\n        'sex': 'ç”·',\n        'age': 0,\n        'qq': 957658,\n        'friends': ['ç‹å¤§é”¤', 'ç™½å…ƒèŠ³'],\n        'cars': [\n            {'brand': 'BYD', 'max_speed': 180},\n            {'brand': 'Audi', 'max_speed': 280},\n            {'brand': 'Benz', 'max_speed': 320}\n        ]\n    }\n\n    try:\n        \"\"\"å°†pythonå­—å…¸å¯¹è±¡åºåˆ—åŒ–ä¸ºjsonæ–‡ä»¶\"\"\"\n        with open('users.json', 'w', encoding='utf-8') as f:\n            json.dump(myuser, f)\n\n        \"\"\"å°†jsonæ–‡ä»¶ååºåˆ—åŒ–ä¸ºpythonå­—å…¸å¯¹è±¡\"\"\"\n        with open('users.json', 'r', encoding = 'utf-8') as f:\n            curr_user = json.load(f)\n            print(curr_user)\n    except IOError:\n        print('æ–‡ä»¶å†™å…¥å¤±è´¥')\n\n\nif __name__ == \"__main__\":\n    # read()\n    # writh('a')\n    # with_def()\n    # buffer_file_def()\n    json_data_def()\n```\n\n## å‚è€ƒ\n\n[ã€Šæ€»ç»“ï¼šPythonä¸­çš„å¼‚å¸¸å¤„ç†ã€‹](https://segmentfault.com/a/1190000007736783 \"æ€å¦ - æ€»ç»“ï¼šPythonä¸­çš„å¼‚å¸¸å¤„ç†\")\n\n[HTTPåè®®å…¥é—¨](http://www.ruanyifeng.com/blog/2016/08/http.html \"é˜®ä¸€å³°HTTPåè®®å…¥é—¨\")\n\n[èšåˆæ•°æ®](https://www.juhe.cn/ \"èšåˆæ•°æ®\")\n\n[é˜¿å‡¡è¾¾æ•°æ®](https://www.avatardata.cn/ \"é˜¿å‡¡è¾¾æ•°æ®\")\n\n## ç»“è¯­\n\n> Don't be one of the leeches.\n\n![ ](./1.png)\n","tags":["Python"]},{"title":"Shellå­¦ä¹ ç¬”è®°","url":"/2019/06/18/shell/","content":"\nShell æ˜¯ä¸€ä¸ªç”¨ C è¯­è¨€ç¼–å†™çš„ç¨‹åºï¼Œå®ƒæ˜¯ç”¨æˆ·ä½¿ç”¨ Linux çš„æ¡¥æ¢\n\nShell ç¼–ç¨‹è·Ÿ javaã€php ç¼–ç¨‹ä¸€æ ·ï¼Œåªè¦æœ‰ä¸€ä¸ªèƒ½ç¼–å†™ä»£ç Â¸çš„æ–‡æœ¬ç¼–è¾‘å™¨å’Œä¸€ä¸ªèƒ½è§£é‡Šæ‰§è¡Œçš„è„šæœ¬è§£é‡Šå™¨å°±å¯ä»¥äº†ã€‚\n\n## å¼€å§‹\n\n### åˆ›å»ºè„šæœ¬æ–‡ä»¶\n\næ–°å»ºä¸€ä¸ªæ‰©å±•åä¸º`.sh`çš„æ–‡ä»¶`test.sh`, shä»£è¡¨*shell*\n\ntest.shæ–‡ä»¶å†…å®¹å¦‚ä¸‹:\n\n```sh\n#!/bin/bash\necho \"Hello Shell\"\n```\n\n> `#!` æ˜¯ä¸€ä¸ªçº¦å®šä¿—æˆçš„æ ‡è®°, ç”¨äºå‘Šè¯‰ç³»ç»Ÿä½¿ç”¨å“ªä¸ªè§£é‡Šå™¨æ¥æ‰§è¡Œè¿™ä¸ªè„šæœ¬.  \n> `echo` å‘½ä»¤æ˜¯ç”¨äºå‘ç»ˆç«¯è¾“å‡ºæ–‡æœ¬ä¿¡æ¯,ä¹Ÿå¯ç”¨äºå‘æ–‡ä»¶ä¸­å†™å…¥æ•°æ®\n\n### è¿è¡Œshellè„šæœ¬\n\nè¿è¡Œshellè„šæœ¬çš„æ–¹å¼ä¸¤ç§\n\n+ é€šè¿‡å¯æ‰§è¡Œæ–‡ä»¶è¿è¡Œ\n\néœ€è¦ç»™è„šæœ¬æ–‡ä»¶æ·»åŠ å¯æ‰§è¡Œæƒé™\n\n```sh\n# åœ¨ test.sh æ–‡ä»¶æ‰€åœ¨çš„æ–‡ä»¶å¤¹ä¸‹, æ‰§è¡Œä»¥ä¸‹å‘½ä»¤\nchmod +x ./test.sh\n```\n\n> è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯, ä¸€å®šè¦å†™æˆ`./test.sh`è€Œä¸æ˜¯`test.sh`, å¦è´£ç³»ç»Ÿå¯èƒ½ä¼šæ‰¾ä¸åˆ°è„šæœ¬æ–‡ä»¶, `./`çš„æ„æ€æ˜¯ æŒ‡å®šåœ¨å½“å‰æ–‡ä»¶è·¯å¾„ä¸‹æŸ¥æ‰¾æ–‡ä»¶\n\n+ ä½œä¸ºè§£é‡Šå™¨å‚æ•°\n\n```sh\n/bin/sh test.sh\n/bin/php test.php\n```\n\n> è¿™ç§æ–¹å¼ä¸‹,åœ¨æ–‡ä»¶ç¬¬ä¸€è¡Œæ·»åŠ *æ ‡è®°*ä¹Ÿæ²¡æœ‰æ•ˆæœ(å› ä¸ºä½ å·²ç»æŒ‡å®šäº†è§£é‡Šå™¨æ¥è¿è¡Œè„šæœ¬)\n\n## å˜é‡\n\nè§„åˆ™:\n\n1. å®šä¹‰å˜é‡æ—¶ï¼Œå˜é‡åä¸åŠ ç¾å…ƒç¬¦å·\n2. å˜é‡åå’Œç­‰å·ä¹‹é—´ä¸èƒ½æœ‰ç©ºæ ¼\n3. å‘½ååªèƒ½ä½¿ç”¨è‹±æ–‡å­—æ¯ï¼Œæ•°å­—å’Œä¸‹åˆ’çº¿ï¼Œé¦–ä¸ªå­—ç¬¦ä¸èƒ½ä»¥æ•°å­—å¼€å¤´ã€‚\n4. ä¸­é—´ä¸èƒ½æœ‰ç©ºæ ¼ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹åˆ’çº¿ï¼ˆ_ï¼‰ã€‚\n5. ä¸èƒ½ä½¿ç”¨æ ‡ç‚¹ç¬¦å·ã€‚\n6. ä¸èƒ½ä½¿ç”¨bashé‡Œçš„å…³é”®å­—ï¼ˆå¯ç”¨helpå‘½ä»¤æŸ¥çœ‹ä¿ç•™å…³é”®å­—ï¼‰ã€‚\n\nç¤ºä¾‹:\n\næœ‰æ•ˆå‘½å:\n\n```sh\nRUNOOB\nLD_LIBRARY_PATH\n_var\nvar2\n```\n\næ— æ•ˆå‘½å:\n\n```sh\n?var=123\nuser*name=runoob\n```\n\næ˜¾ç¤ºèµ‹å€¼\n\n`your_name=\"runoob.com\"`\n\né€šè¿‡è¯­å¥èµ‹å€¼\n\n```sh\nfor file in `ls /etc`\n# æˆ–\nfor file in $(ls /etc)\n```\n\n> ä»¥ä¸Šè¯­å¥, åˆ—å‡º`/etc`è·¯å¾„ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å,èµ‹å€¼ç»™`file`\n\n### ä½¿ç”¨å˜é‡\n\nä½¿ç”¨å˜é‡,åªéœ€è¦åœ¨å˜é‡å‰é¢åŠ ä¸€ä¸ª`$`ç¬¦å·\n\n```sh\nname=\"shell\"\necho $name\necho ${name}\n```\n\n`$name`å’Œ`${name}`éƒ½æ˜¯å¯ä»¥çš„, `{}`æ˜¯å¯é€‰çš„, å®ƒçš„ä½œç”¨æ˜¯å¸®åŠ©è§£é‡Šå™¨æ¥è¯†åˆ«å˜é‡è¾¹ç•Œçš„, æ¯”å¦‚:\n\n```sh\nfor skill in Ada Coffe Action Java; do\n    echo \"I am good at ${skill}Script\"\ndone\n```\n\nå¦‚æœä¸åŠ  `{}` åˆ™è§£é‡Šå™¨è®¤ä¸º`$skillScript`æ˜¯ä¸€ä¸ªå˜é‡(å†…å®¹ä¸ºç©º),\n\n>> æ¨èç»™æ‰€æœ‰çš„å˜é‡åŠ ä¸Š`{}`,å…»æˆå¥½çš„ç¼–ç¨‹ä¹ æƒ¯\n\n### åªè¯»å˜é‡\n\nå·²ç»å®šä¹‰çš„å˜é‡å¯ä»¥è¢«é‡æ–°èµ‹å€¼, **åªè¯»å˜é‡**é™¤å¤–\n\nå®šä¹‰æ–¹å¼ä¸º: åœ¨å˜é‡å‰é¢åŠ ä¸Š `readonly`\n\n```sh\nreadonly name=\"Shell\"\nname=\"jason\" # è¿™é‡Œä¼šæŠ¥é”™  error: NAME: This variable is read only.\n```\n\n### åˆ é™¤å˜é‡\n\n```sh\nunset name\n```\n\n> unset å‘½ä»¤ä¸èƒ½åˆ é™¤åªè¯»å˜é‡ã€‚ åˆ é™¤ä¹‹åä¸èƒ½ä½¿ç”¨\n\n## å‚è€ƒ\n\n[èœé¸Ÿæ•™ç¨‹](https://www.runoob.com/linux/linux-shell.html \"Linux Shellæ•™ç¨‹\")\n\n## ç»“è¯­\n\nå­¦ä¹ ä¸€é—¨æŠ€æœ¯, å¼€å§‹çš„æ—¶å€™ä¸è¦çº ç»“å„ç§çœ‹ä¸æ‡‚çš„è¯­æ³•ã€ä¸é’»ç‰›è§’å°–, å…ˆåŸ¹å…»å…´è¶£, å†å¾ªåºæ¸è¿›.\n","tags":["è„šæœ¬è¯­è¨€"]},{"title":"mysqlå­¦ä¹ ç¬”è®°","url":"/2019/06/05/mysql5-7/","content":"\nè¿™ç¯‡æ–‡ç« ä¸»è¦æ˜¯æˆ‘æ—¥å¸¸ä½¿ç”¨mysqlçš„ä¸€äº›è®°å½•\næˆ‘ä½¿ç”¨çš„mysqlç‰ˆæœ¬æ˜¯:`5.7`\n\n## MySQL ç›¸å…³æ–‡ç« \n\n[ã€é“¾æ¥ã€‘å¤§ç‰›æ€»ç»“çš„MySQLé”ä¼˜åŒ–ï¼Œå†™å¾—å¤ªå¥½äº†ï¼](https://cloud.tencent.com/developer/news/456119)\n[ã€é“¾æ¥ã€‘ä¸€ç¯‡æ–‡ç« å¼„æ‡‚MySQLçš„äº‹åŠ¡éš”ç¦»çº§åˆ«](https://mp.weixin.qq.com/s/p32Tc6XhbHq_NbJWAiZnhQ)\n\n## ç”¨æˆ·\n\n### åˆ›å»ºç”¨æˆ·\n\n```sh\ncreate user 'testuser'@'%' identified by 'password';\n```\n\nåˆ›å»º `testuser` ç”¨æˆ·, å¯ä»¥åœ¨æ‰€æœ‰ä¸»æœºä¸Šç™»é™†ä½¿ç”¨, å¯†ç ä¸º`password`;\n\n1. testuser æ˜¯åˆ›å»ºçš„ç”¨æˆ·å\n2. % æ˜¯ä¸»æœºå,æŒ‡å®šå“ªäº›ä¸»æœºå¯ä»¥ä½¿ç”¨æ”¹ç”¨æˆ·\n   1. %/0.0.0.0 æ‰€æœ‰ä¸»æœºå¯ä»¥ä½¿ç”¨\n   2. localhost/127.0.0.1 æœ¬æœºå¯ä»¥ä½¿ç”¨\n   3. ...\n3. password æ˜¯åˆ›å»ºçš„ç”¨æˆ·ç™»é™†å¯†ç , å¦‚æœæŒ‡å®šä¸º `identified by ''` åˆ™ä¸è®¾ç½®å¯†ç \n\n### åˆ é™¤ç”¨æˆ·\n\n```sh\ndrop user 'apollo'@'%';\n```\n\n### ç”¨æˆ·æƒé™\n\n#### æˆäºˆæƒé™\n\n```sh\ngrant all on testdb.* to 'testuser'@'%';\ngrant select on testdb.* to 'testuser'@'%';\ngrant insert on testdb.* to 'testuser'@'%';\n```\n\næˆäºˆç”¨æˆ·`testuser`åœ¨æ‰€æœ‰ä¸»æœºä¸Šä½¿ç”¨`testdb`æ•°æ®åº“ä¸‹**æ‰€æœ‰è¡¨**çš„æƒé™\n\n+ all ä»£è¡¨æƒé™\n  + select æŸ¥è¯¢æƒé™\n  + insert æ’å…¥æƒé™\n  + delete åˆ é™¤æƒé™\n  + update ä¿®æ”¹æƒé™\n+ testdb.* æ”¹æ•°æ®åº“ä¸‹çš„æ‰€æœ‰è¡¨\n+ 'testuser'@'%' è¡¨ç¤º`testuser`åœ¨`%`ä¸»æœºå¯ä»¥ä½¿ç”¨æˆäºˆçš„æƒé™\n\n#### åˆ·æ–°æƒé™\n\n`flush privileges;`\n\n#### åˆ é™¤æƒé™\n\n```sh\nREVOKE ALL ON test.* FROM 'testuser'@'%';\nREVOKE select ON test.* FROM 'testuser'@'%';\nREVOKE insert ON test.* FROM 'testuser'@'%';\n```\n\n+ åˆ é™¤æ‰€æœ‰æƒé™\n+ åˆ é™¤æŸ¥è¯¢æƒé™\n+ åˆ é™¤æ’å…¥æƒé™\n\n#### æŸ¥çœ‹ç”¨æˆ·æƒé™\n\n`SHOW GRANTS FOR 'testuser'@'%';`\n\n## æ•°æ®åº“\n\n### åŸºæœ¬è¯­æ³•\n\n#### å‡½æ•°\n\n##### ç±»å‹è½¬æ¢å‡½æ•°\n\nç”¨äºç±»å‹è½¬åŒ– CAST()å’ŒCONVERT()\n\n```sh\nCAST(value as type);\nCONVERT(value, type);\n```\n\nå¯ä»¥è½¬æ¢çš„ç±»å‹æ˜¯æœ‰é™åˆ¶çš„ã€‚è¿™ä¸ªç±»å‹å¯ä»¥æ˜¯ä»¥ä¸‹å€¼å…¶ä¸­çš„ä¸€ä¸ªï¼š\n\n+ äºŒè¿›åˆ¶ï¼ŒåŒå¸¦binaryå‰ç¼€çš„æ•ˆæœ : BINARY\n+ å­—ç¬¦å‹ï¼Œå¯å¸¦å‚æ•° : CHAR()\n+ æ—¥æœŸ : DATE\n+ æ—¶é—´: TIME\n+ æ—¥æœŸæ—¶é—´å‹ : DATETIME\n+ æµ®ç‚¹æ•° : DECIMAL\n+ æ•´æ•° : SIGNED\n+ æ— ç¬¦å·æ•´æ•° : UNSIGNED\n\nç¤ºä¾‹:\n\n```sh\n# 1\nmysql> SELECT CONVERT('23',SIGNED);\n+----------------------+\n| CONVERT('23',SIGNED) |\n+----------------------+\n|                   23 |\n+----------------------+\n1 row in set\n\n# 2\nmysql> SELECT CAST('125e342.83' AS signed);\n+------------------------------+\n| CAST('125e342.83' AS signed) |\n+------------------------------+\n|                          125 |\n+------------------------------+\n1 row in set\n\n# 3\nmysql> SELECT CAST('3.35' AS signed);\n+------------------------+\n| CAST('3.35' AS signed) |\n+------------------------+\n|                      3 |\n+------------------------+\n1 row in set\n```\n\n##### æ ¼å¼åŒ–å‡½æ•°\n\n##### éšæœºæ•° rand()\n\n```sh\nselect rand()\n```\n\n#### æ—¶é—´\n\n##### è·å–ç³»ç»Ÿæ—¶é—´ `now()` å’Œ `sysdate()` è¿™ä¸¤ä¸ªå‡½æ•°çš„åŒºåˆ«æ˜¯, `now()`åœ¨æ‰§è¡Œå‰å°±ç¡®è®¤äº†å€¼, `sysdate()`åœ¨æ‰§è¡Œæ—¶åŠ¨æ€ç¡®è®¤å€¼\n\nä¾‹å­:\n\n```sh\n> select now(), sleep(3), now();\n> select sysdate(), sleep(3), sysdate();\n```\n\n> æ„Ÿå…´è¶£çš„å¯ä»¥çœ‹ä¸€ä¸‹è¿™ä¸¤å¤©sqlæ‰§è¡Œçš„ç»“æœ\n\n##### è·å¾—å½“å‰æ—¶é—´æˆ³å‡½æ•°ï¼šcurrent_timestamp, current_timestamp()\n\nè¯­æ³•: `select current_timestamp, current_timestamp()`\n\n##### æ—¥æœŸã€æ—¶é—´è½¬æ¢\n\næ—¶é—´è½¬æ¢ä¸ºå­—ç¬¦ä¸² date_format(date,format), time_format(time,format)\n\næ—¶é—´æ ¼å¼åŒ–å‡½æ•° DATE_FORMAT(date, format)\n\n1. date æ—¶é—´\n2. format å‚æ•°æ ¼å¼æœ‰\n\nå‚æ•°|è¯´æ˜\n:----:|:-----------------------:\n%a|ç¼©å†™æ˜ŸæœŸå\n%b|ç¼©å†™æœˆå\n%c|æœˆï¼Œæ•°å€¼\n%D|å¸¦æœ‰è‹±æ–‡å‰ç¼€çš„æœˆä¸­çš„å¤©\n%d|æœˆçš„å¤©ï¼Œæ•°å€¼(00-31)\n%e|æœˆçš„å¤©ï¼Œæ•°å€¼(0-31)\n%f|å¾®ç§’\n%H|å°æ—¶ (00-23)\n%h|å°æ—¶ (01-12)\n%I|å°æ—¶ (01-12)\n%i|åˆ†é’Ÿï¼Œæ•°å€¼(00-59)\n%j|å¹´çš„å¤© (001-366)\n%k|å°æ—¶ (0-23)\n%l|å°æ—¶ (1-12)\n%M|æœˆå\n%m|æœˆï¼Œæ•°å€¼(00-12)\n%p|AM æˆ– PM\n%r|æ—¶é—´ï¼Œ12-å°æ—¶ï¼ˆhh:mm:ss AM æˆ– PMï¼‰\n%S|ç§’(00-59)\n%s|ç§’(00-59)\n%T|æ—¶é—´, 24-å°æ—¶ (hh:mm:ss)\n%U|å‘¨ (00-53) æ˜ŸæœŸæ—¥æ˜¯ä¸€å‘¨çš„ç¬¬ä¸€å¤©\n%u|å‘¨ (00-53) æ˜ŸæœŸä¸€æ˜¯ä¸€å‘¨çš„ç¬¬ä¸€å¤©\n%V|å‘¨ (01-53) æ˜ŸæœŸæ—¥æ˜¯ä¸€å‘¨çš„ç¬¬ä¸€å¤©ï¼Œä¸ %X ä½¿ç”¨\n%v|å‘¨ (01-53) æ˜ŸæœŸä¸€æ˜¯ä¸€å‘¨çš„ç¬¬ä¸€å¤©ï¼Œä¸ %x ä½¿ç”¨\n%W|æ˜ŸæœŸå\n%w|å‘¨çš„å¤© ï¼ˆ0=æ˜ŸæœŸæ—¥, 6=æ˜ŸæœŸå…­ï¼‰\n%X|å¹´ï¼Œå…¶ä¸­çš„æ˜ŸæœŸæ—¥æ˜¯å‘¨çš„ç¬¬ä¸€å¤©ï¼Œ4 ä½ï¼Œä¸ %V ä½¿ç”¨\n%x|å¹´ï¼Œå…¶ä¸­çš„æ˜ŸæœŸä¸€æ˜¯å‘¨çš„ç¬¬ä¸€å¤©ï¼Œ4 ä½ï¼Œä¸ %v ä½¿ç”¨\n%Y|å¹´ï¼Œ4 ä½\n%y|å¹´ï¼Œ2 ä½\n\nå­—ç¬¦ä¸²è½¬æ¢ä¸ºæ—¶é—´ str_to_date(str, format)\n\n(æ—¥æœŸã€å¤©æ•°ï¼‰è½¬æ¢å‡½æ•°ï¼što_days(date), from_days(days)\n\n(æ—¶é—´ã€ç§’ï¼‰è½¬æ¢å‡½æ•°ï¼štime_to_sec(time), sec_to_time(seconds)\n\næ‹¼å‡‘æ—¥æœŸã€æ—¶é—´å‡½æ•°ï¼šmakdedate(year,dayofyear), maketime(hour,minute,second)\n\nUnix æ—¶é—´æˆ³ã€æ—¥æœŸï¼‰è½¬æ¢å‡½æ•°\n\n1. unix_timestamp(),\n2. unix_timestamp(date),\n3. from_unixtime(unix_timestamp),\n4. from_unixtime(unix_timestamp,format)\n   1. æ ¼å¼åŒ–å‡½æ•° FROM_UNIXTIME(unix_timestamp, [format])\n   2. unix_timestamp ä¸€èˆ¬ä¸º10ä½çš„æ—¶é—´æˆ³ï¼Œå¦‚:1417363200\n   3. format *å¯é€‰* è½¬æ¢ä¹‹åçš„æ—¶é—´å­—ç¬¦ä¸²æ˜¾ç¤ºçš„æ ¼å¼;\n\n##### æ—¥æœŸæ—¶é—´è®¡ç®—å‡½æ•°\n\nå¢åŠ ä¸€ä¸ªæ—¶é—´é—´éš”ï¼šDATE_ADD(date,INTERVAL expr type)\n\n+ date è¦æ“ä½œçš„æ—¶é—´\n+ expr è¦æ·»åŠ çš„æ—¶é—´é—´éš”\n+ type å‚è€ƒä¸‹è¡¨\n\ntypeçš„å€¼|å¤‡æ³¨\n:----------:|:-------:\nMICROSECOND|\nSECOND|ç§’\nMINUTE|åˆ†\nHOUR|å°æ—¶\nDAY|å¤©\nWEEK|æ˜ŸæœŸ\nMONTH|æœˆ\nQUARTER|?\nYEAR|å¹´\nSECOND_MICROSECOND|\nMINUTE_MICROSECOND|\nMINUTE_SECOND|\nHOUR_MICROSECOND|\nHOUR_SECOND|\nHOUR_MINUTE|\nDAY_MICROSECOND|\nDAY_SECOND|\nDAY_MINUTE|\nDAY_HOUR|\nYEAR_MONTH|\n\n> adddate(), addtime()å‡½æ•°ï¼Œå¯ä»¥ç”¨ date_add() æ¥æ›¿ä»£\n\næ—¥æœŸå‡å»ä¸€ä¸ªæ—¶é—´é—´éš”ï¼šDATE_SUB(date,INTERVAL expr type)\n\n> DATE_SUB(date,INTERVAL expr type) æ—¥æœŸæ—¶é—´å‡½æ•° å’Œ date_add() ç”¨æ³•ä¸€è‡´\n\næ—¥æœŸã€æ—¶é—´ç›¸å‡å‡½æ•°ï¼šdatediff(date1,date2), timediff(time1,time2)\n\n1. datediff è¿”å›å¤©æ•°å·®è·\n2. timediff è¿”å›timeå·®è·\n\n> æ³¨æ„ï¼štimediff(time1,time2) å‡½æ•°çš„ä¸¤ä¸ªå‚æ•°ç±»å‹å¿…é¡»ç›¸åŒã€‚\n\næ—¶é—´æˆ³ï¼ˆtimestampï¼‰è½¬æ¢ã€å¢ã€å‡å‡½æ•°\n\n1. timestamp(date) -- date to timestamp\n2. timestamp(dt,time) -- dt + time\n3. timestampadd(unit,interval,datetime_expr) --\n4. timestampdiff(unit,datetime_expr1,datetime_expr2) --\n\nç¤ºä¾‹:\n\n```sh\nselect timestamp('2008-08-08'); -- 2008-08-08 00:00:00\nselect timestamp('2008-08-08 08:00:00', '01:01:01'); -- 2008-08-08 09:01:01\nselect timestamp('2008-08-08 08:00:00', '10 01:01:01'); -- 2008-08-18 09:01:01\n\nselect timestampadd(day, 1, '2008-08-08 08:00:00'); -- 2008-08-09 08:00:00\nselect date_add('2008-08-08 08:00:00', interval 1 day); -- 2008-08-09 08:00:00\n\ntimestampadd() å‡½æ•°ç±»ä¼¼äº date_add()ã€‚\nselect timestampdiff(year,'2002-05-01','2001-01-01'); -- -1\nselect timestampdiff(day ,'2002-05-01','2001-01-01'); -- -485\nselect timestampdiff(hour,'2008-08-08 12:00:00','2008-08-08 00:00:00'); -- -12\n\nselect datediff('2008-08-08 12:00:00', '2008-08-01 00:00:00'); -- 7\n```\n\n> timestampdiff() å‡½æ•°å°±æ¯” datediff() åŠŸèƒ½å¼ºå¤šäº†ï¼Œdatediff() åªèƒ½è®¡ç®—ä¸¤ä¸ªæ—¥æœŸï¼ˆdateï¼‰ä¹‹é—´ç›¸å·®çš„å¤©æ•°ã€‚\n\næ—¶åŒºï¼ˆtimezoneï¼‰è½¬æ¢å‡½æ•°\n\n```sh\nconvert_tz(dt,from_tz,to_tz)\n\nselect convert_tz('2008-08-08 12:00:00', '+08:00', '+00:00'); -- 2008-08-08 04:00:00\n```\n\n> æ—¶åŒºè½¬æ¢ä¹Ÿå¯ä»¥é€šè¿‡ date_add, date_sub, timestampadd æ¥å®ç°\n\n## ç›¸å…³é“¾æ¥\n\n[MySQL CASTä¸CONVERT å‡½æ•°çš„ç”¨æ³•](https://www.cnblogs.com/chenqionghe/p/4675844.html)\n\n[MySQL æ—¥æœŸæ ¼å¼](https://www.cnblogs.com/dest/p/4205371.html)\n\n## ç»“è¯­\n\næ¯å¤©éƒ½è¦å»æŠ˜è…¾æ‰èƒ½è¿›æ­¥\n","tags":["æ•°æ®åº“"]},{"title":"Dockerå­¦ä¹ ç¬”è®°","url":"/2019/05/16/docker/","content":"\næˆ‘æ˜¯ä¸€ä¸ªjavaç¨‹åºçŒ¿, å½“å‰å·²ç»è½¬ä¸ºnodejså¼€å‘, å› ä¸ºå·¥ä½œéœ€è¦æ¥è§¦dockeråˆ°ç›®å‰ä¸ºæ­¢å·²ç»æœ‰ä¸€å¹´å¤šçš„æ—¶é—´äº†, ä¸€ä¸‹æ˜¯æˆ‘å­¦ä¹ å’Œä½¿ç”¨dockerçš„ä¸€äº›æ€»ç»“.\n\n## å‰è¨€\n\n### è®¤è¯†docker\n\nDockeræ˜¯ä¸€ä¸ªå®¹å™¨å¹³å°, å¯ä»¥è¯´ä»–æ˜¯ä¸€ä¸ªè™šæ‹Ÿæœºå¹³å°, ä½†æ˜¯å®ƒåˆæ¯”è™šæ‹Ÿæœºå¼ºå¤§. Dockeræ˜¯å¼€å‘äººå‘˜å’Œç³»ç»Ÿç®¡ç†å‘˜ä½¿ç”¨å®¹å™¨å¼€å‘ï¼Œéƒ¨ç½²å’Œè¿è¡Œåº”ç”¨ç¨‹åºçš„å¹³å°ã€‚\nä½¿ç”¨Linuxå®¹å™¨éƒ¨ç½²åº”ç”¨ç¨‹åºç§°ä¸ºå®¹å™¨åŒ–ã€‚å®¹å™¨ä¸æ˜¯æ–°çš„ï¼Œä½†å®ƒä»¬ç”¨äºè½»æ¾éƒ¨ç½²åº”ç”¨ç¨‹åºã€‚\n\n### dockerèƒ½è§£å†³ä»€ä¹ˆé—®é¢˜\n\n1. ç”Ÿäº§å¼€å‘ç¯å¢ƒä¸ä¸€è‡´çš„é—®é¢˜\n\n### åŸºæœ¬æ¦‚å¿µ\n\n1. å®¹å™¨\n2. é•œåƒ\n3. ä»“åº“\n\n## å®‰è£…\n\n[å‚è€ƒè¿™é‡Œ](https://docs.docker.com/install/)\n\n```bash\n# æŸ¥çœ‹dockerç‰ˆæœ¬\ndocker --version\n\n# æŸ¥çœ‹dockerä¿¡æ¯\ndocker info\n\n# æµ‹è¯•dockeræ˜¯å¦å®‰è£…æˆåŠŸ\ndocker run hello-world\n\nUnable to find image 'hello-world:latest' locally\nlatest: Pulling from library/hello-world\nca4f61b1923c: Pull complete\nDigest: sha256:ca0eeb6fb05351dfc8759c20733c91def84cb8007aa89a5bf606bc8b315b9fc7\nStatus: Downloaded newer image for hello-world:latest\n\nHello from Docker!\nThis message shows that your installation appears to be working correctly.\n...\n```\n\n## å…¥é—¨\n\nå‰ææ¡ä»¶: å®‰è£…å¥½Docker\n\n### å®¹å™¨\n\n#### åˆ›å»ºDockerfileæ–‡ä»¶\n\nåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªDockerfileæ–‡ä»¶, å¦‚:\n\n```Dockerfile\n# å°†å®˜æ–¹ node:9.3.0-alpine è¿è¡Œæ—¶ç”¨ä½œçˆ¶é•œåƒ\nFROM node:9.3.0-alpine\n\nRUN mkdir -p /app\n# å°†å·¥ä½œç›®å½•è®¾ç½®ä¸º /app\nWORKDIR /app\n\n# å°†å½“å‰ç›®å½•å†…å®¹å¤åˆ¶åˆ°ä½äº /app ä¸­çš„å®¹å™¨ä¸­\nCOPY . /app/temp\n\nRUN cp /app/temp/package.json /app/package.json &&\\\n    npm install --registry=https://registry.npm.taobao.org &&\\\n    cp -r /app/temp/pages /app/pages &&\\\n    cp -r /app/temp/components /app/components &&\\\n    cp -r /app/temp/next.config.js /app/next.config.js &&\\\n    rm -rf /app/temp\n\n# åœ¨å®¹å™¨å¯åŠ¨æ—¶è¿è¡Œ\nCMD [\"npm\", \"start\"]\n```\n\næœ‰å…³Dockerfileçš„å‘½ä»¤å¯ä»¥å‚è€ƒè¿™é‡Œ[ç¼–å†™Dockerfileçš„æœ€ä½³å®è·µ](https://docs.docker.com/develop/develop-images/dockerfile_best-practices/)\n\n#### æ„å»ºé•œåƒ\n\nå‘½ä»¤:\n\n`docker build -t <image-name> .`;\n\n> -t image-name æ˜¯ç»™é•œåƒæ·»åŠ åç§°  \n> . ä»£è¡¨å½“å‰æ ¹ç›®å½•  \n> å¯é€‰å‚æ•° -f Dockerfile-name æŒ‡å®šDockerfileæ–‡ä»¶, é»˜è®¤æ˜¯ Dockerfile, å½“æˆ‘ä»¬æœ‰å¦‚: MYSQL.Dockerfile åˆ™å¯ä»¥ä½¿ç”¨è¯¥å‚æ•°æŒ‡å®š ä¾‹: `docker build -t imagename . -f MySQL.Dockerfile`\n\n#### è¿è¡Œå®¹å™¨\n\nå‘½ä»¤:\n\n`docker run -d -p 3000:3000 --name <å®¹å™¨åç§°> <é•œåƒhashid/é•œåƒåç§°>`\n\n1. -d å‚æ•°æŒ‡å®šå®¹å™¨åœ¨åå°è¿è¡Œ\n2. -p æŒ‡å®šå®¹å™¨ç«¯å£æ˜ å°„, ä¸»æœºç«¯å£:å®¹å™¨ç«¯å£, å®¹å™¨ç«¯å£æŒ‡å®¹å™¨å†…éƒ¨æœåŠ¡å¯¹å¤–æš´éœ²çš„ç«¯å£,å¦‚æœtomcatå¯¹å¤–æä¾›æœåŠ¡çš„ç«¯å£ä¸º8080\n3. --name å‚æ•°è®¾ç½®å®¹å™¨åç§°\n4. æœ€åæ¥å¯¹åº”çš„é•œåƒ hashid æˆ–è€… é•œåƒåç§°:tag\n\nå…¶ä»–å¸¸ç”¨å‚æ•°:\n\n1. --network æŒ‡å®šå®¹å™¨è¿è¡Œçš„ç½‘ç»œç¯å¢ƒ\n2. -v é…ç½®å®¹å™¨æ•°æ®å·, æ›´å¤šä¿¡æ¯å‚è€ƒ é«˜çº§ç¯‡[å®¹å™¨æ•°æ®]\n3. --rm è¯¥å‘½ä»¤å¸¸å¸¸ä¸ -v ä¸€èµ·ä½¿ç”¨, åœ¨åˆ é™¤/åœæ­¢å®¹å™¨çš„æ—¶å€™åŒäº‹æ¸…é™¤æ•°æ®å·æ˜ å°„å…³ç³»\n4. --link é“¾æ¥åˆ°å…¶ä»–å®¹å™¨, æ–°ç‰ˆæœ¬æ¨èä½¿ç”¨ --network æŒ‡å®šå®¹å™¨ç½‘ç»œç¯å¢ƒå³å¯\n\nå®¹å™¨é•œåƒæ“ä½œ:\n\n```bash\ndocker ps; #æŸ¥çœ‹å½“å‰è¿è¡Œçš„å®¹å™¨\ndocker ps -a; # æŸ¥çœ‹æ‰€æœ‰çš„å®¹å™¨\ndocker logs <é•œåƒhashid/é•œåƒåç§°> # æŸ¥çœ‹æŒ‡å®šå®¹å™¨çš„æ—¥è®°\ndocker start <å®¹å™¨hashid/å®¹å™¨åç§°> # å¯åŠ¨å®¹å™¨\ndocker stop <å®¹å™¨hashid/å®¹å™¨åç§°> # åœæ­¢å®¹å™¨\ndocker stop -f <é•œåƒhashid/é•œåƒåç§°> # åœæ­¢å®¹å™¨, åŒæ—¶åˆ é™¤å®¹å™¨\ndocker rm <å®¹å™¨hashid/å®¹å™¨åç§°>... # åˆ é™¤å®¹å™¨, å¯ä»¥åŒæ—¶æŒ‡å®šå¤šä¸ª <å®¹å™¨hashid/å®¹å™¨åç§°>\ndocker rmi <é•œåƒhashid/é•œåƒåç§°> # åˆ é™¤é•œåƒ, å¿…é¡»æ³¨æ„çš„æ˜¯, å…ˆåˆ é™¤å®¹å™¨æ‰èƒ½åˆ é™¤é•œåƒ\n```\n\næ¨é€é•œåƒåˆ°ä»“åº“\n\n1. ç™»é™†dockerä»“åº“ `docker login ...`\n2. ç»™é•œåƒæ‰“æ ‡ç­¾ `docker tag [æœ¬åœ°é•œåƒåç§°]:[ç‰ˆæœ¬å·] [å­˜å‚¨åº“åç§°]:[ç‰ˆæœ¬å·]`\n3. æ¨é€åˆ°é•œåƒä»“åº“ `docker push [è´¦å·å]/[å­˜å‚¨åº“åç§°]:[ç‰ˆæœ¬å·]`\n4. å°è¯•æ‹‰å–é•œåƒ `docker pull [è´¦å·å]/[å­˜å‚¨åº“åç§°]:[ç‰ˆæœ¬å·]`\n\næ¡ˆä¾‹\n\n```sh\n# ç™»é™†dockerhub\ndocker login\n\n# æ„å»ºé•œåƒ\ndocker build -t arm64v8/myblog:latest .\n\n# å°†æœ¬åœ°é•œåƒæ‰“æ ‡ç­¾\ndocker tag arm64v8/myblog:latest jiangzwyz/myblog:latest\n\n# æ¨é€åˆ°é•œåƒä»“åº“\ndocker push jiangzwyz/myblog:latest\n```\n\n### æœåŠ¡Swarms\n\nå¾…è¡¥å……\n\n## é«˜çº§ç¯‡\n\n### å®¹å™¨æ•°æ®\n\næ·±å…¥äº†è§£dockerçš„éƒ½ä¼šçŸ¥é“dockerçš„æ–¹ä¾¿,ä½†æ˜¯ä¹Ÿä¼šæ˜ç™½dockerçš„ç¼ºç‚¹,å°±æ˜¯å®¹å™¨åœ¨è¢«é”€æ¯æ—¶,å…¶å†…éƒ¨çš„æ•°æ®å°†ä¼šå…¨éƒ¨ä¸¢å¤±,é‚£ä¹ˆè¿™é‡Œæˆ‘ä»¬å°±å°†è§£å†³è¿™ä¸ªé—®é¢˜\n\næœ€å¸¸è§çš„æ¡ˆä¾‹å°±æ˜¯æ•°æ®åº“äº†, è¿™é‡Œæˆ‘ä»¬ä»¥é…ç½® mysqlå®¹å™¨ä¸ºä¾‹, ç¤ºèŒƒå¦‚ä½•ä½¿ç”¨**æ•°æ®å·**å°†å®¹å™¨çš„æ•°æ®ä¿å­˜åˆ°ä¸»æœºä¸Š.\n\nDockerfileæ–‡ä»¶:\n\n```Dockerfile\n# æ‹‰å– mysql:5.7 å®˜æ–¹é•œåƒ\nFROM mysql:5.7\n\n# è®¾ç½®æ—¶åŒº Shanghai\nRUN cp /usr/share/zoneinfo/PRC /etc/localtime\n\n# ENV è®¾ç½® é•œåƒç¯å¢ƒå˜é‡ mysql é•œåƒå‚è€ƒå®˜æ–¹è¯´æ˜,å¯ä»¥åœ¨æ­¤é…ç½®è´¦æˆ·å¯†ç \nENV MYSQL_ROOT_PASSWORD=you_password\nENV MYSQL_USER=you_name\nENV MYSQL_PASSWORD=you_passowrd\n\n# è¿™é‡Œæˆ‘ä½¿ç”¨äº†è‡ªå®šä¹‰mysqlçš„é…ç½®æ–‡ä»¶\nCOPY ./mysql/mysql.cnf /etc/mysql/conf.d/mysql.cnf\nCOPY ./mysql/mysqld.cnf /etc/mysql/mysql.conf.d/mysqld.cnf\n```\n\n**é‡ç‚¹**åœ¨è¿™é‡Œ\n\n```bash\ndocker build -t mysql . -f MYSQL.Dockerfile;\ndocker run -d -p 3306:3306 --rm -v /mysql/db:/var/lib/mysql --name mysql mysql;\n```\n\nä»å½“å‰é¡¹ç›®ä¸­æ„å»ºmysqlé•œåƒ, ç„¶åè¿è¡Œå®¹å™¨æ—¶æŒ‡å®šä¸»æœº/mysql/dbç›®å½•æŒ‚è½½åˆ°å®¹å™¨/var/lib/mysqlç›®å½•(æ­¤ç›®å½•æ˜¯mysqlæ•°æ®åº“æ–‡ä»¶æ‰€åœ¨)\n\næ•°æ®ç±»çš„å®¹å™¨,å®˜æ–¹éƒ½ä¼šè¯´æ˜å…¶æ•°æ®æ–‡ä»¶å­˜æ”¾çš„ä½ç½®, å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥æŒ‚è½½ç½‘ç›˜åˆ°å®¹å™¨ä¸­.\n\n![ ](./01.png)\n\n### å®¹å™¨ç½‘ç»œ\n\n#### ä½¿ç”¨å®¹å™¨,ä½ å°±ä¸åº”è¯¥å†å»ç®¡ç†çƒ¦äººçš„IP\n\næˆ‘ä»¬è½½éƒ¨ç½²é¡¹ç›®çš„æ—¶å€™ç»å¸¸ä¼šé‡åˆ°è¿™ä¸ªé—®é¢˜, æˆ‘ä»¬çš„é¡¹ç›®éœ€è¦è¿æ¥mysql, ä¸€èˆ¬æˆ‘ä»¬é€šè¿‡ipå»è¿æ¥*(localhost:3306ã€127.0.0.1:3306), è¿™æ ·åˆ°è¿˜ç®€å•,å¦‚æœæˆ‘ä»¬çš„mysql IPæ˜¯åŠ¨æ€çš„, æ€ä¹ˆåŠ? ä½ æ”¹çš„å‡ æ¬¡å°±ä¼šæŠ“ç‹‚çš„. æ‰€ä»¥æˆ‘ä»¬éœ€è¦ä½¿ç”¨åˆ° å®¹å™¨ç½‘ç»œ  network\n\n#### åœ¨Dockerä¸­å»ºç«‹ è‡ªå®šä¹‰ æ¡¥ç½‘ç»œ\n\n1. è¿æ¥åˆ°é»˜è®¤bridgeç½‘ç»œçš„å®¹å™¨å¯ä»¥é€šè¿‡IPåœ°å€ç›¸äº’é€šä¿¡ã€‚Dockerä¸æ”¯æŒé»˜è®¤ç½‘æ¡¥ä¸Šçš„è‡ªåŠ¨æœåŠ¡å‘ç°ã€‚å¦‚æœå¸Œæœ›å®¹å™¨èƒ½å¤ŸæŒ‰å®¹å™¨åç§°è§£æIPåœ°å€ï¼Œåˆ™åº”ä½¿ç”¨ç”¨æˆ·å®šä¹‰çš„ç½‘ç»œã€‚æ‚¨å¯ä»¥ä½¿ç”¨æ—§ç‰ˆdocker run --linké€‰é¡¹å°†ä¸¤ä¸ªå®¹å™¨é“¾æ¥åœ¨ä¸€èµ·ï¼Œä½†åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ä¸å»ºè®®è¿™æ ·åšã€‚\n2. ä½¿ç”¨è‡ªå®šä¹‰ bridgeç½‘ç»œ è¿è¡Œåœ¨å…¶ä¸­çš„å®¹å™¨å¯ä»¥å‘ç°å¯¹æ–¹\n3. è¦å®ç° å®¹å™¨é—´é€šè®¯ï¼Œé‡‡ç”¨ è‡ªå®šä¹‰ æ¡¥ç½‘ç»œ ï¼ˆå®¹å™¨å¿…é¡»åœ¨åŒä¸€ä¸»æœºä¸­ï¼‰\n4. network  æ¡¥ç½‘ç»œï¼Œå®¹å™¨è¿è¡Œå† ç”¨æˆ·è‡ªå®šä¹‰æ¡¥ç½‘ç»œ ä¸­ï¼Œå®¹å™¨é—´å¯ä»¥é€šè¿‡ å±€åŸŸç½‘è®¿é—®ï¼ˆ**ä¸é€‚ç”¨äºåˆ†å¸ƒå¼ä¸»æœº**ï¼‰ï¼Œé»˜è®¤æ¡¥ç½‘ç»œä¸æ”¯æŒè¿™æ ·\n\n```bash\n# æŸ¥çœ‹å½“å‰ä¸»æœºä¸­ç½‘ç»œåˆ—è¡¨\n$ docker network ls\n\n# åˆ›å»º æ¡¥ç½‘ç»œ\n$ docker network create --driver bridge [network-name]\n\n# å°†å®¹å™¨è¿è¡Œåœ¨å¯¹åº”çš„ bridgeç½‘ç»œ ä¸­ï¼Œä½¿ç”¨ --network=[network-name]\n$ docker run -d -p 80:80 -p 443:443 --network=[network-name] --name mynginx [container-images-id]\n$ docker run -d -p 80:80 -p 443:443 --rm -v ~/../workspace/myimages/images:/app/images &&\\\n  --network=[network-name] & --name=1.2.3.4 [container-images-id]\n```\n\nåœ¨åŒä¸€ä¸ª network ç½‘ç»œä¸­çš„ä¸¤ä¸ªå®¹å™¨ä¹‹é—´é€šä¿¡å¯ä»¥ç›´æ¥ä½¿ç”¨ å®¹å™¨åç§°:ç«¯å£ çš„æ–¹å¼å»è®¿é—®,\nå¦‚: mysql:3306\n\n### k8s\n\nå®¹å™¨ç¼–æ’\n\n## å…¶ä»–\n\n### è®¾ç½®å®¹å™¨æ—¶åŒº\n\næ—¶åŒºé—®é¢˜ä¸€ç›´éƒ½æ˜¯æˆ‘ä»¬éœ€è¦è§£å†³çš„é—®é¢˜, å®¹å™¨åŒæ ·é¿å…ä¸äº†è¿™ä¸ªé—®é¢˜.\n\nåœ¨linuxä¸­, æˆ‘ä»¬å¯ä»¥å°†æœ¬åœ°æ—¶é—´æ–‡ä»¶æ‹·è´åˆ°/etc/localtimeå³å¯è®¾ç½®å®¹å™¨æ—¶é—´\n\nlinuxçš„æ—¶åŒºè®¾ç½®æ–‡ä»¶åœ¨ /usr/share/zoneinfo/Asia\n\næˆ‘ä»¬å°†è®¾ç½®ç³»ç»Ÿæ—¶é—´ä¸º ä¸Šæµ· ä¾‹:\n\n```bash\n# åœ¨Dockerfileä¸­æ·»åŠ :\n\n# linuxç‰ˆæœ¬: node:9.3.0-alpine\nRUN apk add --no-cache tzdata && \\\n    cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime && echo \"Asia/Shanghai\" > /etc/timezone && \\\n    apk del tzdata\n\n# é•œåƒ mysql:5.7\nRUN cp /usr/share/zoneinfo/PRC /etc/localtime\n```\n\n> ä¸Šæµ·æ—¶åŒº/usr/share/zoneinfo/Asia/Shanghaiå®é™…ä¸Šæ˜¯é“¾æ¥åˆ°/usr/share/zoneinfo/PRCæ—¶åŒº, æ‰€ä»¥åœ¨ç¬¬äºŒä¸ªä¸­æˆ‘ä»¬çš„åšæ³•ä¹Ÿæ˜¯å¯å–çš„.\n\n## ç»“è¯­\n\nå®˜æ–¹æ–‡æ¡£æ˜¯æœ€å¥½çš„å­¦ä¹ èµ„æ–™\n","tags":["å®¹å™¨"]},{"title":"Nginxå­¦ä¹ ç¬”è®°","url":"/2019/05/15/nginx/","content":"\nNginxæ˜¯ä¸€ä¸ª**è½»é‡çº§çš„é«˜æ€§èƒ½**HTTPå’Œåå‘ä»£ç†æœåŠ¡å™¨, ç”±ä¿„ç½—æ–¯äºº **ä¼Šæˆˆå°”Â·èµ›ç´¢è€¶å¤«**\n\n> è¿™æ˜¯ä¸€ä¸ªå­¦ä¹ ç¬”è®°, æˆ‘æƒ³å®ƒåº”è¯¥ä¸éœ€è¦é‚£ä¹ˆè¯¦ç»†\n\n## å®‰è£… Nginx\n\næˆ‘ä»¬æ—¢ç„¶å­¦ä¹ äº†Docker, é‚£å°±è¦ä½¿ç”¨Docker\n\nä½¿ç”¨ Docker å®‰è£… Nginx\n\n```bash\n# ä»docker hubä¸­æŸ¥æ‰¾nginx\ndocker search nginx\n\n# æ‹‰å–nginxå®˜æ–¹æœ€æ–°ç¨³å®šç‰ˆ nginx é•œåƒ\ndocker pull nginx\n\n# å¯åŠ¨ nginx é•œåƒ\ndocker run -d -p 80:80 --name nginx nginx\n```\n\n## NginxåŸºæœ¬æ¦‚å¿µ\n\n### æ­£åˆ™è¡¨è¾¾å¼\n\n1. ~  è¡¨ç¤ºæ‰§è¡Œä¸€ä¸ªæ­£åˆ™åŒ¹é…ï¼ŒåŒºåˆ†å¤§å°å†™\n2. ~* è¡¨ç¤ºæ‰§è¡Œä¸€ä¸ªæ­£åˆ™åŒ¹é…ï¼Œä¸åŒºåˆ†å¤§å°å†™\n3. ^~ è¡¨ç¤ºæ™®é€šå­—ç¬¦åŒ¹é…ã€‚ä½¿ç”¨å‰ç¼€åŒ¹é…ã€‚å¦‚æœåŒ¹é…æˆåŠŸï¼Œåˆ™ä¸å†åŒ¹é…å…¶ä»–locationã€‚\n4. =  è¿›è¡Œæ™®é€šå­—ç¬¦ç²¾ç¡®åŒ¹é…ã€‚ä¹Ÿå°±æ˜¯å®Œå…¨åŒ¹é…ã€‚\n5. @  å®ƒå®šä¹‰ä¸€ä¸ªå‘½åçš„ locationï¼Œä½¿ç”¨åœ¨å†…éƒ¨å®šå‘æ—¶ï¼Œä¾‹å¦‚ error_page, try_files\n\n### åŒ¹é…è§„åˆ™ä¼˜å…ˆçº§\n\n1. ç­‰å·ç±»å‹ï¼ˆ=ï¼‰çš„ä¼˜å…ˆçº§æœ€é«˜ã€‚ä¸€æ—¦åŒ¹é…æˆåŠŸï¼Œåˆ™ä¸å†æŸ¥æ‰¾å…¶ä»–åŒ¹é…é¡¹ã€‚\n2. ^~ç±»å‹è¡¨è¾¾å¼ã€‚ä¸€æ—¦åŒ¹é…æˆåŠŸï¼Œåˆ™ä¸å†æŸ¥æ‰¾å…¶ä»–åŒ¹é…é¡¹ã€‚\n3. æ­£åˆ™è¡¨è¾¾å¼ç±»å‹ï¼ˆ~ ~*ï¼‰çš„ä¼˜å…ˆçº§æ¬¡ä¹‹ã€‚å¦‚æœæœ‰å¤šä¸ªlocationçš„æ­£åˆ™èƒ½åŒ¹é…çš„è¯ï¼Œåˆ™ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æœ€é•¿çš„é‚£ä¸ªã€‚\n4. å¸¸è§„å­—ç¬¦ä¸²åŒ¹é…ç±»å‹ã€‚æŒ‰å‰ç¼€åŒ¹é…ã€‚\n\n### æ–‡ä»¶åŠç›®å½•åŒ¹é…\n\n1. -få’Œ!-fç”¨æ¥åˆ¤æ–­æ˜¯å¦å­˜åœ¨æ–‡ä»¶\n2. -då’Œ!-dç”¨æ¥åˆ¤æ–­æ˜¯å¦å­˜åœ¨ç›®å½•\n3. -eå’Œ!-eç”¨æ¥åˆ¤æ–­æ˜¯å¦å­˜åœ¨æ–‡ä»¶æˆ–ç›®å½•\n4. -xå’Œ!-xç”¨æ¥åˆ¤æ–­æ–‡ä»¶æ˜¯å¦å¯æ‰§è¡Œ\n\n### rewrite(é‡å®šå‘)æŒ‡ä»¤çš„æœ€åä¸€é¡¹å‚æ•°ä¸ºflagæ ‡è®°ï¼Œflagæ ‡è®°æœ‰\n\n1. last ç›¸å½“äºapacheé‡Œé¢çš„[L]æ ‡è®°ï¼Œè¡¨ç¤ºrewriteã€‚\n2. break æœ¬æ¡è§„åˆ™åŒ¹é…å®Œæˆåï¼Œç»ˆæ­¢åŒ¹é…ï¼Œä¸å†åŒ¹é…åé¢çš„è§„åˆ™ã€‚\n3. redirect è¿”å›302ä¸´æ—¶é‡å®šå‘ï¼Œæµè§ˆå™¨åœ°å€ä¼šæ˜¾ç¤ºè·³è½¬åçš„URLåœ°å€ã€‚\n4. permanent è¿”å›301æ°¸ä¹…é‡å®šå‘ï¼Œæµè§ˆå™¨åœ°å€ä¼šæ˜¾ç¤ºè·³è½¬åçš„URLåœ°å€ã€‚\n\n> ä½¿ç”¨lastå’Œbreakå®ç°URIé‡å†™ï¼Œæµè§ˆå™¨åœ°å€æ ä¸å˜ã€‚  \n> ä½¿ç”¨aliasæŒ‡ä»¤å¿…é¡»ç”¨lastæ ‡è®°;  \n> ä½¿ç”¨proxy_passæŒ‡ä»¤æ—¶ï¼Œéœ€è¦ä½¿ç”¨breakæ ‡è®°ã€‚  \n> Lastæ ‡è®°åœ¨æœ¬æ¡rewriteè§„åˆ™æ‰§è¡Œå®Œæ¯•åï¼Œä¼šå¯¹å…¶æ‰€åœ¨server{......}æ ‡ç­¾é‡æ–°å‘èµ·è¯·æ±‚.  \n> breakæ ‡è®°åˆ™åœ¨æœ¬æ¡è§„åˆ™åŒ¹é…å®Œæˆåï¼Œç»ˆæ­¢åŒ¹é…ã€‚\n\n## Nginxé…ç½®æ–‡ä»¶\n\n```conf\n# nginxè¿›ç¨‹æ•°ï¼Œå»ºè®®è®¾ç½®ä¸ºç­‰äºCPUæ€»æ ¸å¿ƒæ•°.\nworker_processes 8;\n\n# å…¨å±€é”™è¯¯æ—¥å¿—å®šä¹‰ç±»å‹ï¼Œ[ debug | info | notice | warn | error | crit ]\nerror_log /var/log/nginx/error.log info;\n\n# è¿›ç¨‹æ–‡ä»¶\npid /var/run/nginx.pid;\n\n# ä¸€ä¸ªnginxè¿›ç¨‹æ‰“å¼€çš„æœ€å¤šæ–‡ä»¶æè¿°ç¬¦æ•°ç›®ï¼Œç†è®ºå€¼åº”è¯¥æ˜¯æœ€å¤šæ‰“å¼€æ–‡ä»¶æ•°ï¼ˆç³»ç»Ÿçš„å€¼ulimit -nï¼‰ä¸nginxè¿›ç¨‹æ•°ç›¸é™¤ï¼Œä½†æ˜¯nginxåˆ†é…è¯·æ±‚å¹¶ä¸å‡åŒ€ï¼Œæ‰€ä»¥å»ºè®®ä¸ulimit -nçš„å€¼ä¿æŒä¸€è‡´ã€‚\nworker_rlimit_nofile 65535;\n\n# å·¥ä½œæ¨¡å¼ä¸è¿æ¥æ•°ä¸Šé™\nevents\n{\nã€€ã€€#å‚è€ƒäº‹ä»¶æ¨¡å‹ï¼Œuse [ kqueue | rtsig | epoll | /dev/poll | select | poll ]; epollæ¨¡å‹æ˜¯Linux 2.6ä»¥ä¸Šç‰ˆæœ¬å†…æ ¸ä¸­çš„é«˜æ€§èƒ½ç½‘ç»œI/Oæ¨¡å‹ï¼Œå¦‚æœè·‘åœ¨FreeBSDä¸Šé¢ï¼Œå°±ç”¨kqueueæ¨¡å‹ã€‚\nã€€ã€€use epoll;\nã€€ã€€#å•ä¸ªè¿›ç¨‹æœ€å¤§è¿æ¥æ•°ï¼ˆæœ€å¤§è¿æ¥æ•°=è¿æ¥æ•°*è¿›ç¨‹æ•°ï¼‰\nã€€ã€€worker_connections 65535;\n}\n\n# è®¾å®šhttpæœåŠ¡å™¨\nhttp\n{\n\n    include mime.types; #æ–‡ä»¶æ‰©å±•åä¸æ–‡ä»¶ç±»å‹æ˜ å°„è¡¨\n    default_type application/octet-stream; #é»˜è®¤æ–‡ä»¶ç±»å‹\n    #charset utf-8; #é»˜è®¤ç¼–ç \n    server_names_hash_bucket_size 128; #æœåŠ¡å™¨åå­—çš„hashè¡¨å¤§å°\n    client_header_buffer_size 32k; #ä¸Šä¼ æ–‡ä»¶å¤§å°é™åˆ¶\n    large_client_header_buffers 4 64k; #è®¾å®šè¯·æ±‚ç¼“\n    client_max_body_size 8m; #è®¾å®šè¯·æ±‚ç¼“\n    sendfile on; #å¼€å¯é«˜æ•ˆæ–‡ä»¶ä¼ è¾“æ¨¡å¼ï¼ŒsendfileæŒ‡ä»¤æŒ‡å®šnginxæ˜¯å¦è°ƒç”¨sendfileå‡½æ•°æ¥è¾“å‡ºæ–‡ä»¶ï¼Œå¯¹äºæ™®é€šåº”ç”¨è®¾ä¸º onï¼Œå¦‚æœç”¨æ¥è¿›è¡Œä¸‹è½½ç­‰åº”ç”¨ç£ç›˜IOé‡è´Ÿè½½åº”ç”¨ï¼Œå¯è®¾ç½®ä¸ºoffï¼Œä»¥å¹³è¡¡ç£ç›˜ä¸ç½‘ç»œI/Oå¤„ç†é€Ÿåº¦ï¼Œé™ä½ç³»ç»Ÿçš„è´Ÿè½½ã€‚æ³¨æ„ï¼šå¦‚æœå›¾ç‰‡æ˜¾ç¤ºä¸æ­£å¸¸æŠŠè¿™ä¸ªæ”¹æˆoffã€‚\n    autoindex on; #å¼€å¯ç›®å½•åˆ—è¡¨è®¿é—®ï¼Œåˆé€‚ä¸‹è½½æœåŠ¡å™¨ï¼Œé»˜è®¤å…³é—­ã€‚\n    tcp_nopush on; #é˜²æ­¢ç½‘ç»œé˜»å¡\n    tcp_nodelay on; #é˜²æ­¢ç½‘ç»œé˜»å¡\n    keepalive_timeout 120; #é•¿è¿æ¥è¶…æ—¶æ—¶é—´ï¼Œå•ä½æ˜¯ç§’\n\n    #FastCGIç›¸å…³å‚æ•°æ˜¯ä¸ºäº†æ”¹å–„ç½‘ç«™çš„æ€§èƒ½ï¼šå‡å°‘èµ„æºå ç”¨ï¼Œæé«˜è®¿é—®é€Ÿåº¦ã€‚ä¸‹é¢å‚æ•°çœ‹å­—é¢æ„æ€éƒ½èƒ½ç†è§£ã€‚\n    fastcgi_connect_timeout 300;\n    fastcgi_send_timeout 300;\n    fastcgi_read_timeout 300;\n    fastcgi_buffer_size 64k;\n    fastcgi_buffers 4 64k;\n    fastcgi_busy_buffers_size 128k;\n    fastcgi_temp_file_write_size 128k;\n\n    #gzipæ¨¡å—è®¾ç½®\n    gzip on; #å¼€å¯gzipå‹ç¼©è¾“å‡º\n    gzip_min_length 1k; #æœ€å°å‹ç¼©æ–‡ä»¶å¤§å°\n    gzip_buffers 4 16k; #å‹ç¼©ç¼“å†²åŒº\n    gzip_http_version 1.0; #å‹ç¼©ç‰ˆæœ¬ï¼ˆé»˜è®¤1.1ï¼Œå‰ç«¯å¦‚æœæ˜¯squid2.5è¯·ä½¿ç”¨1.0ï¼‰\n    gzip_comp_level 2; #å‹ç¼©ç­‰çº§\n    gzip_types text/plain application/x-javascript text/css application/xml;\n    #å‹ç¼©ç±»å‹ï¼Œé»˜è®¤å°±å·²ç»åŒ…å«text/htmlï¼Œæ‰€ä»¥ä¸‹é¢å°±ä¸ç”¨å†å†™äº†ï¼Œå†™ä¸Šå»ä¹Ÿä¸ä¼šæœ‰é—®é¢˜ï¼Œä½†æ˜¯ä¼šæœ‰ä¸€ä¸ªwarnã€‚\n    gzip_vary on;\n    #limit_zone crawler $binary_remote_addr 10m; #å¼€å¯é™åˆ¶IPè¿æ¥æ•°çš„æ—¶å€™éœ€è¦ä½¿ç”¨\n\n    # åº”ç”¨ myblog æ˜¯å®¹å™¨ç½‘ç»œä¸­çš„æ˜µç§°\n    upstream blogs {\n        #upstreamçš„è´Ÿè½½å‡è¡¡ï¼Œweightæ˜¯æƒé‡ï¼Œå¯ä»¥æ ¹æ®æœºå™¨é…ç½®å®šä¹‰æƒé‡ã€‚weigthå‚æ•°è¡¨ç¤ºæƒå€¼ï¼Œæƒå€¼è¶Šé«˜è¢«åˆ†é…åˆ°çš„å‡ ç‡è¶Šå¤§ã€‚\n        # å•å°æœºå™¨ weight è®¾ç½®æ— æ„ä¹‰\n        server myblog:3001 weight=3;\n    }\n\n    # è™šæ‹Ÿä¸»æœºçš„é…ç½®\n    server\n    {\n\n        listen 80;ã€€ã€€ã€€ã€€#ç›‘å¬ç«¯å£\n\n        server_name aa.cn www.aa.cn ; #server_name end  #åŸŸåå¯ä»¥æœ‰å¤šä¸ªï¼Œç”¨ç©ºæ ¼éš”å¼€\n\n        index index.html index.htm index.php;  # è®¾ç½®è®¿é—®ä¸»é¡µ\n\n        set $subdomain '';  # ç»‘å®šç›®å½•ä¸ºäºŒçº§åŸŸå bbb.aa.com  æ ¹ç›®å½• /bbb  æ–‡ä»¶å¤¹\n\n        if ( $host ~* \"(?:(\\w+\\.){0,})(\\b(?!www\\b)\\w+)\\.\\b(?!(com|org|gov|net|cn)\\b)\\w+\\.[a-zA-Z]+\" )\n        {\n            set $subdomain \"/$2\";\n        }\n\n        root /home/wwwroot/aa.cn/web$subdomain;# è®¿é—®åŸŸåè·Ÿç›®å½•  \n\n        include rewrite/dedecms.conf; #rewrite end   #è½½å…¥å…¶ä»–é…ç½®æ–‡ä»¶\n\n\n        location ~ .*.(php|php5)?$\n        {\n        ã€€ã€€fastcgi_pass 127.0.0.1:9000;\n        ã€€ã€€fastcgi_index index.php;\n        ã€€ã€€include fastcgi.conf;\n        }\n        #å›¾ç‰‡ç¼“å­˜æ—¶é—´è®¾ç½®\n        location ~ .*.(gif|jpg|jpeg|png|bmp|swf)$\n        {\n        ã€€ã€€expires 10d;\n        }\n        #JSå’ŒCSSç¼“å­˜æ—¶é—´è®¾ç½®\n        location ~ .*.(js|css)?$\n        {\n        ã€€ã€€expires 1h;\n        }\n\n    }\n\n    # æ—¥å¿—æ ¼å¼è®¾å®š\n\n    log_format access '$remote_addr - $remote_user [$time_local] \"$request\" '\n    '$status $body_bytes_sent \"$http_referer\" '\n    '\"$http_user_agent\" $http_x_forwarded_for';\n    #å®šä¹‰æœ¬è™šæ‹Ÿä¸»æœºçš„è®¿é—®æ—¥å¿—\n    access_log /var/log/nginx/ha97access.log access;\n\n    #å¯¹ \"/\" å¯ç”¨åå‘ä»£ç†\n    location / {\n\n        proxy_pass http://127.0.0.1:88;\n        proxy_redirect off;\n        proxy_set_header X-Real-IP $remote_addr;\n        #åç«¯çš„WebæœåŠ¡å™¨å¯ä»¥é€šè¿‡X-Forwarded-Forè·å–ç”¨æˆ·çœŸå®IP\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        #ä»¥ä¸‹æ˜¯ä¸€äº›åå‘ä»£ç†çš„é…ç½®ï¼Œå¯é€‰ã€‚\n        proxy_set_header Host $host;\n        client_max_body_size 10m; #å…è®¸å®¢æˆ·ç«¯è¯·æ±‚çš„æœ€å¤§å•æ–‡ä»¶å­—èŠ‚æ•°\n        client_body_buffer_size 128k; #ç¼“å†²åŒºä»£ç†ç¼“å†²ç”¨æˆ·ç«¯è¯·æ±‚çš„æœ€å¤§å­—èŠ‚æ•°ï¼Œ\n        proxy_connect_timeout 90; #nginxè·Ÿåç«¯æœåŠ¡å™¨è¿æ¥è¶…æ—¶æ—¶é—´(ä»£ç†è¿æ¥è¶…æ—¶)\n        proxy_send_timeout 90; #åç«¯æœåŠ¡å™¨æ•°æ®å›ä¼ æ—¶é—´(ä»£ç†å‘é€è¶…æ—¶)\n        proxy_read_timeout 90; #è¿æ¥æˆåŠŸåï¼Œåç«¯æœåŠ¡å™¨å“åº”æ—¶é—´(ä»£ç†æ¥æ”¶è¶…æ—¶)\n        proxy_buffer_size 4k; #è®¾ç½®ä»£ç†æœåŠ¡å™¨ï¼ˆnginxï¼‰ä¿å­˜ç”¨æˆ·å¤´ä¿¡æ¯çš„ç¼“å†²åŒºå¤§å°\n        proxy_buffers 4 32k; #proxy_buffersç¼“å†²åŒºï¼Œç½‘é¡µå¹³å‡åœ¨32kä»¥ä¸‹çš„è®¾ç½®\n        proxy_busy_buffers_size 64k; #é«˜è´Ÿè·ä¸‹ç¼“å†²å¤§å°ï¼ˆproxy_buffers*2ï¼‰\n        proxy_temp_file_write_size 64k;\n        #è®¾å®šç¼“å­˜æ–‡ä»¶å¤¹å¤§å°ï¼Œå¤§äºè¿™ä¸ªå€¼ï¼Œå°†ä»upstreamæœåŠ¡å™¨ä¼ \n\n    }\n\n    # è®¾å®šæŸ¥çœ‹NginxçŠ¶æ€çš„åœ°å€\n    location /NginxStatus {\n\n        stub_status on;\n        access_log on;\n        auth_basic \"NginxStatus\";\n        auth_basic_user_file conf/htpasswd;\n        #htpasswdæ–‡ä»¶çš„å†…å®¹å¯ä»¥ç”¨apacheæä¾›çš„htpasswdå·¥å…·æ¥äº§ç”Ÿã€‚\n\n    }\n\n    #æœ¬åœ°åŠ¨é™åˆ†ç¦»åå‘ä»£ç†é…ç½®\n    #æ‰€æœ‰jspçš„é¡µé¢å‡äº¤ç”±tomcatæˆ–resinå¤„ç†\n    location ~ .(jsp|jspx|do)?$ {\n\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_pass http://127.0.0.1:8080;\n\n    }\n    #æ‰€æœ‰é™æ€æ–‡ä»¶ç”±nginxç›´æ¥è¯»å–ä¸ç»è¿‡tomcatæˆ–resin\n    location ~ .*.(htm|html|gif|jpg|jpeg|png|bmp|swf|ioc|rar|zip|txt|flv|mid|doc|ppt|pdf|xls|mp3|wma)$\n    {\n        expires 15d;\n    }\n    location ~ .*.(js|css)?$\n    {\n        expires 1h;\n    }\n\n}\n```\n\n### ä½¿ç”¨è®°å½•\n\n#### nginxçƒ­æ›´æ–°\n\nåœ¨dockerä¸­,å®ç°nginxçƒ­æ›´æ–° `docker exec -i [nginxå®¹å™¨å/id] nginx -s reload`\n\n### nginx æ—¥å¿—é…ç½®\n\n[æ—¥å¿—é…ç½® å‚è€ƒ](https://www.cnblogs.com/biglittleant/p/8979856.html)\n\n## è¿›é˜¶ä½¿ç”¨\n\nå†æ–‡ç« å¼€å§‹, æˆ‘ä»¬ä½¿ç”¨dockerå®‰è£…nginx, æˆ‘ä»¬å®Œå…¨ä½¿ç”¨äº†nginxå®˜æ–¹çš„é»˜è®¤é…ç½®, è¿™é‡Œæˆ‘ä»¬å°†ä½¿ç”¨è‡ªå®šä¹‰é…ç½®æ¥å¯åŠ¨nginx\n\né¦–å…ˆæˆ‘ä»¬å¾—çŸ¥é“ nginx å®˜æ–¹ docker é•œåƒå¾—confæ–‡ä»¶ä½ç½®åœ¨å“ª\n\næˆ‘å¾—nginxç‰ˆæœ¬confæ–‡ä»¶åœ¨: /etc/nginx/nginx.conf (å¯èƒ½ä¸åŒç‰ˆæœ¬çš„é…ç½®æ–‡ä»¶ä¼šæœ‰æ‰€ä¸åŒ, æ‰€ä»¥æˆ‘ä»¬åœ¨æ‹‰å–é•œåƒçš„æ—¶å€™æœ€å¥½å›ºå®šç‰ˆæœ¬)\n\n## ç›¸å…³é“¾æ¥\n\n[Nginxé…ç½®æ–‡ä»¶nginx.confè¯¦è§£](https://www.cnblogs.com/xuey/p/7631690.html)\n\n[nginxçš„locationé…ç½®è¯¦è§£](https://www.cnblogs.com/sign-ptk/p/6723048.html)\n\n## ç»“è¯­\n\n","tags":["æœåŠ¡å™¨"]},{"title":"IISæœåŠ¡å™¨å­¦ä¹ ","url":"/2019/05/15/iis/","content":"\nIISæ˜¯Internet Information Servicesçš„ç¼©å†™. å¾®è½¯å…¬å¸æä¾›çš„åŸºäºè¿è¡ŒMicrosoft Windowsçš„äº’è”ç½‘åŸºæœ¬æœåŠ¡. IISæ˜¯ä¸€ç§Webï¼ˆç½‘é¡µï¼‰æœåŠ¡ç»„ä»¶ï¼Œå…¶ä¸­åŒ…æ‹¬WebæœåŠ¡å™¨ã€FTPæœåŠ¡å™¨ã€NNTPæœåŠ¡å™¨å’ŒSMTPæœåŠ¡å™¨ï¼Œåˆ†åˆ«ç”¨äºç½‘é¡µæµè§ˆã€æ–‡ä»¶ä¼ è¾“ã€æ–°é—»æœåŠ¡å’Œé‚®ä»¶å‘é€ç­‰æ–¹é¢ï¼Œå®ƒä½¿å¾—åœ¨ç½‘ç»œï¼ˆåŒ…æ‹¬äº’è”ç½‘å’Œå±€åŸŸç½‘ï¼‰ä¸Šå‘å¸ƒä¿¡æ¯æˆäº†ä¸€ä»¶å¾ˆå®¹æ˜“çš„äº‹.\n\n## IIS æœåŠ¡å™¨\n\nIISæœåŠ¡å™¨æ˜¯Windowsè‡ªå¸¦çš„ä¸€ä¸ªæœåŠ¡å™¨, é»˜è®¤æ˜¯ç¦ç”¨çš„, æˆ‘ä»¬éœ€è¦åœ¨ æ§åˆ¶é¢æ¿ -> ç¨‹åºä¸åº”ç”¨ ä¸­å¼€å¯è¿™ä¸ªæœåŠ¡, ç„¶ååœ¨ç®¡ç†å·¥å…·ä¸­æ·»åŠ ä½ çš„ç½‘ç«™å³å¯.\n\n## é…ç½®IISæœåŠ¡\n\n> æˆ‘ä»¥ windows 10 ä¸ºä¾‹\n\næ‰¾åˆ°æ§åˆ¶é¢æ¿, æ‰“å¼€**ç¨‹åºå’ŒåŠŸèƒ½**, ç‚¹å‡»å·¦ä¾§çš„**å¯ç”¨å’Œå…³é—­windowsåŠŸèƒ½**\n\n![ ](./iis_01.png)\n\n![ ](./iis_02.png)\n\nå¦‚å›¾æ‰€ç¤º, å‹¾é€‰ **Internet Information Service** é€‰é¡¹, ä¼šè‡ªåŠ¨å¸®ä½ é€‰ä¸­å­é€‰é¡¹, åˆ°è¿™é‡Œä¸€ä¸ªç®€å•çš„iisæœåŠ¡å™¨å°±ç®—å¯åŠ¨äº†\n\n![ ](./iis_03.png)\n\n> [æµè§ˆå™¨è¾“å…¥(æˆ–ç‚¹å‡»è¿™é‡Œ)](http://localhost)å°±å¯ä»¥çœ‹åˆ°ä»¥ä¸‹ä¿¡æ¯\n\n![ ](./iis_04.png)\n\n## ç®¡ç†ä½ çš„ç½‘ç«™\n\n### ç®¡ç†ç•Œé¢\n\nåŒæ ·çš„åœ¨æ§åˆ¶é¢æ¿, æ‰“å¼€**ç®¡ç†å·¥å…·**, æ‰¾åˆ°**Internet Information Service(IIS)ç®¡ç†å™¨**\n\n![ ](./iis_05.png)\n\nè¿™ä¸ªå°±æ˜¯ä½ çš„IISæœåŠ¡å™¨çš„ç®¡ç†ç•Œé¢\n\n### æ·»åŠ ç½‘ç«™\n\nå³é”®**æœåŠ¡å™¨**/**ç½‘ç«™**é€‰æ‹©**æ·»åŠ ç½‘ç«™**, å‡ºç°å¦‚ä¸‹ç•Œé¢, å¡«å†™ç½‘ç«™ç›¸å…³ä¿¡æ¯å³å¯.\n\n![ ](./iis_06.png)\n\næˆ‘å°†æœ¬æœºçš„ä¸€ä¸ªå›¾ç‰‡ç›®å½•éƒ¨ç½²ä¸ºä¸€ä¸ªç½‘ç«™, *å›¾ç‰‡æœåŠ¡å™¨*\n\n1. ç½‘ç«™åç§°, å³ä½ çš„ç½‘ç«™åå­—.\n2. åº”ç”¨ç¨‹åºæ± , é»˜è®¤å³å¯, æ·±å…¥çš„å†æ¢è®¨.\n3. ç‰©ç†è·¯å¾„, å°±æ˜¯ä½ çš„é¡¹ç›®æ‰€åœ¨è·¯å¾„\n4. ç»‘å®š\n   1. ç±»å‹ http/htts, å¦‚æœé€‰æ‹©ä¸º https è¿˜éœ€è¦é…ç½®è¯ä¹¦\n   2. IPåœ°å€æ®µ, ä½ å¯ä»¥åœ¨ä½ å±€åŸŸç½‘çš„IPæ®µå†…è‡ªå®šä¹‰, é»˜è®¤å°±æ˜¯æœ¬æœºIP(localhostã€127.0.0.1)\n   3. ç«¯å£ä¸èƒ½é‡å¤, è¿™é‡Œæˆ‘é…ç½®ä¸º 8001\n5. ä¸»æœºå,å°±æ˜¯ä½ çš„åŸŸå, é»˜è®¤ä¸éœ€è¦ä¿®æ”¹, ç›¸åº”çš„ä¿®æ”¹éœ€è¦é…ç½® hosts æ–‡ä»¶ (è·¯å¾„\"C:\\Windows\\System32\\drivers\\etc\\hosts\")\n\næœ€åä¸€æ­¥, ç‚¹å‡»ç¡®è®¤ä¿å­˜, ä½ å¯ä»¥çœ‹åˆ°:\n\n![ ](./iis_07.png)\n\næ‰“å¼€æµè§ˆå™¨,è¾“å…¥ [localhost:8001/1.jpg](http://localhost:8001/1.jpg), ä½ å¯ä»¥çœ‹åˆ°:\n\n![ ](./iis_08.png)\n\n## ç»“è¯­\n\nå­¦æ— æ­¢å¢ƒ","tags":["æœåŠ¡å™¨"]},{"title":"Markdownå­¦ä¹ ","url":"/2019/04/26/markdown/","content":"\nè¿™ä¸ªç½‘ç«™éƒ½æ˜¯æ‰€æœ‰çš„æ–‡ç« éƒ½æ˜¯ä½¿ç”¨ Markdown ç¼–å†™çš„,æ‰€ä»¥æˆ‘ä»¬æœ‰å¿…è¦äº†è§£ä¸€ä¸‹ Markdown çš„åŸºæœ¬è¯­æ³•\n\n## æˆ‘ä»¬éœ€è¦äº†è§£çš„\n\n1. Markdown æ˜¯ä»€ä¹ˆ\n2. ä¸ºä»€ä¹ˆè¦ç”¨ Markdown\n3. æ€ä¹ˆä½¿ç”¨ Markdown åŸºæœ¬è¯­æ³•\n4. æ€»ç»“\n\n### ä»€ä¹ˆæ˜¯ Markdown\n\n* Markdown æ˜¯ä¸€ä¸ªç®€å•çš„æ ‡è®°è¯­è¨€,é€šè¿‡**ç®€å•çš„**å‡ ä¸ªæ ‡è®°ä½¿å¾—æ™®é€šæ–‡æœ¬æ–‡å­—å…·æœ‰ä¸€å®šçš„æ ¼å¼,ç”¨æ¥å†™åšå®¢å†å¥½ä¸è¿‡äº†.\n\n### ä¸ºä»€ä¹ˆè¦ç”¨ Markdown\n\n* **ä¸Šæ‰‹å¿«**,è¯­æ³•ç®€å• åªéœ€è¦è®°ä½å‡ ä¸ªç¬¦å·å°±èƒ½ä¸Šæ‰‹äº†.\n* Markdwon æœ‰ç€ æ˜“è¯»ã€æ˜“å†™ã€æ˜“æ›´æ”¹ ç­‰ç‰¹ç‚¹\n* Markdwon æœ€ç»ˆæ˜¯è¢«ç¼–è¯‘æˆ HTML ä»£ç æ‰§è¡Œçš„\n* Markdwon æ”¯æŒåŸç”Ÿhtmlä»£ç , å¦‚: <span style=\"color: red; font-size: 18px;\">Markdwon æ”¯æŒåŸç”Ÿhtmlä»£ç  (çº¢è‰² 18px å­—ä½“)</span>\n\n### Markdown çš„åŸºæœ¬è¯­æ³•\n\n#### æ ‡é¢˜æ ‡ç­¾ (#ã€=ã€-)\n\n>ä¸¤ç§å½¢å¼:ä½¿ç”¨ # ç¬¦å·ä»£è¡¨1-6çº§æ ‡é¢˜æ ‡ç­¾, **ä¸ªæ•°**ä¸ºçº§åˆ«;  ä½¿ç”¨ =ã€- ä»£è¡¨ ä¸€ã€äºŒçº§æ ‡ç­¾\n\n```\n# ä¸€çº§æ ‡é¢˜<h1>\n## äºŒçº§æ ‡é¢˜ <h2>\n### ä¸‰çº§æ ‡é¢˜ <h3>\n#### å››çº§æ ‡é¢˜ <h4>\n##### äº”çº§æ ‡é¢˜ <h5>\n```\n\n#### æ®µè½æ ‡ç­¾ (>)\n\n> æ®µè½(å¼•ç”¨)æ ‡ç­¾ ç¬¦å·ä¸å†…å®¹ä¹‹é—´è¦æœ‰ç©ºæ ¼, å•ä¸ªä¸ºä¸»,å†…åµŒå‡ å±‚å°±æ‰“å‡ ä¸ª **>**    (ps:è²Œä¼¼å¯ä»¥ä¸€è‡´æ‰“ä¸‹å»)\n>> å†…åµŒ1     >> å†…åµŒ1\n>>> å†…åµŒ2    >>> å†…åµŒ2\n>>>> å†…åµŒ3   >>>> å†…åµŒ3\n\n#### å­—ä½“å±æ€§\n\n```\n* **å­—ä½“åŠ ç²—**  ç»™å­—ä½“åŠ ç²—,åœ¨å­—ä½“å·¦å³å„åŠ ä¸¤ä¸ª *\n* *æ–œä½“å­—*  ä½¿æ–‡å­—å€¾æ–œ,åœ¨æ–‡å­—å·¦å³å„åŠ ä¸€ä¸ª *\n* ***æ–œä½“åŠ ç²—***  è¦ä½¿æ–‡å­—åŠ ç²—ã€å€¾æ–œ,åœ¨æ–‡å­—å·¦å³å„åŠ ä¸‰ä¸ª *\n* ~~åŠ åˆ é™¤çº¿çš„æ–‡å­—~~ å·¦å³å„ ä¸¤ä¸ª ~\n```\n\n* **å­—ä½“åŠ ç²—**  ç»™å­—ä½“åŠ ç²—,åœ¨å­—ä½“å·¦å³å„åŠ ä¸¤ä¸ª *\n* *æ–œä½“å­—*  ä½¿æ–‡å­—å€¾æ–œ,åœ¨æ–‡å­—å·¦å³å„åŠ ä¸€ä¸ª *\n* ***æ–œä½“åŠ ç²—***  è¦ä½¿æ–‡å­—åŠ ç²—ã€å€¾æ–œ,åœ¨æ–‡å­—å·¦å³å„åŠ ä¸‰ä¸ª *\n* ~~åŠ åˆ é™¤çº¿çš„æ–‡å­—~~ å·¦å³å„ ä¸¤ä¸ª ~\n\n#### åˆ†å‰²çº¿ (-ã€*)\n\n> ä¸‰ä¸ª(-ã€*)åŠä¸‰ä¸ªä»¥ä¸Šç¬¦å·å³å¯\n\næ•ˆæœå¦‚ä¸‹:\n\n```\n---\n***\n* * *\n```\n\nç¬¦å·(-)åˆ†å‰²çº¿\n\n---\n\nç¬¦å·(*)åˆ†å‰²çº¿\n\n******\n\n#### å›¾ç‰‡\n\nåŸºæœ¬è¯­æ³•\n\n```sh\n![å›¾ç‰‡è¯­æ³•](https://images.jzwyz.com/blog/tpurl.png \"è¿™æ˜¯å¯¹å›¾ç‰‡è¯­æ³•çš„è¯´æ˜å›¾\")\n![å›¾ç‰‡alt](https://images.jzwyz.com/blog/1.jpg \"å›¾ç‰‡title\")\n![é“¾æ¥è¯­æ³•](https://images.jzwyz.com/blog/urlsm.png \"é“¾æ¥è¯­æ³•è¯´æ˜\")\n```\n\næ•ˆæœ:\n\n![å›¾ç‰‡è¯­æ³•](https://images.jzwyz.com/blog/tpurl.png \"è¿™æ˜¯å¯¹å›¾ç‰‡è¯­æ³•çš„è¯´æ˜å›¾\")\n\n![å›¾ç‰‡alt](https://images.jzwyz.com/blog/1.jpg \"å›¾ç‰‡title\")\n\n![é“¾æ¥è¯­æ³•](https://images.jzwyz.com/blog/urlsm.png \"é“¾æ¥è¯­æ³•è¯´æ˜\")\n\n> å›¾ç‰‡alt æ˜¾ç¤ºåœ¨å›¾ç‰‡ä¸‹æ–¹\n> å›¾ç‰‡title å°±æ˜¯å›¾ç‰‡æè¿°,å½“é¼ æ ‡ç§»åˆ°å›¾ç‰‡ä¸Šæ—¶æ˜¾ç¤ºçš„å†…å®¹ã€‚titleå¯åŠ å¯ä¸åŠ  titleä¸urlä¹‹é—´ä»¥ ç©ºæ ¼ éš”å¼€\n\n#### é“¾æ¥\n\nä¸å›¾ç‰‡è¯­æ³•ç±»ä¼¼, å¼€å§‹ ä¸è¦ ! ç¬¦å·\n\n```sh\n[ç™¾åº¦](https://www.baidu.com \"ç™¾åº¦ä¸€ä¸‹\")\n[Github](https://www.github.com \"å»Github\")\n```\n\n[ç™¾åº¦](https://www.baidu.com \"ç™¾åº¦ä¸€ä¸‹\")\n\n[Github](https://www.github.com \"å»Github\")\n\n#### åˆ—è¡¨\n\n```md\n1. æœ‰åºåˆ—è¡¨\n2. æœ‰åºåˆ—è¡¨\n3. æœ‰åºåˆ—è¡¨\n\n* æ— åºåˆ—è¡¨ *\n  + æ— åºåˆ—è¡¨ +\n    - æ— åºåˆ—è¡¨ -\n  + æ— åºåˆ—ç™½\n* æ— åºåˆ—è¡¨\n```\n\næ•ˆæœ:\n\n1. æœ‰åºåˆ—è¡¨\n2. æœ‰åºåˆ—è¡¨\n3. æœ‰åºåˆ—è¡¨\n\n* æ— åºåˆ—è¡¨ *\n  + æ— åºåˆ—è¡¨ +\n    - æ— åºåˆ—è¡¨ -\n  + æ— åºåˆ—ç™½\n* æ— åºåˆ—è¡¨\n\n> åˆ—è¡¨ åˆ†ä¸ºæ— åºå’Œæœ‰åº,å…¶è¯­æ³•åŒºåˆ«å°±æ˜¯ æœ‰åºåˆ—è¡¨ä»¥**æ•°å­—.**ä¸ºç¬¦å· åºå·å’Œå†…å®¹ä¹‹é—´ç©ºæ ¼åˆ†å¼€\n\n> æ— åºåˆ—è¡¨ æœ‰ (*ã€+ã€-) ä¸‰ä¸ªç¬¦å·, ä½¿ç”¨å¤šä¸ªæ—¶,æœ€é¡¶å±‚åº”ä½¿ç”¨ *,æ¬¡çº§ä½¿ç”¨ +,å†æ¬¡çº§ä½¿ç”¨ -\n\n> åˆ—è¡¨åµŒå¥— ä¸‹çº§ä¸ä¸Šçº§æ¢è¡Œ,ç¼©è¿›ä¸‰ä¸ªç©ºæ ¼\n\n#### è¡¨æ ¼\n\nç¤ºåˆ— md ä»£ç :\n\n```sh\nåˆ—å|åˆ—å|åˆ—å\n--|:-:|:--â€”\nå†…å®¹|å†…|å†…å®¹å‘€\n```\n\nç¬¬ä¸€è¡Œ | ç¬¦å·åˆ†æ ¼åˆ—å\n\nç¬¬äºŒè¡Œ - ä»£ç è¯¥åˆ—ä¸­ä¸€ä¸ªå­—ç¬¦,ä¸€èˆ¬è®¾ç½®ä¸ºè¯¥åˆ—æœ€é•¿å­—ç¬¦æ•°é‡, : æ”¾åœ¨ - å“ªè¾¹å°±è¡¨ç¤º è¯¥åˆ—å­—æ®µå‘:å¯¹é½, | ç¬¦å·åˆ†éš”åˆ—\n  \nå†å¾€ä¸‹,å°±æ˜¯æ¯åˆ—çš„æ•°æ®åˆ—\n\nç¼–å·|å§“å|æ€§åˆ«|å¹´é¾„\n--:|:---:|-:|:--\n01|å°æ˜|ç”·|12\n02|å°å°çº¢|å¥³|15\n\n#### ä»£ç å—è¯­æ³•\n\næ•ˆæœå¦‚ä¸‹:\n\n```sh\n è¿™æ˜¯ä»£ç å—\n```\n\n`è¿™æ˜¯ä»£ç è¡Œ`\n\n```bash\n# æŒ‡å®š è¯­è¨€\ndocker run -d --rm -v ~/../workspace/my-blog/source:/app/source --network=app-bridge --name=webblog myblog:1.0\n```\n\n```node\nnode --version\n```\n\n![ä»£ç å—è¯­æ³•](https://images.jzwyz.com/blog/dmkyf.png \"ä»£ç å—è¯­æ³•\")","tags":["åŸºç¡€"]},{"title":"Hello World","url":"/2019/01/01/hello-world/","content":"Welcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\nhexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\nhexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\nhexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\nhexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/deployment.html)","tags":["Hello World"]},{"title":"æˆ‘çš„ä¸ªäººåšå®¢","url":"/2018/11/04/æˆ‘çš„ä¸ªäººåšå®¢/","content":"\n## è¿™æ˜¯æˆ‘çš„ç¬¬ä¸€ä¸ªåšå®¢\n\nè¿™ä¸ªåšå®¢æ¨¡ç‰ˆå¥½å‘,å¦‚æœå†…å®¹è¿‡çŸ­,åœ¨æ‹‰åˆ°æœ€ä¸‹é¢çš„æ—¶å€™å°±ä¼šè‡ªåŠ¨å¼¹åˆ°ä¸Šé¢åå¤çš„å¼¹\n\n## è¿™ä¸ªé¡¹ç›®æ€ä¹ˆè·‘\n\n`docker run -d -p 4000:4000 --rm -v ~/myWorkspace/myproject/myblog/source:/app/source --network=app-bridge --name=webblog myblog:1.4`\n\n### å‘½ä»¤è¯´æ˜\n\n* **-d**   dockeråœ¨åå°è¿è¡Œ\n* **-p**   æŒ‡å®šå®¹å™¨è¿è¡Œçš„ç«¯å£æ˜ å°„åˆ°æœºå™¨ç«¯å£, [å†…éƒ¨]:[å¤–éƒ¨]\n* **--rm** åœæ­¢å®¹å™¨å³åˆ é™¤\n* **-v**   dockeræ•°æ®å·æ“ä½œ, å°†**æœºå™¨è·¯å¾„**~/myWorkspace/myproject/myblog/source æŒ‚è½½åˆ°**å®¹å™¨è·¯å¾„**/app/source  å‚è€ƒ[ç®¡ç†å®¹å™¨ä¸­çš„æ•°æ®](https://docs.docker-cn.com/engine/tutorials/dockervolumes/)\n* **--network**  dockerç½‘ç»œæ“ä½œ, å°†å®¹å™¨è¿è¡Œåœ¨ app-bridge æ¡¥ç½‘ç»œä¸­, å‚è€ƒ[dockerå®¹å™¨ç½‘ç»œ](https://docs.docker-cn.com/engine/userguide/networking/)\n* **--name** å®¹å™¨çš„åç§°\n* **myblog:1.4**  è¿™ä¸ªæ˜¯å®¹å™¨çš„é•œåƒ ***:** å‰é¢æ˜¯é•œåƒåç§°,åé¢æ˜¯ é•œåƒç‰ˆæœ¬\n\n## å¼€å¯æœç´¢åŠŸèƒ½\n\n```sh\n# npm i hexo-generator-search --save\n```\n\n_config.yml é…ç½®\n\n```yml\nsearch:\n  path: search.json\n  field: post\n```\n\n## è€ƒè™‘åŠ å…¥adminåŠŸèƒ½\n\néœ€è¦åœ¨Dockerfileræ·»åŠ ä¸€ä¸‹ä¾èµ–\n`npm install --save hexo-admin-ehc --save --registry=https://registry.npm.taobao.org`\n\nä¿®æ”¹_config.xmlæ–‡ä»¶, å½“ç„¶è¿™æ˜¯å¯é€‰çš„,è®¾ç½®åå°å¯†ç \n\n```bash\nadmin:\n  username: jason\n  password_hash: $2a$05$XdoQHWQBCutMxgX3iBG0XOfov2LTNelkMDbtMCkaQRgqhoMdV4tAe\n  secret: jason\n```\n\nè®¾ç½®adminåŸºæœ¬å±æ€§\n\n```bash\nmetadata:\n  author_id: defaultAuthorId\n  language: zh\n```\n\n### ä»¥ä¸‹ä¸ºå ä½ç¬¦\n\n> éœ€è¦æ³¨æ„çš„æ˜¯ æœ€åé¢ myblog:1.0  è¿™ä¸ª 1.0 ä»£è¡¨é•œåƒç‰ˆæœ¬,ä¸€æƒ…å†µè€Œå®š\n","tags":["éšä¾¿å†™å†™"]}]